[Unit]
Description=Ops Agent (Backup/Restore broker)
After=network-online.target docker.service
Wants=network-online.target

[Service]
Type=simple
User=root
Group=root
WorkingDirectory=/home/munaim/srv/ops/agent
Environment=PYTHONUNBUFFERED=1
ExecStart=/home/munaim/srv/ops/agent/.venv/bin/python -m uvicorn app:APP --host 127.0.0.1 --port 9753
Restart=always
RestartSec=5
LimitNOFILE=65535
NoNewPrivileges=true
ProtectSystem=full
ProtectHome=false
ReadWritePaths=/home/munaim/srv/ops /srv/backups /etc/caddy /home/munaim/srv/proxy/caddy /var/run/docker.sock

[Install]
WantedBy=multi-user.target
