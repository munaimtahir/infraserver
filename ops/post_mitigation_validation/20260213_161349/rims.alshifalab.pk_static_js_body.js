function Bf(e,t){for(var n=0;n<t.length;n++){const l=t[n];if(typeof l!="string"&&!Array.isArray(l)){for(const i in l)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(l,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>l[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tc={exports:{}},Si={},nc={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),Af=Symbol.for("react.portal"),$f=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),Wf=Symbol.for("react.provider"),Uf=Symbol.for("react.context"),Vf=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),Gf=Symbol.for("react.memo"),Kf=Symbol.for("react.lazy"),wa=Symbol.iterator;function Qf(e){return e===null||typeof e!="object"?null:(e=wa&&e[wa]||e["@@iterator"],typeof e=="function"?e:null)}var rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lc=Object.assign,ic={};function mr(e,t,n){this.props=e,this.context=t,this.refs=ic,this.updater=n||rc}mr.prototype.isReactComponent={};mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sc(){}sc.prototype=mr.prototype;function _o(e,t,n){this.props=e,this.context=t,this.refs=ic,this.updater=n||rc}var wo=_o.prototype=new sc;wo.constructor=_o;lc(wo,mr.prototype);wo.isPureReactComponent=!0;var ka=Array.isArray,oc=Object.prototype.hasOwnProperty,ko={current:null},ac={key:!0,ref:!0,__self:!0,__source:!0};function dc(e,t,n){var l,i={},s=null,o=null;if(t!=null)for(l in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)oc.call(t,l)&&!ac.hasOwnProperty(l)&&(i[l]=t[l]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var d=Array(a),c=0;c<a;c++)d[c]=arguments[c+2];i.children=d}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)i[l]===void 0&&(i[l]=a[l]);return{$$typeof:hl,type:e,key:s,ref:o,props:i,_owner:ko.current}}function Yf(e,t){return{$$typeof:hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bo(e){return typeof e=="object"&&e!==null&&e.$$typeof===hl}function Jf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ba=/\/+/g;function Ui(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jf(""+e.key):t.toString(36)}function Fl(e,t,n,l,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case hl:case Af:o=!0}}if(o)return o=e,i=i(o),e=l===""?"."+Ui(o,0):l,ka(i)?(n="",e!=null&&(n=e.replace(ba,"$&/")+"/"),Fl(i,t,n,"",function(c){return c})):i!=null&&(bo(i)&&(i=Yf(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ba,"$&/")+"/")+e)),t.push(i)),1;if(o=0,l=l===""?".":l+":",ka(e))for(var a=0;a<e.length;a++){s=e[a];var d=l+Ui(s,a);o+=Fl(s,t,n,d,i)}else if(d=Qf(e),typeof d=="function")for(e=d.call(e),a=0;!(s=e.next()).done;)s=s.value,d=l+Ui(s,a++),o+=Fl(s,t,n,d,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function vl(e,t,n){if(e==null)return e;var l=[],i=0;return Fl(e,l,"","",function(s){return t.call(n,s,i++)}),l}function qf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},Al={transition:null},Xf={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Al,ReactCurrentOwner:ko};function cc(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:vl,forEach:function(e,t,n){vl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vl(e,function(){t++}),t},toArray:function(e){return vl(e,function(t){return t})||[]},only:function(e){if(!bo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=mr;te.Fragment=$f;te.Profiler=Mf;te.PureComponent=_o;te.StrictMode=Of;te.Suspense=Hf;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xf;te.act=cc;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=lc({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ko.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(d in t)oc.call(t,d)&&!ac.hasOwnProperty(d)&&(l[d]=t[d]===void 0&&a!==void 0?a[d]:t[d])}var d=arguments.length-2;if(d===1)l.children=n;else if(1<d){a=Array(d);for(var c=0;c<d;c++)a[c]=arguments[c+2];l.children=a}return{$$typeof:hl,type:e.type,key:i,ref:s,props:l,_owner:o}};te.createContext=function(e){return e={$$typeof:Uf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wf,_context:e},e.Consumer=e};te.createElement=dc;te.createFactory=function(e){var t=dc.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:Vf,render:e}};te.isValidElement=bo;te.lazy=function(e){return{$$typeof:Kf,_payload:{_status:-1,_result:e},_init:qf}};te.memo=function(e,t){return{$$typeof:Gf,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Al.transition;Al.transition={};try{e()}finally{Al.transition=t}};te.unstable_act=cc;te.useCallback=function(e,t){return We.current.useCallback(e,t)};te.useContext=function(e){return We.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return We.current.useDeferredValue(e)};te.useEffect=function(e,t){return We.current.useEffect(e,t)};te.useId=function(){return We.current.useId()};te.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return We.current.useMemo(e,t)};te.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};te.useRef=function(e){return We.current.useRef(e)};te.useState=function(e){return We.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return We.current.useTransition()};te.version="18.3.1";nc.exports=te;var g=nc.exports;const Co=Ff(g),Zf=Bf({__proto__:null,default:Co},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep=g,tp=Symbol.for("react.element"),np=Symbol.for("react.fragment"),rp=Object.prototype.hasOwnProperty,lp=ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ip={key:!0,ref:!0,__self:!0,__source:!0};function uc(e,t,n){var l,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(l in t)rp.call(t,l)&&!ip.hasOwnProperty(l)&&(i[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)i[l]===void 0&&(i[l]=t[l]);return{$$typeof:tp,type:e,key:s,ref:o,props:i,_owner:lp.current}}Si.Fragment=np;Si.jsx=uc;Si.jsxs=uc;tc.exports=Si;var r=tc.exports,vs={},fc={exports:{}},rt={},pc={exports:{}},hc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,M){var O=C.length;C.push(M);e:for(;0<O;){var Y=O-1>>>1,P=C[Y];if(0<i(P,M))C[Y]=M,C[O]=P,O=Y;else break e}}function n(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var M=C[0],O=C.pop();if(O!==M){C[0]=O;e:for(var Y=0,P=C.length,G=P>>>1;Y<G;){var ee=2*(Y+1)-1,ie=C[ee],he=ee+1,ve=C[he];if(0>i(ie,O))he<P&&0>i(ve,ie)?(C[Y]=ve,C[he]=O,Y=he):(C[Y]=ie,C[ee]=O,Y=ee);else if(he<P&&0>i(ve,O))C[Y]=ve,C[he]=O,Y=he;else break e}}return M}function i(C,M){var O=C.sortIndex-M.sortIndex;return O!==0?O:C.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var d=[],c=[],x=1,h=null,y=3,j=!1,S=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var M=n(c);M!==null;){if(M.callback===null)l(c);else if(M.startTime<=C)l(c),M.sortIndex=M.expirationTime,t(d,M);else break;M=n(c)}}function v(C){if(_=!1,p(C),!S)if(n(d)!==null)S=!0,q(b);else{var M=n(c);M!==null&&ce(v,M.startTime-C)}}function b(C,M){S=!1,_&&(_=!1,f(k),k=-1),j=!0;var O=y;try{for(p(M),h=n(d);h!==null&&(!(h.expirationTime>M)||C&&!$());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,y=h.priorityLevel;var P=Y(h.expirationTime<=M);M=e.unstable_now(),typeof P=="function"?h.callback=P:h===n(d)&&l(d),p(M)}else l(d);h=n(d)}if(h!==null)var G=!0;else{var ee=n(c);ee!==null&&ce(v,ee.startTime-M),G=!1}return G}finally{h=null,y=O,j=!1}}var E=!1,z=null,k=-1,F=5,T=-1;function $(){return!(e.unstable_now()-T<F)}function J(){if(z!==null){var C=e.unstable_now();T=C;var M=!0;try{M=z(!0,C)}finally{M?Q():(E=!1,z=null)}}else E=!1}var Q;if(typeof m=="function")Q=function(){m(J)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=J,Q=function(){R.postMessage(null)}}else Q=function(){w(J,0)};function q(C){z=C,E||(E=!0,Q())}function ce(C,M){k=w(function(){C(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){S||j||(S=!0,q(b))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(C){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var O=y;y=M;try{return C()}finally{y=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,M){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var O=y;y=C;try{return M()}finally{y=O}},e.unstable_scheduleCallback=function(C,M,O){var Y=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Y+O:Y):O=Y,C){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=O+P,C={id:x++,callback:M,priorityLevel:C,startTime:O,expirationTime:P,sortIndex:-1},O>Y?(C.sortIndex=O,t(c,C),n(d)===null&&C===n(c)&&(_?(f(k),k=-1):_=!0,ce(v,O-Y))):(C.sortIndex=P,t(d,C),S||j||(S=!0,q(b))),C},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(C){var M=y;return function(){var O=y;y=M;try{return C.apply(this,arguments)}finally{y=O}}}})(hc);pc.exports=hc;var sp=pc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op=g,nt=sp;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gc=new Set,Qr={};function Bn(e,t){dr(e,t),dr(e+"Capture",t)}function dr(e,t){for(Qr[e]=t,e=0;e<t.length;e++)gc.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),js=Object.prototype.hasOwnProperty,ap=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ca={},Ea={};function dp(e){return js.call(Ea,e)?!0:js.call(Ca,e)?!1:ap.test(e)?Ea[e]=!0:(Ca[e]=!0,!1)}function cp(e,t,n,l){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function up(e,t,n,l){if(t===null||typeof t>"u"||cp(e,t,n,l))return!0;if(l)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ue(e,t,n,l,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Le[e]=new Ue(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Le[t]=new Ue(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Le[e]=new Ue(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Le[e]=new Ue(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Le[e]=new Ue(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Le[e]=new Ue(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Le[e]=new Ue(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Le[e]=new Ue(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Le[e]=new Ue(e,5,!1,e.toLowerCase(),null,!1,!1)});var Eo=/[\-:]([a-z])/g;function Ro(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Eo,Ro);Le[t]=new Ue(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Eo,Ro);Le[t]=new Ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Eo,Ro);Le[t]=new Ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Le[e]=new Ue(e,1,!1,e.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Le[e]=new Ue(e,1,!1,e.toLowerCase(),null,!0,!0)});function To(e,t,n,l){var i=Le.hasOwnProperty(t)?Le[t]:null;(i!==null?i.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(up(t,n,i,l)&&(n=null),l||i===null?dp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,l=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,l?e.setAttributeNS(l,t,n):e.setAttribute(t,n))))}var Mt=op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Hn=Symbol.for("react.portal"),Gn=Symbol.for("react.fragment"),Po=Symbol.for("react.strict_mode"),Ss=Symbol.for("react.profiler"),mc=Symbol.for("react.provider"),yc=Symbol.for("react.context"),zo=Symbol.for("react.forward_ref"),_s=Symbol.for("react.suspense"),ws=Symbol.for("react.suspense_list"),No=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),xc=Symbol.for("react.offscreen"),Ra=Symbol.iterator;function wr(e){return e===null||typeof e!="object"?null:(e=Ra&&e[Ra]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,Vi;function Lr(e){if(Vi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vi=t&&t[1]||""}return`
`+Vi+e}var Hi=!1;function Gi(e,t){if(!e||Hi)return"";Hi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var l=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){l=c}e.call(t.prototype)}else{try{throw Error()}catch(c){l=c}e()}}catch(c){if(c&&l&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=l.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=a);break}}}finally{Hi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lr(e):""}function fp(e){switch(e.tag){case 5:return Lr(e.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 2:case 15:return e=Gi(e.type,!1),e;case 11:return e=Gi(e.type.render,!1),e;case 1:return e=Gi(e.type,!0),e;default:return""}}function ks(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gn:return"Fragment";case Hn:return"Portal";case Ss:return"Profiler";case Po:return"StrictMode";case _s:return"Suspense";case ws:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yc:return(e.displayName||"Context")+".Consumer";case mc:return(e._context.displayName||"Context")+".Provider";case zo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case No:return t=e.displayName||null,t!==null?t:ks(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return ks(e(t))}catch{}}return null}function pp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ks(t);case 8:return t===Po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hp(e){var t=vc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){l=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(o){l=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){e._valueTracker||(e._valueTracker=hp(e))}function jc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=vc(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Jl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bs(e,t){var n=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ta(e,t){var n=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;n=fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:l,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sc(e,t){t=t.checked,t!=null&&To(e,"checked",t,!1)}function Cs(e,t){Sc(e,t);var n=fn(t.value),l=t.type;if(n!=null)l==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Es(e,t.type,n):t.hasOwnProperty("defaultValue")&&Es(e,t.type,fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pa(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Es(e,t,n){(t!=="number"||Jl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dr=Array.isArray;function rr(e,t,n,l){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&l&&(e[n].defaultSelected=!0)}else{for(n=""+fn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,l&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Rs(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function za(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(Dr(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fn(n)}}function _c(e,t){var n=fn(t.value),l=fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),l!=null&&(e.defaultValue=""+l)}function Na(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ts(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _l,kc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,l,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,l,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gp=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(e){gp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ar[t]=Ar[e]})});function bc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ar.hasOwnProperty(e)&&Ar[e]?(""+t).trim():t+"px"}function Cc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var l=n.indexOf("--")===0,i=bc(n,t[n],l);n==="float"&&(n="cssFloat"),l?e.setProperty(n,i):e[n]=i}}var mp=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ps(e,t){if(t){if(mp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function zs(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ns=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,lr=null,ir=null;function La(e){if(e=yl(e)){if(typeof Ls!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Ci(t),Ls(e.stateNode,e.type,t))}}function Ec(e){lr?ir?ir.push(e):ir=[e]:lr=e}function Rc(){if(lr){var e=lr,t=ir;if(ir=lr=null,La(e),t)for(e=0;e<t.length;e++)La(t[e])}}function Tc(e,t){return e(t)}function Pc(){}var Ki=!1;function zc(e,t,n){if(Ki)return e(t,n);Ki=!0;try{return Tc(e,t,n)}finally{Ki=!1,(lr!==null||ir!==null)&&(Pc(),Rc())}}function Jr(e,t){var n=e.stateNode;if(n===null)return null;var l=Ci(n);if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Ds=!1;if(Ft)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Ds=!1}function yp(e,t,n,l,i,s,o,a,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(x){this.onError(x)}}var $r=!1,ql=null,Xl=!1,Is=null,xp={onError:function(e){$r=!0,ql=e}};function vp(e,t,n,l,i,s,o,a,d){$r=!1,ql=null,yp.apply(xp,arguments)}function jp(e,t,n,l,i,s,o,a,d){if(vp.apply(this,arguments),$r){if($r){var c=ql;$r=!1,ql=null}else throw Error(A(198));Xl||(Xl=!0,Is=c)}}function Fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Nc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Da(e){if(Fn(e)!==e)throw Error(A(188))}function Sp(e){var t=e.alternate;if(!t){if(t=Fn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,l=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(l=i.return,l!==null){n=l;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Da(i),e;if(s===l)return Da(i),t;s=s.sibling}throw Error(A(188))}if(n.return!==l.return)n=i,l=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,l=s;break}if(a===l){o=!0,l=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,l=i;break}if(a===l){o=!0,l=s,n=i;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==l)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Lc(e){return e=Sp(e),e!==null?Dc(e):null}function Dc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dc(e);if(t!==null)return t;e=e.sibling}return null}var Ic=nt.unstable_scheduleCallback,Ia=nt.unstable_cancelCallback,_p=nt.unstable_shouldYield,wp=nt.unstable_requestPaint,_e=nt.unstable_now,kp=nt.unstable_getCurrentPriorityLevel,Do=nt.unstable_ImmediatePriority,Bc=nt.unstable_UserBlockingPriority,Zl=nt.unstable_NormalPriority,bp=nt.unstable_LowPriority,Fc=nt.unstable_IdlePriority,_i=null,Ct=null;function Cp(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(_i,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Tp,Ep=Math.log,Rp=Math.LN2;function Tp(e){return e>>>=0,e===0?32:31-(Ep(e)/Rp|0)|0}var wl=64,kl=4194304;function Ir(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ei(e,t){var n=e.pendingLanes;if(n===0)return 0;var l=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?l=Ir(a):(s&=o,s!==0&&(l=Ir(s)))}else o=n&~i,o!==0?l=Ir(o):s!==0&&(l=Ir(s));if(l===0)return 0;if(t!==0&&t!==l&&!(t&i)&&(i=l&-l,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(l&4&&(l|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)n=31-vt(t),i=1<<n,l|=e[n],t&=~i;return l}function Pp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-vt(s),a=1<<o,d=i[o];d===-1?(!(a&n)||a&l)&&(i[o]=Pp(a,t)):d<=t&&(e.expiredLanes|=a),s&=~a}}function Bs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ac(){var e=wl;return wl<<=1,!(wl&4194240)&&(wl=64),e}function Qi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=n}function Np(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vt(n),s=1<<i;t[i]=0,l[i]=-1,e[i]=-1,n&=~s}}function Io(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-vt(n),i=1<<l;i&t|e[l]&t&&(e[l]|=t),n&=~i}}var se=0;function $c(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oc,Bo,Mc,Wc,Uc,Fs=!1,bl=[],tn=null,nn=null,rn=null,qr=new Map,Xr=new Map,Jt=[],Lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ba(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":qr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(t.pointerId)}}function br(e,t,n,l,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[i]},t!==null&&(t=yl(t),t!==null&&Bo(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Dp(e,t,n,l,i){switch(t){case"focusin":return tn=br(tn,e,t,n,l,i),!0;case"dragenter":return nn=br(nn,e,t,n,l,i),!0;case"mouseover":return rn=br(rn,e,t,n,l,i),!0;case"pointerover":var s=i.pointerId;return qr.set(s,br(qr.get(s)||null,e,t,n,l,i)),!0;case"gotpointercapture":return s=i.pointerId,Xr.set(s,br(Xr.get(s)||null,e,t,n,l,i)),!0}return!1}function Vc(e){var t=Cn(e.target);if(t!==null){var n=Fn(t);if(n!==null){if(t=n.tag,t===13){if(t=Nc(n),t!==null){e.blockedOn=t,Uc(e.priority,function(){Mc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=As(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Ns=l,n.target.dispatchEvent(l),Ns=null}else return t=yl(n),t!==null&&Bo(t),e.blockedOn=n,!1;t.shift()}return!0}function Fa(e,t,n){$l(e)&&n.delete(t)}function Ip(){Fs=!1,tn!==null&&$l(tn)&&(tn=null),nn!==null&&$l(nn)&&(nn=null),rn!==null&&$l(rn)&&(rn=null),qr.forEach(Fa),Xr.forEach(Fa)}function Cr(e,t){e.blockedOn===t&&(e.blockedOn=null,Fs||(Fs=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Ip)))}function Zr(e){function t(i){return Cr(i,e)}if(0<bl.length){Cr(bl[0],e);for(var n=1;n<bl.length;n++){var l=bl[n];l.blockedOn===e&&(l.blockedOn=null)}}for(tn!==null&&Cr(tn,e),nn!==null&&Cr(nn,e),rn!==null&&Cr(rn,e),qr.forEach(t),Xr.forEach(t),n=0;n<Jt.length;n++)l=Jt[n],l.blockedOn===e&&(l.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)Vc(n),n.blockedOn===null&&Jt.shift()}var sr=Mt.ReactCurrentBatchConfig,ti=!0;function Bp(e,t,n,l){var i=se,s=sr.transition;sr.transition=null;try{se=1,Fo(e,t,n,l)}finally{se=i,sr.transition=s}}function Fp(e,t,n,l){var i=se,s=sr.transition;sr.transition=null;try{se=4,Fo(e,t,n,l)}finally{se=i,sr.transition=s}}function Fo(e,t,n,l){if(ti){var i=As(e,t,n,l);if(i===null)ls(e,t,l,ni,n),Ba(e,l);else if(Dp(i,e,t,n,l))l.stopPropagation();else if(Ba(e,l),t&4&&-1<Lp.indexOf(e)){for(;i!==null;){var s=yl(i);if(s!==null&&Oc(s),s=As(e,t,n,l),s===null&&ls(e,t,l,ni,n),s===i)break;i=s}i!==null&&l.stopPropagation()}else ls(e,t,l,null,n)}}var ni=null;function As(e,t,n,l){if(ni=null,e=Lo(l),e=Cn(e),e!==null)if(t=Fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Nc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ni=e,null}function Hc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kp()){case Do:return 1;case Bc:return 4;case Zl:case bp:return 16;case Fc:return 536870912;default:return 16}default:return 16}}var Xt=null,Ao=null,Ol=null;function Gc(){if(Ol)return Ol;var e,t=Ao,n=t.length,l,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(l=1;l<=o&&t[n-l]===i[s-l];l++);return Ol=i.slice(e,1<l?1-l:void 0)}function Ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function Aa(){return!1}function lt(e){function t(n,l,i,s,o){this._reactName=n,this._targetInst=i,this.type=l,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cl:Aa,this.isPropagationStopped=Aa,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=lt(yr),ml=xe({},yr,{view:0,detail:0}),Ap=lt(ml),Yi,Ji,Er,wi=xe({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?(Yi=e.screenX-Er.screenX,Ji=e.screenY-Er.screenY):Ji=Yi=0,Er=e),Yi)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),$a=lt(wi),$p=xe({},wi,{dataTransfer:0}),Op=lt($p),Mp=xe({},ml,{relatedTarget:0}),qi=lt(Mp),Wp=xe({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Up=lt(Wp),Vp=xe({},yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hp=lt(Vp),Gp=xe({},yr,{data:0}),Oa=lt(Gp),Kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yp[e])?!!t[e]:!1}function Oo(){return Jp}var qp=xe({},ml,{key:function(e){if(e.key){var t=Kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xp=lt(qp),Zp=xe({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=lt(Zp),eh=xe({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),th=lt(eh),nh=xe({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rh=lt(nh),lh=xe({},wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ih=lt(lh),sh=[9,13,27,32],Mo=Ft&&"CompositionEvent"in window,Or=null;Ft&&"documentMode"in document&&(Or=document.documentMode);var oh=Ft&&"TextEvent"in window&&!Or,Kc=Ft&&(!Mo||Or&&8<Or&&11>=Or),Wa=" ",Ua=!1;function Qc(e,t){switch(e){case"keyup":return sh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function ah(e,t){switch(e){case"compositionend":return Yc(t);case"keypress":return t.which!==32?null:(Ua=!0,Wa);case"textInput":return e=t.data,e===Wa&&Ua?null:e;default:return null}}function dh(e,t){if(Kn)return e==="compositionend"||!Mo&&Qc(e,t)?(e=Gc(),Ol=Ao=Xt=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kc&&t.locale!=="ko"?null:t.data;default:return null}}var ch={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ch[e.type]:t==="textarea"}function Jc(e,t,n,l){Ec(l),t=ri(t,"onChange"),0<t.length&&(n=new $o("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Mr=null,el=null;function uh(e){ou(e,0)}function ki(e){var t=Jn(e);if(jc(t))return e}function fh(e,t){if(e==="change")return t}var qc=!1;if(Ft){var Xi;if(Ft){var Zi="oninput"in document;if(!Zi){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),Zi=typeof Ha.oninput=="function"}Xi=Zi}else Xi=!1;qc=Xi&&(!document.documentMode||9<document.documentMode)}function Ga(){Mr&&(Mr.detachEvent("onpropertychange",Xc),el=Mr=null)}function Xc(e){if(e.propertyName==="value"&&ki(el)){var t=[];Jc(t,el,e,Lo(e)),zc(uh,t)}}function ph(e,t,n){e==="focusin"?(Ga(),Mr=t,el=n,Mr.attachEvent("onpropertychange",Xc)):e==="focusout"&&Ga()}function hh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ki(el)}function gh(e,t){if(e==="click")return ki(t)}function mh(e,t){if(e==="input"||e==="change")return ki(t)}function yh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:yh;function tl(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var i=n[l];if(!js.call(t,i)||!St(e[i],t[i]))return!1}return!0}function Ka(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qa(e,t){var n=Ka(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ka(n)}}function Zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eu(){for(var e=window,t=Jl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Jl(e.document)}return t}function Wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xh(e){var t=eu(),n=e.focusedElem,l=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zc(n.ownerDocument.documentElement,n)){if(l!==null&&Wo(n)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(l.start,i);l=l.end===void 0?s:Math.min(l.end,i),!e.extend&&s>l&&(i=l,l=s,s=i),i=Qa(n,s);var o=Qa(n,l);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>l?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vh=Ft&&"documentMode"in document&&11>=document.documentMode,Qn=null,$s=null,Wr=null,Os=!1;function Ya(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Os||Qn==null||Qn!==Jl(l)||(l=Qn,"selectionStart"in l&&Wo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wr&&tl(Wr,l)||(Wr=l,l=ri($s,"onSelect"),0<l.length&&(t=new $o("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Qn)))}function El(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yn={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},es={},tu={};Ft&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function bi(e){if(es[e])return es[e];if(!Yn[e])return e;var t=Yn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tu)return es[e]=t[n];return e}var nu=bi("animationend"),ru=bi("animationiteration"),lu=bi("animationstart"),iu=bi("transitionend"),su=new Map,Ja="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){su.set(e,t),Bn(t,[e])}for(var ts=0;ts<Ja.length;ts++){var ns=Ja[ts],jh=ns.toLowerCase(),Sh=ns[0].toUpperCase()+ns.slice(1);hn(jh,"on"+Sh)}hn(nu,"onAnimationEnd");hn(ru,"onAnimationIteration");hn(lu,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(iu,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_h=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function qa(e,t,n){var l=e.type||"unknown-event";e.currentTarget=n,jp(l,t,void 0,e),e.currentTarget=null}function ou(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],i=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var o=l.length-1;0<=o;o--){var a=l[o],d=a.instance,c=a.currentTarget;if(a=a.listener,d!==s&&i.isPropagationStopped())break e;qa(i,a,c),s=d}else for(o=0;o<l.length;o++){if(a=l[o],d=a.instance,c=a.currentTarget,a=a.listener,d!==s&&i.isPropagationStopped())break e;qa(i,a,c),s=d}}}if(Xl)throw e=Is,Xl=!1,Is=null,e}function ue(e,t){var n=t[Hs];n===void 0&&(n=t[Hs]=new Set);var l=e+"__bubble";n.has(l)||(au(t,e,2,!1),n.add(l))}function rs(e,t,n){var l=0;t&&(l|=4),au(n,e,l,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function nl(e){if(!e[Rl]){e[Rl]=!0,gc.forEach(function(n){n!=="selectionchange"&&(_h.has(n)||rs(n,!1,e),rs(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,rs("selectionchange",!1,t))}}function au(e,t,n,l){switch(Hc(t)){case 1:var i=Bp;break;case 4:i=Fp;break;default:i=Fo}n=i.bind(null,t,n,e),i=void 0,!Ds||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),l?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ls(e,t,n,l,i){var s=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var o=l.tag;if(o===3||o===4){var a=l.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=l.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cn(a),o===null)return;if(d=o.tag,d===5||d===6){l=s=o;continue e}a=a.parentNode}}l=l.return}zc(function(){var c=s,x=Lo(n),h=[];e:{var y=su.get(e);if(y!==void 0){var j=$o,S=e;switch(e){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":j=Xp;break;case"focusin":S="focus",j=qi;break;case"focusout":S="blur",j=qi;break;case"beforeblur":case"afterblur":j=qi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=$a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=th;break;case nu:case ru:case lu:j=Up;break;case iu:j=rh;break;case"scroll":j=Ap;break;case"wheel":j=ih;break;case"copy":case"cut":case"paste":j=Hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Ma}var _=(t&4)!==0,w=!_&&e==="scroll",f=_?y!==null?y+"Capture":null:y;_=[];for(var m=c,p;m!==null;){p=m;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,f!==null&&(v=Jr(m,f),v!=null&&_.push(rl(m,v,p)))),w)break;m=m.return}0<_.length&&(y=new j(y,S,null,n,x),h.push({event:y,listeners:_}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",y&&n!==Ns&&(S=n.relatedTarget||n.fromElement)&&(Cn(S)||S[At]))break e;if((j||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,j?(S=n.relatedTarget||n.toElement,j=c,S=S?Cn(S):null,S!==null&&(w=Fn(S),S!==w||S.tag!==5&&S.tag!==6)&&(S=null)):(j=null,S=c),j!==S)){if(_=$a,v="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(_=Ma,v="onPointerLeave",f="onPointerEnter",m="pointer"),w=j==null?y:Jn(j),p=S==null?y:Jn(S),y=new _(v,m+"leave",j,n,x),y.target=w,y.relatedTarget=p,v=null,Cn(x)===c&&(_=new _(f,m+"enter",S,n,x),_.target=p,_.relatedTarget=w,v=_),w=v,j&&S)t:{for(_=j,f=S,m=0,p=_;p;p=Mn(p))m++;for(p=0,v=f;v;v=Mn(v))p++;for(;0<m-p;)_=Mn(_),m--;for(;0<p-m;)f=Mn(f),p--;for(;m--;){if(_===f||f!==null&&_===f.alternate)break t;_=Mn(_),f=Mn(f)}_=null}else _=null;j!==null&&Xa(h,y,j,_,!1),S!==null&&w!==null&&Xa(h,w,S,_,!0)}}e:{if(y=c?Jn(c):window,j=y.nodeName&&y.nodeName.toLowerCase(),j==="select"||j==="input"&&y.type==="file")var b=fh;else if(Va(y))if(qc)b=mh;else{b=hh;var E=ph}else(j=y.nodeName)&&j.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(b=gh);if(b&&(b=b(e,c))){Jc(h,b,n,x);break e}E&&E(e,y,c),e==="focusout"&&(E=y._wrapperState)&&E.controlled&&y.type==="number"&&Es(y,"number",y.value)}switch(E=c?Jn(c):window,e){case"focusin":(Va(E)||E.contentEditable==="true")&&(Qn=E,$s=c,Wr=null);break;case"focusout":Wr=$s=Qn=null;break;case"mousedown":Os=!0;break;case"contextmenu":case"mouseup":case"dragend":Os=!1,Ya(h,n,x);break;case"selectionchange":if(vh)break;case"keydown":case"keyup":Ya(h,n,x)}var z;if(Mo)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?Qc(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Kc&&n.locale!=="ko"&&(Kn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Kn&&(z=Gc()):(Xt=x,Ao="value"in Xt?Xt.value:Xt.textContent,Kn=!0)),E=ri(c,k),0<E.length&&(k=new Oa(k,e,null,n,x),h.push({event:k,listeners:E}),z?k.data=z:(z=Yc(n),z!==null&&(k.data=z)))),(z=oh?ah(e,n):dh(e,n))&&(c=ri(c,"onBeforeInput"),0<c.length&&(x=new Oa("onBeforeInput","beforeinput",null,n,x),h.push({event:x,listeners:c}),x.data=z))}ou(h,t)})}function rl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ri(e,t){for(var n=t+"Capture",l=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jr(e,n),s!=null&&l.unshift(rl(e,s,i)),s=Jr(e,t),s!=null&&l.push(rl(e,s,i))),e=e.return}return l}function Mn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xa(e,t,n,l,i){for(var s=t._reactName,o=[];n!==null&&n!==l;){var a=n,d=a.alternate,c=a.stateNode;if(d!==null&&d===l)break;a.tag===5&&c!==null&&(a=c,i?(d=Jr(n,s),d!=null&&o.unshift(rl(n,d,a))):i||(d=Jr(n,s),d!=null&&o.push(rl(n,d,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var wh=/\r\n?/g,kh=/\u0000|\uFFFD/g;function Za(e){return(typeof e=="string"?e:""+e).replace(wh,`
`).replace(kh,"")}function Tl(e,t,n){if(t=Za(t),Za(e)!==t&&n)throw Error(A(425))}function li(){}var Ms=null,Ws=null;function Us(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vs=typeof setTimeout=="function"?setTimeout:void 0,bh=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,Ch=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(e){return ed.resolve(null).then(e).catch(Eh)}:Vs;function Eh(e){setTimeout(function(){throw e})}function is(e,t){var n=t,l=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(l===0){e.removeChild(i),Zr(t);return}l--}else n!=="$"&&n!=="$?"&&n!=="$!"||l++;n=i}while(n);Zr(t)}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function td(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xr=Math.random().toString(36).slice(2),bt="__reactFiber$"+xr,ll="__reactProps$"+xr,At="__reactContainer$"+xr,Hs="__reactEvents$"+xr,Rh="__reactListeners$"+xr,Th="__reactHandles$"+xr;function Cn(e){var t=e[bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[At]||n[bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=td(e);e!==null;){if(n=e[bt])return n;e=td(e)}return t}e=n,n=e.parentNode}return null}function yl(e){return e=e[bt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Ci(e){return e[ll]||null}var Gs=[],qn=-1;function gn(e){return{current:e}}function pe(e){0>qn||(e.current=Gs[qn],Gs[qn]=null,qn--)}function de(e,t){qn++,Gs[qn]=e.current,e.current=t}var pn={},Fe=gn(pn),Qe=gn(!1),zn=pn;function cr(e,t){var n=e.type.contextTypes;if(!n)return pn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ye(e){return e=e.childContextTypes,e!=null}function ii(){pe(Qe),pe(Fe)}function nd(e,t,n){if(Fe.current!==pn)throw Error(A(168));de(Fe,t),de(Qe,n)}function du(e,t,n){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return n;l=l.getChildContext();for(var i in l)if(!(i in t))throw Error(A(108,pp(e)||"Unknown",i));return xe({},n,l)}function si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,zn=Fe.current,de(Fe,e),de(Qe,Qe.current),!0}function rd(e,t,n){var l=e.stateNode;if(!l)throw Error(A(169));n?(e=du(e,t,zn),l.__reactInternalMemoizedMergedChildContext=e,pe(Qe),pe(Fe),de(Fe,e)):pe(Qe),de(Qe,n)}var Lt=null,Ei=!1,ss=!1;function cu(e){Lt===null?Lt=[e]:Lt.push(e)}function Ph(e){Ei=!0,cu(e)}function mn(){if(!ss&&Lt!==null){ss=!0;var e=0,t=se;try{var n=Lt;for(se=1;e<n.length;e++){var l=n[e];do l=l(!0);while(l!==null)}Lt=null,Ei=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(e+1)),Ic(Do,mn),i}finally{se=t,ss=!1}}return null}var Xn=[],Zn=0,oi=null,ai=0,at=[],dt=0,Nn=null,Dt=1,It="";function kn(e,t){Xn[Zn++]=ai,Xn[Zn++]=oi,oi=e,ai=t}function uu(e,t,n){at[dt++]=Dt,at[dt++]=It,at[dt++]=Nn,Nn=e;var l=Dt;e=It;var i=32-vt(l)-1;l&=~(1<<i),n+=1;var s=32-vt(t)+i;if(30<s){var o=i-i%5;s=(l&(1<<o)-1).toString(32),l>>=o,i-=o,Dt=1<<32-vt(t)+i|n<<i|l,It=s+e}else Dt=1<<s|n<<i|l,It=e}function Uo(e){e.return!==null&&(kn(e,1),uu(e,1,0))}function Vo(e){for(;e===oi;)oi=Xn[--Zn],Xn[Zn]=null,ai=Xn[--Zn],Xn[Zn]=null;for(;e===Nn;)Nn=at[--dt],at[dt]=null,It=at[--dt],at[dt]=null,Dt=at[--dt],at[dt]=null}var tt=null,et=null,ge=!1,xt=null;function fu(e,t){var n=ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ld(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,et=ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Nn!==null?{id:Dt,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,et=null,!0):!1;default:return!1}}function Ks(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qs(e){if(ge){var t=et;if(t){var n=t;if(!ld(e,t)){if(Ks(e))throw Error(A(418));t=ln(n.nextSibling);var l=tt;t&&ld(e,t)?fu(l,n):(e.flags=e.flags&-4097|2,ge=!1,tt=e)}}else{if(Ks(e))throw Error(A(418));e.flags=e.flags&-4097|2,ge=!1,tt=e}}}function id(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Pl(e){if(e!==tt)return!1;if(!ge)return id(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Us(e.type,e.memoizedProps)),t&&(t=et)){if(Ks(e))throw pu(),Error(A(418));for(;t;)fu(e,t),t=ln(t.nextSibling)}if(id(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){et=ln(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}et=null}}else et=tt?ln(e.stateNode.nextSibling):null;return!0}function pu(){for(var e=et;e;)e=ln(e.nextSibling)}function ur(){et=tt=null,ge=!1}function Ho(e){xt===null?xt=[e]:xt.push(e)}var zh=Mt.ReactCurrentBatchConfig;function Rr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var l=n.stateNode}if(!l)throw Error(A(147,e));var i=l,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function zl(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sd(e){var t=e._init;return t(e._payload)}function hu(e){function t(f,m){if(e){var p=f.deletions;p===null?(f.deletions=[m],f.flags|=16):p.push(m)}}function n(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function l(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function i(f,m){return f=dn(f,m),f.index=0,f.sibling=null,f}function s(f,m,p){return f.index=p,e?(p=f.alternate,p!==null?(p=p.index,p<m?(f.flags|=2,m):p):(f.flags|=2,m)):(f.flags|=1048576,m)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,m,p,v){return m===null||m.tag!==6?(m=ps(p,f.mode,v),m.return=f,m):(m=i(m,p),m.return=f,m)}function d(f,m,p,v){var b=p.type;return b===Gn?x(f,m,p.props.children,v,p.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qt&&sd(b)===m.type)?(v=i(m,p.props),v.ref=Rr(f,m,p),v.return=f,v):(v=Ql(p.type,p.key,p.props,null,f.mode,v),v.ref=Rr(f,m,p),v.return=f,v)}function c(f,m,p,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=hs(p,f.mode,v),m.return=f,m):(m=i(m,p.children||[]),m.return=f,m)}function x(f,m,p,v,b){return m===null||m.tag!==7?(m=Pn(p,f.mode,v,b),m.return=f,m):(m=i(m,p),m.return=f,m)}function h(f,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ps(""+m,f.mode,p),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jl:return p=Ql(m.type,m.key,m.props,null,f.mode,p),p.ref=Rr(f,null,m),p.return=f,p;case Hn:return m=hs(m,f.mode,p),m.return=f,m;case Qt:var v=m._init;return h(f,v(m._payload),p)}if(Dr(m)||wr(m))return m=Pn(m,f.mode,p,null),m.return=f,m;zl(f,m)}return null}function y(f,m,p,v){var b=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:a(f,m,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case jl:return p.key===b?d(f,m,p,v):null;case Hn:return p.key===b?c(f,m,p,v):null;case Qt:return b=p._init,y(f,m,b(p._payload),v)}if(Dr(p)||wr(p))return b!==null?null:x(f,m,p,v,null);zl(f,p)}return null}function j(f,m,p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(p)||null,a(m,f,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jl:return f=f.get(v.key===null?p:v.key)||null,d(m,f,v,b);case Hn:return f=f.get(v.key===null?p:v.key)||null,c(m,f,v,b);case Qt:var E=v._init;return j(f,m,p,E(v._payload),b)}if(Dr(v)||wr(v))return f=f.get(p)||null,x(m,f,v,b,null);zl(m,v)}return null}function S(f,m,p,v){for(var b=null,E=null,z=m,k=m=0,F=null;z!==null&&k<p.length;k++){z.index>k?(F=z,z=null):F=z.sibling;var T=y(f,z,p[k],v);if(T===null){z===null&&(z=F);break}e&&z&&T.alternate===null&&t(f,z),m=s(T,m,k),E===null?b=T:E.sibling=T,E=T,z=F}if(k===p.length)return n(f,z),ge&&kn(f,k),b;if(z===null){for(;k<p.length;k++)z=h(f,p[k],v),z!==null&&(m=s(z,m,k),E===null?b=z:E.sibling=z,E=z);return ge&&kn(f,k),b}for(z=l(f,z);k<p.length;k++)F=j(z,f,k,p[k],v),F!==null&&(e&&F.alternate!==null&&z.delete(F.key===null?k:F.key),m=s(F,m,k),E===null?b=F:E.sibling=F,E=F);return e&&z.forEach(function($){return t(f,$)}),ge&&kn(f,k),b}function _(f,m,p,v){var b=wr(p);if(typeof b!="function")throw Error(A(150));if(p=b.call(p),p==null)throw Error(A(151));for(var E=b=null,z=m,k=m=0,F=null,T=p.next();z!==null&&!T.done;k++,T=p.next()){z.index>k?(F=z,z=null):F=z.sibling;var $=y(f,z,T.value,v);if($===null){z===null&&(z=F);break}e&&z&&$.alternate===null&&t(f,z),m=s($,m,k),E===null?b=$:E.sibling=$,E=$,z=F}if(T.done)return n(f,z),ge&&kn(f,k),b;if(z===null){for(;!T.done;k++,T=p.next())T=h(f,T.value,v),T!==null&&(m=s(T,m,k),E===null?b=T:E.sibling=T,E=T);return ge&&kn(f,k),b}for(z=l(f,z);!T.done;k++,T=p.next())T=j(z,f,k,T.value,v),T!==null&&(e&&T.alternate!==null&&z.delete(T.key===null?k:T.key),m=s(T,m,k),E===null?b=T:E.sibling=T,E=T);return e&&z.forEach(function(J){return t(f,J)}),ge&&kn(f,k),b}function w(f,m,p,v){if(typeof p=="object"&&p!==null&&p.type===Gn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case jl:e:{for(var b=p.key,E=m;E!==null;){if(E.key===b){if(b=p.type,b===Gn){if(E.tag===7){n(f,E.sibling),m=i(E,p.props.children),m.return=f,f=m;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qt&&sd(b)===E.type){n(f,E.sibling),m=i(E,p.props),m.ref=Rr(f,E,p),m.return=f,f=m;break e}n(f,E);break}else t(f,E);E=E.sibling}p.type===Gn?(m=Pn(p.props.children,f.mode,v,p.key),m.return=f,f=m):(v=Ql(p.type,p.key,p.props,null,f.mode,v),v.ref=Rr(f,m,p),v.return=f,f=v)}return o(f);case Hn:e:{for(E=p.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(f,m.sibling),m=i(m,p.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else t(f,m);m=m.sibling}m=hs(p,f.mode,v),m.return=f,f=m}return o(f);case Qt:return E=p._init,w(f,m,E(p._payload),v)}if(Dr(p))return S(f,m,p,v);if(wr(p))return _(f,m,p,v);zl(f,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(f,m.sibling),m=i(m,p),m.return=f,f=m):(n(f,m),m=ps(p,f.mode,v),m.return=f,f=m),o(f)):n(f,m)}return w}var fr=hu(!0),gu=hu(!1),di=gn(null),ci=null,er=null,Go=null;function Ko(){Go=er=ci=null}function Qo(e){var t=di.current;pe(di),e._currentValue=t}function Ys(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function or(e,t){ci=e,Go=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ke=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(ci===null)throw Error(A(308));er=e,ci.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var En=null;function Yo(e){En===null?En=[e]:En.push(e)}function mu(e,t,n,l){var i=t.interleaved;return i===null?(n.next=n,Yo(t)):(n.next=i.next,i.next=n),t.interleaved=n,$t(e,l)}function $t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yt=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,le&2){var i=l.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),l.pending=t,$t(e,n)}return i=l.interleaved,i===null?(t.next=t,Yo(l)):(t.next=i.next,i.next=t),l.interleaved=t,$t(e,n)}function Wl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Io(e,n)}}function od(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:l.shared,effects:l.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,l){var i=e.updateQueue;Yt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var d=a,c=d.next;d.next=null,o===null?s=c:o.next=c,o=d;var x=e.alternate;x!==null&&(x=x.updateQueue,a=x.lastBaseUpdate,a!==o&&(a===null?x.firstBaseUpdate=c:a.next=c,x.lastBaseUpdate=d))}if(s!==null){var h=i.baseState;o=0,x=c=d=null,a=s;do{var y=a.lane,j=a.eventTime;if((l&y)===y){x!==null&&(x=x.next={eventTime:j,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=e,_=a;switch(y=t,j=n,_.tag){case 1:if(S=_.payload,typeof S=="function"){h=S.call(j,h,y);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=_.payload,y=typeof S=="function"?S.call(j,h,y):S,y==null)break e;h=xe({},h,y);break e;case 2:Yt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else j={eventTime:j,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},x===null?(c=x=j,d=h):x=x.next=j,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(x===null&&(d=h),i.baseState=d,i.firstBaseUpdate=c,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Dn|=o,e.lanes=o,e.memoizedState=h}}function ad(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],i=l.callback;if(i!==null){if(l.callback=null,l=n,typeof i!="function")throw Error(A(191,i));i.call(l)}}}var xl={},Et=gn(xl),il=gn(xl),sl=gn(xl);function Rn(e){if(e===xl)throw Error(A(174));return e}function qo(e,t){switch(de(sl,t),de(il,e),de(Et,xl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ts(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ts(t,e)}pe(Et),de(Et,t)}function pr(){pe(Et),pe(il),pe(sl)}function xu(e){Rn(sl.current);var t=Rn(Et.current),n=Ts(t,e.type);t!==n&&(de(il,e),de(Et,n))}function Xo(e){il.current===e&&(pe(Et),pe(il))}var me=gn(0);function fi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var os=[];function Zo(){for(var e=0;e<os.length;e++)os[e]._workInProgressVersionPrimary=null;os.length=0}var Ul=Mt.ReactCurrentDispatcher,as=Mt.ReactCurrentBatchConfig,Ln=0,ye=null,be=null,Re=null,pi=!1,Ur=!1,ol=0,Nh=0;function De(){throw Error(A(321))}function ea(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!St(e[n],t[n]))return!1;return!0}function ta(e,t,n,l,i,s){if(Ln=s,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ul.current=e===null||e.memoizedState===null?Bh:Fh,e=n(l,i),Ur){s=0;do{if(Ur=!1,ol=0,25<=s)throw Error(A(301));s+=1,Re=be=null,t.updateQueue=null,Ul.current=Ah,e=n(l,i)}while(Ur)}if(Ul.current=hi,t=be!==null&&be.next!==null,Ln=0,Re=be=ye=null,pi=!1,t)throw Error(A(300));return e}function na(){var e=ol!==0;return ol=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ye.memoizedState=Re=e:Re=Re.next=e,Re}function pt(){if(be===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Re===null?ye.memoizedState:Re.next;if(t!==null)Re=t,be=e;else{if(e===null)throw Error(A(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Re===null?ye.memoizedState=Re=e:Re=Re.next=e}return Re}function al(e,t){return typeof t=="function"?t(e):t}function ds(e){var t=pt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var l=be,i=l.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}l.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,l=l.baseState;var a=o=null,d=null,c=s;do{var x=c.lane;if((Ln&x)===x)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),l=c.hasEagerState?c.eagerState:e(l,c.action);else{var h={lane:x,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(a=d=h,o=l):d=d.next=h,ye.lanes|=x,Dn|=x}c=c.next}while(c!==null&&c!==s);d===null?o=l:d.next=a,St(l,t.memoizedState)||(Ke=!0),t.memoizedState=l,t.baseState=o,t.baseQueue=d,n.lastRenderedState=l}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ye.lanes|=s,Dn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cs(e){var t=pt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var l=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);St(s,t.memoizedState)||(Ke=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function vu(){}function ju(e,t){var n=ye,l=pt(),i=t(),s=!St(l.memoizedState,i);if(s&&(l.memoizedState=i,Ke=!0),l=l.queue,ra(wu.bind(null,n,l,e),[e]),l.getSnapshot!==t||s||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,dl(9,_u.bind(null,n,l,i,t),void 0,null),Te===null)throw Error(A(349));Ln&30||Su(n,t,i)}return i}function Su(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _u(e,t,n,l){t.value=n,t.getSnapshot=l,ku(t)&&bu(e)}function wu(e,t,n){return n(function(){ku(t)&&bu(e)})}function ku(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!St(e,n)}catch{return!0}}function bu(e){var t=$t(e,1);t!==null&&jt(t,e,1,-1)}function dd(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:e},t.queue=e,e=e.dispatch=Ih.bind(null,ye,e),[t.memoizedState,e]}function dl(e,t,n,l){return e={tag:e,create:t,destroy:n,deps:l,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e)),e}function Cu(){return pt().memoizedState}function Vl(e,t,n,l){var i=kt();ye.flags|=e,i.memoizedState=dl(1|t,n,void 0,l===void 0?null:l)}function Ri(e,t,n,l){var i=pt();l=l===void 0?null:l;var s=void 0;if(be!==null){var o=be.memoizedState;if(s=o.destroy,l!==null&&ea(l,o.deps)){i.memoizedState=dl(t,n,s,l);return}}ye.flags|=e,i.memoizedState=dl(1|t,n,s,l)}function cd(e,t){return Vl(8390656,8,e,t)}function ra(e,t){return Ri(2048,8,e,t)}function Eu(e,t){return Ri(4,2,e,t)}function Ru(e,t){return Ri(4,4,e,t)}function Tu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pu(e,t,n){return n=n!=null?n.concat([e]):null,Ri(4,4,Tu.bind(null,t,e),n)}function la(){}function zu(e,t){var n=pt();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&ea(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Nu(e,t){var n=pt();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&ea(t,l[1])?l[0]:(e=e(),n.memoizedState=[e,t],e)}function Lu(e,t,n){return Ln&21?(St(n,t)||(n=Ac(),ye.lanes|=n,Dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=n)}function Lh(e,t){var n=se;se=n!==0&&4>n?n:4,e(!0);var l=as.transition;as.transition={};try{e(!1),t()}finally{se=n,as.transition=l}}function Du(){return pt().memoizedState}function Dh(e,t,n){var l=an(e);if(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},Iu(e))Bu(t,n);else if(n=mu(e,t,n,l),n!==null){var i=Me();jt(n,e,l,i),Fu(n,t,l)}}function Ih(e,t,n){var l=an(e),i={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iu(e))Bu(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,St(a,o)){var d=t.interleaved;d===null?(i.next=i,Yo(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=mu(e,t,i,l),n!==null&&(i=Me(),jt(n,e,l,i),Fu(n,t,l))}}function Iu(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Bu(e,t){Ur=pi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fu(e,t,n){if(n&4194240){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Io(e,n)}}var hi={readContext:ft,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Bh={readContext:ft,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:cd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vl(4194308,4,Tu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vl(4,2,e,t)},useMemo:function(e,t){var n=kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var l=kt();return t=n!==void 0?n(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Dh.bind(null,ye,e),[l.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:dd,useDebugValue:la,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=dd(!1),t=e[0];return e=Lh.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var l=ye,i=kt();if(ge){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Te===null)throw Error(A(349));Ln&30||Su(l,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,cd(wu.bind(null,l,s,e),[e]),l.flags|=2048,dl(9,_u.bind(null,l,s,n,t),void 0,null),n},useId:function(){var e=kt(),t=Te.identifierPrefix;if(ge){var n=It,l=Dt;n=(l&~(1<<32-vt(l)-1)).toString(32)+n,t=":"+t+"R"+n,n=ol++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Nh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Fh={readContext:ft,useCallback:zu,useContext:ft,useEffect:ra,useImperativeHandle:Pu,useInsertionEffect:Eu,useLayoutEffect:Ru,useMemo:Nu,useReducer:ds,useRef:Cu,useState:function(){return ds(al)},useDebugValue:la,useDeferredValue:function(e){var t=pt();return Lu(t,be.memoizedState,e)},useTransition:function(){var e=ds(al)[0],t=pt().memoizedState;return[e,t]},useMutableSource:vu,useSyncExternalStore:ju,useId:Du,unstable_isNewReconciler:!1},Ah={readContext:ft,useCallback:zu,useContext:ft,useEffect:ra,useImperativeHandle:Pu,useInsertionEffect:Eu,useLayoutEffect:Ru,useMemo:Nu,useReducer:cs,useRef:Cu,useState:function(){return cs(al)},useDebugValue:la,useDeferredValue:function(e){var t=pt();return be===null?t.memoizedState=e:Lu(t,be.memoizedState,e)},useTransition:function(){var e=cs(al)[0],t=pt().memoizedState;return[e,t]},useMutableSource:vu,useSyncExternalStore:ju,useId:Du,unstable_isNewReconciler:!1};function mt(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Js(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ti={isMounted:function(e){return(e=e._reactInternals)?Fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Me(),i=an(e),s=Bt(l,i);s.payload=t,n!=null&&(s.callback=n),t=sn(e,s,i),t!==null&&(jt(t,e,i,l),Wl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Me(),i=an(e),s=Bt(l,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=sn(e,s,i),t!==null&&(jt(t,e,i,l),Wl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Me(),l=an(e),i=Bt(n,l);i.tag=2,t!=null&&(i.callback=t),t=sn(e,i,l),t!==null&&(jt(t,e,l,n),Wl(t,e,l))}};function ud(e,t,n,l,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,o):t.prototype&&t.prototype.isPureReactComponent?!tl(n,l)||!tl(i,s):!0}function Au(e,t,n){var l=!1,i=pn,s=t.contextType;return typeof s=="object"&&s!==null?s=ft(s):(i=Ye(t)?zn:Fe.current,l=t.contextTypes,s=(l=l!=null)?cr(e,i):pn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ti,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function fd(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Ti.enqueueReplaceState(t,t.state,null)}function qs(e,t,n,l){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Jo(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ft(s):(s=Ye(t)?zn:Fe.current,i.context=cr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Js(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ti.enqueueReplaceState(i,i.state,null),ui(e,n,i,l),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function hr(e,t){try{var n="",l=t;do n+=fp(l),l=l.return;while(l);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $h=typeof WeakMap=="function"?WeakMap:Map;function $u(e,t,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var l=t.value;return n.callback=function(){mi||(mi=!0,ao=l),Xs(e,t)},n}function Ou(e,t,n){n=Bt(-1,n),n.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var i=t.value;n.payload=function(){return l(i)},n.callback=function(){Xs(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xs(e,t),typeof l!="function"&&(on===null?on=new Set([this]):on.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function pd(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new $h;var i=new Set;l.set(t,i)}else i=l.get(t),i===void 0&&(i=new Set,l.set(t,i));i.has(n)||(i.add(n),e=Zh.bind(null,e,t,n),t.then(e,e))}function hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gd(e,t,n,l,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bt(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var Oh=Mt.ReactCurrentOwner,Ke=!1;function Oe(e,t,n,l){t.child=e===null?gu(t,null,n,l):fr(t,e.child,n,l)}function md(e,t,n,l,i){n=n.render;var s=t.ref;return or(t,i),l=ta(e,t,n,l,s,i),n=na(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ot(e,t,i)):(ge&&n&&Uo(t),t.flags|=1,Oe(e,t,l,i),t.child)}function yd(e,t,n,l,i){if(e===null){var s=n.type;return typeof s=="function"&&!fa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Mu(e,t,s,l,i)):(e=Ql(n.type,null,l,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(o,l)&&e.ref===t.ref)return Ot(e,t,i)}return t.flags|=1,e=dn(s,l),e.ref=t.ref,e.return=t,t.child=e}function Mu(e,t,n,l,i){if(e!==null){var s=e.memoizedProps;if(tl(s,l)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=l=s,(e.lanes&i)!==0)e.flags&131072&&(Ke=!0);else return t.lanes=e.lanes,Ot(e,t,i)}return Zs(e,t,n,l,i)}function Wu(e,t,n){var l=t.pendingProps,i=l.children,s=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(nr,Ze),Ze|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(nr,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=s!==null?s.baseLanes:n,de(nr,Ze),Ze|=l}else s!==null?(l=s.baseLanes|n,t.memoizedState=null):l=n,de(nr,Ze),Ze|=l;return Oe(e,t,i,n),t.child}function Uu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zs(e,t,n,l,i){var s=Ye(n)?zn:Fe.current;return s=cr(t,s),or(t,i),n=ta(e,t,n,l,s,i),l=na(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ot(e,t,i)):(ge&&l&&Uo(t),t.flags|=1,Oe(e,t,n,i),t.child)}function xd(e,t,n,l,i){if(Ye(n)){var s=!0;si(t)}else s=!1;if(or(t,i),t.stateNode===null)Hl(e,t),Au(t,n,l),qs(t,n,l,i),l=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var d=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ft(c):(c=Ye(n)?zn:Fe.current,c=cr(t,c));var x=n.getDerivedStateFromProps,h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==l||d!==c)&&fd(t,o,l,c),Yt=!1;var y=t.memoizedState;o.state=y,ui(t,l,o,i),d=t.memoizedState,a!==l||y!==d||Qe.current||Yt?(typeof x=="function"&&(Js(t,n,x,l),d=t.memoizedState),(a=Yt||ud(t,n,a,l,y,d,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=d),o.props=l,o.state=d,o.context=c,l=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,yu(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:mt(t.type,a),o.props=c,h=t.pendingProps,y=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=ft(d):(d=Ye(n)?zn:Fe.current,d=cr(t,d));var j=n.getDerivedStateFromProps;(x=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||y!==d)&&fd(t,o,l,d),Yt=!1,y=t.memoizedState,o.state=y,ui(t,l,o,i);var S=t.memoizedState;a!==h||y!==S||Qe.current||Yt?(typeof j=="function"&&(Js(t,n,j,l),S=t.memoizedState),(c=Yt||ud(t,n,c,l,y,S,d)||!1)?(x||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,S,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,S,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=S),o.props=l,o.state=S,o.context=d,l=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),l=!1)}return eo(e,t,n,l,s,i)}function eo(e,t,n,l,i,s){Uu(e,t);var o=(t.flags&128)!==0;if(!l&&!o)return i&&rd(t,n,!1),Ot(e,t,s);l=t.stateNode,Oh.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&o?(t.child=fr(t,e.child,null,s),t.child=fr(t,null,a,s)):Oe(e,t,a,s),t.memoizedState=l.state,i&&rd(t,n,!0),t.child}function Vu(e){var t=e.stateNode;t.pendingContext?nd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nd(e,t.context,!1),qo(e,t.containerInfo)}function vd(e,t,n,l,i){return ur(),Ho(i),t.flags|=256,Oe(e,t,n,l),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hu(e,t,n){var l=t.pendingProps,i=me.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),de(me,i&1),e===null)return Qs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=l.children,e=l.fallback,s?(l=t.mode,s=t.child,o={mode:"hidden",children:o},!(l&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ni(o,l,0,null),e=Pn(e,l,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=no(n),t.memoizedState=to,e):ia(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Mh(e,t,o,l,a,i,n);if(s){s=l.fallback,o=t.mode,i=e.child,a=i.sibling;var d={mode:"hidden",children:l.children};return!(o&1)&&t.child!==i?(l=t.child,l.childLanes=0,l.pendingProps=d,t.deletions=null):(l=dn(i,d),l.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=dn(a,s):(s=Pn(s,o,n,null),s.flags|=2),s.return=t,l.return=t,l.sibling=s,t.child=l,l=s,s=t.child,o=e.child.memoizedState,o=o===null?no(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=to,l}return s=e.child,e=s.sibling,l=dn(s,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=n),l.return=t,l.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=l,t.memoizedState=null,l}function ia(e,t){return t=Ni({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nl(e,t,n,l){return l!==null&&Ho(l),fr(t,e.child,null,n),e=ia(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mh(e,t,n,l,i,s,o){if(n)return t.flags&256?(t.flags&=-257,l=us(Error(A(422))),Nl(e,t,o,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=l.fallback,i=t.mode,l=Ni({mode:"visible",children:l.children},i,0,null),s=Pn(s,i,o,null),s.flags|=2,l.return=t,s.return=t,l.sibling=s,t.child=l,t.mode&1&&fr(t,e.child,null,o),t.child.memoizedState=no(o),t.memoizedState=to,s);if(!(t.mode&1))return Nl(e,t,o,null);if(i.data==="$!"){if(l=i.nextSibling&&i.nextSibling.dataset,l)var a=l.dgst;return l=a,s=Error(A(419)),l=us(s,l,void 0),Nl(e,t,o,l)}if(a=(o&e.childLanes)!==0,Ke||a){if(l=Te,l!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(l.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$t(e,i),jt(l,e,i,-1))}return ua(),l=us(Error(A(421))),Nl(e,t,o,l)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,et=ln(i.nextSibling),tt=t,ge=!0,xt=null,e!==null&&(at[dt++]=Dt,at[dt++]=It,at[dt++]=Nn,Dt=e.id,It=e.overflow,Nn=t),t=ia(t,l.children),t.flags|=4096,t)}function jd(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ys(e.return,t,n)}function fs(e,t,n,l,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=l,s.tail=n,s.tailMode=i)}function Gu(e,t,n){var l=t.pendingProps,i=l.revealOrder,s=l.tail;if(Oe(e,t,l.children,n),l=me.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jd(e,n,t);else if(e.tag===19)jd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(de(me,l),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&fi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),fs(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&fi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}fs(t,!0,n,null,s);break;case"together":fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ot(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Wh(e,t,n){switch(t.tag){case 3:Vu(t),ur();break;case 5:xu(t);break;case 1:Ye(t.type)&&si(t);break;case 4:qo(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,i=t.memoizedProps.value;de(di,l._currentValue),l._currentValue=i;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(de(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Hu(e,t,n):(de(me,me.current&1),e=Ot(e,t,n),e!==null?e.sibling:null);de(me,me.current&1);break;case 19:if(l=(n&t.childLanes)!==0,e.flags&128){if(l)return Gu(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),de(me,me.current),l)break;return null;case 22:case 23:return t.lanes=0,Wu(e,t,n)}return Ot(e,t,n)}var Ku,ro,Qu,Yu;Ku=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ro=function(){};Qu=function(e,t,n,l){var i=e.memoizedProps;if(i!==l){e=t.stateNode,Rn(Et.current);var s=null;switch(n){case"input":i=bs(e,i),l=bs(e,l),s=[];break;case"select":i=xe({},i,{value:void 0}),l=xe({},l,{value:void 0}),s=[];break;case"textarea":i=Rs(e,i),l=Rs(e,l),s=[];break;default:typeof i.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=li)}Ps(n,l);var o;n=null;for(c in i)if(!l.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qr.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in l){var d=l[c];if(a=i!=null?i[c]:void 0,l.hasOwnProperty(c)&&d!==a&&(d!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&a[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(s||(s=[]),s.push(c,n)),n=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,a=a?a.__html:void 0,d!=null&&a!==d&&(s=s||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qr.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&ue("scroll",e),s||a===d||(s=[])):(s=s||[]).push(c,d))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};Yu=function(e,t,n,l){n!==l&&(t.flags|=4)};function Tr(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,l|=i.subtreeFlags&14680064,l|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Uh(e,t,n){var l=t.pendingProps;switch(Vo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Ye(t.type)&&ii(),Ie(t),null;case 3:return l=t.stateNode,pr(),pe(Qe),pe(Fe),Zo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(fo(xt),xt=null))),ro(e,t),Ie(t),null;case 5:Xo(t);var i=Rn(sl.current);if(n=t.type,e!==null&&t.stateNode!=null)Qu(e,t,n,l,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(A(166));return Ie(t),null}if(e=Rn(Et.current),Pl(t)){l=t.stateNode,n=t.type;var s=t.memoizedProps;switch(l[bt]=t,l[ll]=s,e=(t.mode&1)!==0,n){case"dialog":ue("cancel",l),ue("close",l);break;case"iframe":case"object":case"embed":ue("load",l);break;case"video":case"audio":for(i=0;i<Br.length;i++)ue(Br[i],l);break;case"source":ue("error",l);break;case"img":case"image":case"link":ue("error",l),ue("load",l);break;case"details":ue("toggle",l);break;case"input":Ta(l,s),ue("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!s.multiple},ue("invalid",l);break;case"textarea":za(l,s),ue("invalid",l)}Ps(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?l.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tl(l.textContent,a,e),i=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tl(l.textContent,a,e),i=["children",""+a]):Qr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ue("scroll",l)}switch(n){case"input":Sl(l),Pa(l,s,!0);break;case"textarea":Sl(l),Na(l);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(l.onclick=li)}l=i,t.updateQueue=l,l!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=o.createElement(n,{is:l.is}):(e=o.createElement(n),n==="select"&&(o=e,l.multiple?o.multiple=!0:l.size&&(o.size=l.size))):e=o.createElementNS(e,n),e[bt]=t,e[ll]=l,Ku(e,t,!1,!1),t.stateNode=e;e:{switch(o=zs(n,l),n){case"dialog":ue("cancel",e),ue("close",e),i=l;break;case"iframe":case"object":case"embed":ue("load",e),i=l;break;case"video":case"audio":for(i=0;i<Br.length;i++)ue(Br[i],e);i=l;break;case"source":ue("error",e),i=l;break;case"img":case"image":case"link":ue("error",e),ue("load",e),i=l;break;case"details":ue("toggle",e),i=l;break;case"input":Ta(e,l),i=bs(e,l),ue("invalid",e);break;case"option":i=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},i=xe({},l,{value:void 0}),ue("invalid",e);break;case"textarea":za(e,l),i=Rs(e,l),ue("invalid",e);break;default:i=l}Ps(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var d=a[s];s==="style"?Cc(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&kc(e,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Yr(e,d):typeof d=="number"&&Yr(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qr.hasOwnProperty(s)?d!=null&&s==="onScroll"&&ue("scroll",e):d!=null&&To(e,s,d,o))}switch(n){case"input":Sl(e),Pa(e,l,!1);break;case"textarea":Sl(e),Na(e);break;case"option":l.value!=null&&e.setAttribute("value",""+fn(l.value));break;case"select":e.multiple=!!l.multiple,s=l.value,s!=null?rr(e,!!l.multiple,s,!1):l.defaultValue!=null&&rr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=li)}switch(n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)Yu(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(A(166));if(n=Rn(sl.current),Rn(Et.current),Pl(t)){if(l=t.stateNode,n=t.memoizedProps,l[bt]=t,(s=l.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:Tl(l.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(l.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else l=(n.nodeType===9?n:n.ownerDocument).createTextNode(l),l[bt]=t,t.stateNode=l}return Ie(t),null;case 13:if(pe(me),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&et!==null&&t.mode&1&&!(t.flags&128))pu(),ur(),t.flags|=98560,s=!1;else if(s=Pl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!s)throw Error(A(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[bt]=t}else ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),s=!1}else xt!==null&&(fo(xt),xt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):ua())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return pr(),ro(e,t),e===null&&nl(t.stateNode.containerInfo),Ie(t),null;case 10:return Qo(t.type._context),Ie(t),null;case 17:return Ye(t.type)&&ii(),Ie(t),null;case 19:if(pe(me),s=t.memoizedState,s===null)return Ie(t),null;if(l=(t.flags&128)!==0,o=s.rendering,o===null)if(l)Tr(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=fi(e),o!==null){for(t.flags|=128,Tr(s,!1),l=o.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=n,n=t.child;n!==null;)s=n,e=l,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(me,me.current&1|2),t.child}e=e.sibling}s.tail!==null&&_e()>gr&&(t.flags|=128,l=!0,Tr(s,!1),t.lanes=4194304)}else{if(!l)if(e=fi(o),e!==null){if(t.flags|=128,l=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return Ie(t),null}else 2*_e()-s.renderingStartTime>gr&&n!==1073741824&&(t.flags|=128,l=!0,Tr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=_e(),t.sibling=null,n=me.current,de(me,l?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return ca(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Ze&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function Vh(e,t){switch(Vo(t),t.tag){case 1:return Ye(t.type)&&ii(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(),pe(Qe),pe(Fe),Zo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(pe(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(me),null;case 4:return pr(),null;case 10:return Qo(t.type._context),null;case 22:case 23:return ca(),null;case 24:return null;default:return null}}var Ll=!1,Be=!1,Hh=typeof WeakSet=="function"?WeakSet:Set,W=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(l){je(e,t,l)}else n.current=null}function lo(e,t,n){try{n()}catch(l){je(e,t,l)}}var Sd=!1;function Gh(e,t){if(Ms=ti,e=eu(),Wo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var i=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,d=-1,c=0,x=0,h=e,y=null;t:for(;;){for(var j;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||l!==0&&h.nodeType!==3||(d=o+l),h.nodeType===3&&(o+=h.nodeValue.length),(j=h.firstChild)!==null;)y=h,h=j;for(;;){if(h===e)break t;if(y===n&&++c===i&&(a=o),y===s&&++x===l&&(d=o),(j=h.nextSibling)!==null)break;h=y,y=h.parentNode}h=j}n=a===-1||d===-1?null:{start:a,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ws={focusedElem:e,selectionRange:n},ti=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var _=S.memoizedProps,w=S.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?_:mt(t.type,_),w);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(v){je(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return S=Sd,Sd=!1,S}function Vr(e,t,n){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var i=l=l.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&lo(t,n,s)}i=i.next}while(i!==l)}}function Pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var l=n.create;n.destroy=l()}n=n.next}while(n!==t)}}function io(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ju(e){var t=e.alternate;t!==null&&(e.alternate=null,Ju(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[ll],delete t[Hs],delete t[Rh],delete t[Th])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qu(e){return e.tag===5||e.tag===3||e.tag===4}function _d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function so(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=li));else if(l!==4&&(e=e.child,e!==null))for(so(e,t,n),e=e.sibling;e!==null;)so(e,t,n),e=e.sibling}function oo(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(oo(e,t,n),e=e.sibling;e!==null;)oo(e,t,n),e=e.sibling}var ze=null,yt=!1;function Ht(e,t,n){for(n=n.child;n!==null;)Xu(e,t,n),n=n.sibling}function Xu(e,t,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(_i,n)}catch{}switch(n.tag){case 5:Be||tr(n,t);case 6:var l=ze,i=yt;ze=null,Ht(e,t,n),ze=l,yt=i,ze!==null&&(yt?(e=ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(yt?(e=ze,n=n.stateNode,e.nodeType===8?is(e.parentNode,n):e.nodeType===1&&is(e,n),Zr(e)):is(ze,n.stateNode));break;case 4:l=ze,i=yt,ze=n.stateNode.containerInfo,yt=!0,Ht(e,t,n),ze=l,yt=i;break;case 0:case 11:case 14:case 15:if(!Be&&(l=n.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){i=l=l.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lo(n,t,o),i=i.next}while(i!==l)}Ht(e,t,n);break;case 1:if(!Be&&(tr(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(a){je(n,t,a)}Ht(e,t,n);break;case 21:Ht(e,t,n);break;case 22:n.mode&1?(Be=(l=Be)||n.memoizedState!==null,Ht(e,t,n),Be=l):Ht(e,t,n);break;default:Ht(e,t,n)}}function wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Hh),t.forEach(function(l){var i=tg.bind(null,e,l);n.has(l)||(n.add(l),l.then(i,i))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var i=n[l];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ze=a.stateNode,yt=!1;break e;case 3:ze=a.stateNode.containerInfo,yt=!0;break e;case 4:ze=a.stateNode.containerInfo,yt=!0;break e}a=a.return}if(ze===null)throw Error(A(160));Xu(s,o,i),ze=null,yt=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(c){je(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zu(t,e),t=t.sibling}function Zu(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),wt(e),l&4){try{Vr(3,e,e.return),Pi(3,e)}catch(_){je(e,e.return,_)}try{Vr(5,e,e.return)}catch(_){je(e,e.return,_)}}break;case 1:gt(t,e),wt(e),l&512&&n!==null&&tr(n,n.return);break;case 5:if(gt(t,e),wt(e),l&512&&n!==null&&tr(n,n.return),e.flags&32){var i=e.stateNode;try{Yr(i,"")}catch(_){je(e,e.return,_)}}if(l&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Sc(i,s),zs(a,o);var c=zs(a,s);for(o=0;o<d.length;o+=2){var x=d[o],h=d[o+1];x==="style"?Cc(i,h):x==="dangerouslySetInnerHTML"?kc(i,h):x==="children"?Yr(i,h):To(i,x,h,c)}switch(a){case"input":Cs(i,s);break;case"textarea":_c(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var j=s.value;j!=null?rr(i,!!s.multiple,j,!1):y!==!!s.multiple&&(s.defaultValue!=null?rr(i,!!s.multiple,s.defaultValue,!0):rr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ll]=s}catch(_){je(e,e.return,_)}}break;case 6:if(gt(t,e),wt(e),l&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(_){je(e,e.return,_)}}break;case 3:if(gt(t,e),wt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Zr(t.containerInfo)}catch(_){je(e,e.return,_)}break;case 4:gt(t,e),wt(e);break;case 13:gt(t,e),wt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(aa=_e())),l&4&&wd(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(Be=(c=Be)||x,gt(t,e),Be=c):gt(t,e),wt(e),l&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!x&&e.mode&1)for(W=e,x=e.child;x!==null;){for(h=W=x;W!==null;){switch(y=W,j=y.child,y.tag){case 0:case 11:case 14:case 15:Vr(4,y,y.return);break;case 1:tr(y,y.return);var S=y.stateNode;if(typeof S.componentWillUnmount=="function"){l=y,n=y.return;try{t=l,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(_){je(l,n,_)}}break;case 5:tr(y,y.return);break;case 22:if(y.memoizedState!==null){bd(h);continue}}j!==null?(j.return=y,W=j):bd(h)}x=x.sibling}e:for(x=null,h=e;;){if(h.tag===5){if(x===null){x=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,d=h.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,a.style.display=bc("display",o))}catch(_){je(e,e.return,_)}}}else if(h.tag===6){if(x===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){je(e,e.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;x===h&&(x=null),h=h.return}x===h&&(x=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gt(t,e),wt(e),l&4&&wd(e);break;case 21:break;default:gt(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qu(n)){var l=n;break e}n=n.return}throw Error(A(160))}switch(l.tag){case 5:var i=l.stateNode;l.flags&32&&(Yr(i,""),l.flags&=-33);var s=_d(e);oo(e,s,i);break;case 3:case 4:var o=l.stateNode.containerInfo,a=_d(e);so(e,a,o);break;default:throw Error(A(161))}}catch(d){je(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kh(e,t,n){W=e,ef(e)}function ef(e,t,n){for(var l=(e.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&l){var o=i.memoizedState!==null||Ll;if(!o){var a=i.alternate,d=a!==null&&a.memoizedState!==null||Be;a=Ll;var c=Be;if(Ll=o,(Be=d)&&!c)for(W=i;W!==null;)o=W,d=o.child,o.tag===22&&o.memoizedState!==null?Cd(i):d!==null?(d.return=o,W=d):Cd(i);for(;s!==null;)W=s,ef(s),s=s.sibling;W=i,Ll=a,Be=c}kd(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):kd(e)}}function kd(e){for(;W!==null;){var t=W;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||Pi(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Be)if(n===null)l.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mt(t.type,n.memoizedProps);l.componentDidUpdate(i,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ad(t,s,l);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ad(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var x=c.memoizedState;if(x!==null){var h=x.dehydrated;h!==null&&Zr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Be||t.flags&512&&io(t)}catch(y){je(t,t.return,y)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function bd(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function Cd(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pi(4,t)}catch(d){je(t,n,d)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var i=t.return;try{l.componentDidMount()}catch(d){je(t,i,d)}}var s=t.return;try{io(t)}catch(d){je(t,s,d)}break;case 5:var o=t.return;try{io(t)}catch(d){je(t,o,d)}}}catch(d){je(t,t.return,d)}if(t===e){W=null;break}var a=t.sibling;if(a!==null){a.return=t.return,W=a;break}W=t.return}}var Qh=Math.ceil,gi=Mt.ReactCurrentDispatcher,sa=Mt.ReactCurrentOwner,ut=Mt.ReactCurrentBatchConfig,le=0,Te=null,ke=null,Ne=0,Ze=0,nr=gn(0),Ce=0,cl=null,Dn=0,zi=0,oa=0,Hr=null,Ge=null,aa=0,gr=1/0,Nt=null,mi=!1,ao=null,on=null,Dl=!1,Zt=null,yi=0,Gr=0,co=null,Gl=-1,Kl=0;function Me(){return le&6?_e():Gl!==-1?Gl:Gl=_e()}function an(e){return e.mode&1?le&2&&Ne!==0?Ne&-Ne:zh.transition!==null?(Kl===0&&(Kl=Ac()),Kl):(e=se,e!==0||(e=window.event,e=e===void 0?16:Hc(e.type)),e):1}function jt(e,t,n,l){if(50<Gr)throw Gr=0,co=null,Error(A(185));gl(e,n,l),(!(le&2)||e!==Te)&&(e===Te&&(!(le&2)&&(zi|=n),Ce===4&&qt(e,Ne)),Je(e,l),n===1&&le===0&&!(t.mode&1)&&(gr=_e()+500,Ei&&mn()))}function Je(e,t){var n=e.callbackNode;zp(e,t);var l=ei(e,e===Te?Ne:0);if(l===0)n!==null&&Ia(n),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(n!=null&&Ia(n),t===1)e.tag===0?Ph(Ed.bind(null,e)):cu(Ed.bind(null,e)),Ch(function(){!(le&6)&&mn()}),n=null;else{switch($c(l)){case 1:n=Do;break;case 4:n=Bc;break;case 16:n=Zl;break;case 536870912:n=Fc;break;default:n=Zl}n=df(n,tf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tf(e,t){if(Gl=-1,Kl=0,le&6)throw Error(A(327));var n=e.callbackNode;if(ar()&&e.callbackNode!==n)return null;var l=ei(e,e===Te?Ne:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=xi(e,l);else{t=l;var i=le;le|=2;var s=rf();(Te!==e||Ne!==t)&&(Nt=null,gr=_e()+500,Tn(e,t));do try{qh();break}catch(a){nf(e,a)}while(!0);Ko(),gi.current=s,le=i,ke!==null?t=0:(Te=null,Ne=0,t=Ce)}if(t!==0){if(t===2&&(i=Bs(e),i!==0&&(l=i,t=uo(e,i))),t===1)throw n=cl,Tn(e,0),qt(e,l),Je(e,_e()),n;if(t===6)qt(e,l);else{if(i=e.current.alternate,!(l&30)&&!Yh(i)&&(t=xi(e,l),t===2&&(s=Bs(e),s!==0&&(l=s,t=uo(e,s))),t===1))throw n=cl,Tn(e,0),qt(e,l),Je(e,_e()),n;switch(e.finishedWork=i,e.finishedLanes=l,t){case 0:case 1:throw Error(A(345));case 2:bn(e,Ge,Nt);break;case 3:if(qt(e,l),(l&130023424)===l&&(t=aa+500-_e(),10<t)){if(ei(e,0)!==0)break;if(i=e.suspendedLanes,(i&l)!==l){Me(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vs(bn.bind(null,e,Ge,Nt),t);break}bn(e,Ge,Nt);break;case 4:if(qt(e,l),(l&4194240)===l)break;for(t=e.eventTimes,i=-1;0<l;){var o=31-vt(l);s=1<<o,o=t[o],o>i&&(i=o),l&=~s}if(l=i,l=_e()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Qh(l/1960))-l,10<l){e.timeoutHandle=Vs(bn.bind(null,e,Ge,Nt),l);break}bn(e,Ge,Nt);break;case 5:bn(e,Ge,Nt);break;default:throw Error(A(329))}}}return Je(e,_e()),e.callbackNode===n?tf.bind(null,e):null}function uo(e,t){var n=Hr;return e.current.memoizedState.isDehydrated&&(Tn(e,t).flags|=256),e=xi(e,t),e!==2&&(t=Ge,Ge=n,t!==null&&fo(t)),e}function fo(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function Yh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var l=0;l<n.length;l++){var i=n[l],s=i.getSnapshot;i=i.value;try{if(!St(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~oa,t&=~zi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vt(t),l=1<<n;e[n]=-1,t&=~l}}function Ed(e){if(le&6)throw Error(A(327));ar();var t=ei(e,0);if(!(t&1))return Je(e,_e()),null;var n=xi(e,t);if(e.tag!==0&&n===2){var l=Bs(e);l!==0&&(t=l,n=uo(e,l))}if(n===1)throw n=cl,Tn(e,0),qt(e,t),Je(e,_e()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,Ge,Nt),Je(e,_e()),null}function da(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(gr=_e()+500,Ei&&mn())}}function In(e){Zt!==null&&Zt.tag===0&&!(le&6)&&ar();var t=le;le|=1;var n=ut.transition,l=se;try{if(ut.transition=null,se=1,e)return e()}finally{se=l,ut.transition=n,le=t,!(le&6)&&mn()}}function ca(){Ze=nr.current,pe(nr)}function Tn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bh(n)),ke!==null)for(n=ke.return;n!==null;){var l=n;switch(Vo(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ii();break;case 3:pr(),pe(Qe),pe(Fe),Zo();break;case 5:Xo(l);break;case 4:pr();break;case 13:pe(me);break;case 19:pe(me);break;case 10:Qo(l.type._context);break;case 22:case 23:ca()}n=n.return}if(Te=e,ke=e=dn(e.current,null),Ne=Ze=t,Ce=0,cl=null,oa=zi=Dn=0,Ge=Hr=null,En!==null){for(t=0;t<En.length;t++)if(n=En[t],l=n.interleaved,l!==null){n.interleaved=null;var i=l.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,l.next=o}n.pending=l}En=null}return e}function nf(e,t){do{var n=ke;try{if(Ko(),Ul.current=hi,pi){for(var l=ye.memoizedState;l!==null;){var i=l.queue;i!==null&&(i.pending=null),l=l.next}pi=!1}if(Ln=0,Re=be=ye=null,Ur=!1,ol=0,sa.current=null,n===null||n.return===null){Ce=1,cl=t,ke=null;break}e:{var s=e,o=n.return,a=n,d=t;if(t=Ne,a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,x=a,h=x.tag;if(!(x.mode&1)&&(h===0||h===11||h===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=hd(o);if(j!==null){j.flags&=-257,gd(j,o,a,s,t),j.mode&1&&pd(s,c,t),t=j,d=c;var S=t.updateQueue;if(S===null){var _=new Set;_.add(d),t.updateQueue=_}else S.add(d);break e}else{if(!(t&1)){pd(s,c,t),ua();break e}d=Error(A(426))}}else if(ge&&a.mode&1){var w=hd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),gd(w,o,a,s,t),Ho(hr(d,a));break e}}s=d=hr(d,a),Ce!==4&&(Ce=2),Hr===null?Hr=[s]:Hr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var f=$u(s,d,t);od(s,f);break e;case 1:a=d;var m=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(on===null||!on.has(p)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=Ou(s,a,t);od(s,v);break e}}s=s.return}while(s!==null)}sf(n)}catch(b){t=b,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function rf(){var e=gi.current;return gi.current=hi,e===null?hi:e}function ua(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Te===null||!(Dn&268435455)&&!(zi&268435455)||qt(Te,Ne)}function xi(e,t){var n=le;le|=2;var l=rf();(Te!==e||Ne!==t)&&(Nt=null,Tn(e,t));do try{Jh();break}catch(i){nf(e,i)}while(!0);if(Ko(),le=n,gi.current=l,ke!==null)throw Error(A(261));return Te=null,Ne=0,Ce}function Jh(){for(;ke!==null;)lf(ke)}function qh(){for(;ke!==null&&!_p();)lf(ke)}function lf(e){var t=af(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?sf(e):ke=t,sa.current=null}function sf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vh(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,ke=null;return}}else if(n=Uh(n,t,Ze),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ce===0&&(Ce=5)}function bn(e,t,n){var l=se,i=ut.transition;try{ut.transition=null,se=1,Xh(e,t,n,l)}finally{ut.transition=i,se=l}return null}function Xh(e,t,n,l){do ar();while(Zt!==null);if(le&6)throw Error(A(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Np(e,s),e===Te&&(ke=Te=null,Ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,df(Zl,function(){return ar(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ut.transition,ut.transition=null;var o=se;se=1;var a=le;le|=4,sa.current=null,Gh(e,n),Zu(n,e),xh(Ws),ti=!!Ms,Ws=Ms=null,e.current=n,Kh(n),wp(),le=a,se=o,ut.transition=s}else e.current=n;if(Dl&&(Dl=!1,Zt=e,yi=i),s=e.pendingLanes,s===0&&(on=null),Cp(n.stateNode),Je(e,_e()),t!==null)for(l=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],l(i.value,{componentStack:i.stack,digest:i.digest});if(mi)throw mi=!1,e=ao,ao=null,e;return yi&1&&e.tag!==0&&ar(),s=e.pendingLanes,s&1?e===co?Gr++:(Gr=0,co=e):Gr=0,mn(),null}function ar(){if(Zt!==null){var e=$c(yi),t=ut.transition,n=se;try{if(ut.transition=null,se=16>e?16:e,Zt===null)var l=!1;else{if(e=Zt,Zt=null,yi=0,le&6)throw Error(A(331));var i=le;for(le|=4,W=e.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var d=0;d<a.length;d++){var c=a[d];for(W=c;W!==null;){var x=W;switch(x.tag){case 0:case 11:case 15:Vr(8,x,s)}var h=x.child;if(h!==null)h.return=x,W=h;else for(;W!==null;){x=W;var y=x.sibling,j=x.return;if(Ju(x),x===c){W=null;break}if(y!==null){y.return=j,W=y;break}W=j}}}var S=s.alternate;if(S!==null){var _=S.child;if(_!==null){S.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vr(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,W=f;break e}W=s.return}}var m=e.current;for(W=m;W!==null;){o=W;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,W=p;else e:for(o=m;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pi(9,a)}}catch(b){je(a,a.return,b)}if(a===o){W=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,W=v;break e}W=a.return}}if(le=i,mn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(_i,e)}catch{}l=!0}return l}finally{se=n,ut.transition=t}}return!1}function Rd(e,t,n){t=hr(n,t),t=$u(e,t,1),e=sn(e,t,1),t=Me(),e!==null&&(gl(e,1,t),Je(e,t))}function je(e,t,n){if(e.tag===3)Rd(e,e,n);else for(;t!==null;){if(t.tag===3){Rd(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(on===null||!on.has(l))){e=hr(n,e),e=Ou(t,e,1),t=sn(t,e,1),e=Me(),t!==null&&(gl(t,1,e),Je(t,e));break}}t=t.return}}function Zh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),t=Me(),e.pingedLanes|=e.suspendedLanes&n,Te===e&&(Ne&n)===n&&(Ce===4||Ce===3&&(Ne&130023424)===Ne&&500>_e()-aa?Tn(e,0):oa|=n),Je(e,t)}function of(e,t){t===0&&(e.mode&1?(t=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):t=1);var n=Me();e=$t(e,t),e!==null&&(gl(e,t,n),Je(e,n))}function eg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),of(e,n)}function tg(e,t){var n=0;switch(e.tag){case 13:var l=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(A(314))}l!==null&&l.delete(t),of(e,n)}var af;af=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Ke=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ke=!1,Wh(e,t,n);Ke=!!(e.flags&131072)}else Ke=!1,ge&&t.flags&1048576&&uu(t,ai,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Hl(e,t),e=t.pendingProps;var i=cr(t,Fe.current);or(t,n),i=ta(null,t,l,e,i,n);var s=na();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(l)?(s=!0,si(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jo(t),i.updater=Ti,t.stateNode=i,i._reactInternals=t,qs(t,l,e,n),t=eo(null,t,l,!0,s,n)):(t.tag=0,ge&&s&&Uo(t),Oe(null,t,i,n),t=t.child),t;case 16:l=t.elementType;e:{switch(Hl(e,t),e=t.pendingProps,i=l._init,l=i(l._payload),t.type=l,i=t.tag=rg(l),e=mt(l,e),i){case 0:t=Zs(null,t,l,e,n);break e;case 1:t=xd(null,t,l,e,n);break e;case 11:t=md(null,t,l,e,n);break e;case 14:t=yd(null,t,l,mt(l.type,e),n);break e}throw Error(A(306,l,""))}return t;case 0:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:mt(l,i),Zs(e,t,l,i,n);case 1:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:mt(l,i),xd(e,t,l,i,n);case 3:e:{if(Vu(t),e===null)throw Error(A(387));l=t.pendingProps,s=t.memoizedState,i=s.element,yu(e,t),ui(t,l,null,n);var o=t.memoizedState;if(l=o.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=hr(Error(A(423)),t),t=vd(e,t,l,n,i);break e}else if(l!==i){i=hr(Error(A(424)),t),t=vd(e,t,l,n,i);break e}else for(et=ln(t.stateNode.containerInfo.firstChild),tt=t,ge=!0,xt=null,n=gu(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ur(),l===i){t=Ot(e,t,n);break e}Oe(e,t,l,n)}t=t.child}return t;case 5:return xu(t),e===null&&Qs(t),l=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Us(l,i)?o=null:s!==null&&Us(l,s)&&(t.flags|=32),Uu(e,t),Oe(e,t,o,n),t.child;case 6:return e===null&&Qs(t),null;case 13:return Hu(e,t,n);case 4:return qo(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=fr(t,null,l,n):Oe(e,t,l,n),t.child;case 11:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:mt(l,i),md(e,t,l,i,n);case 7:return Oe(e,t,t.pendingProps,n),t.child;case 8:return Oe(e,t,t.pendingProps.children,n),t.child;case 12:return Oe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,de(di,l._currentValue),l._currentValue=o,s!==null)if(St(s.value,o)){if(s.children===i.children&&!Qe.current){t=Ot(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var d=a.firstContext;d!==null;){if(d.context===l){if(s.tag===1){d=Bt(-1,n&-n),d.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var x=c.pending;x===null?d.next=d:(d.next=x.next,x.next=d),c.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Ys(s.return,n,t),a.lanes|=n;break}d=d.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ys(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,l=t.pendingProps.children,or(t,n),i=ft(i),l=l(i),t.flags|=1,Oe(e,t,l,n),t.child;case 14:return l=t.type,i=mt(l,t.pendingProps),i=mt(l.type,i),yd(e,t,l,i,n);case 15:return Mu(e,t,t.type,t.pendingProps,n);case 17:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:mt(l,i),Hl(e,t),t.tag=1,Ye(l)?(e=!0,si(t)):e=!1,or(t,n),Au(t,l,i),qs(t,l,i,n),eo(null,t,l,!0,e,n);case 19:return Gu(e,t,n);case 22:return Wu(e,t,n)}throw Error(A(156,t.tag))};function df(e,t){return Ic(e,t)}function ng(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,n,l){return new ng(e,t,n,l)}function fa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rg(e){if(typeof e=="function")return fa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zo)return 11;if(e===No)return 14}return 2}function dn(e,t){var n=e.alternate;return n===null?(n=ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ql(e,t,n,l,i,s){var o=2;if(l=e,typeof e=="function")fa(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gn:return Pn(n.children,i,s,t);case Po:o=8,i|=8;break;case Ss:return e=ct(12,n,t,i|2),e.elementType=Ss,e.lanes=s,e;case _s:return e=ct(13,n,t,i),e.elementType=_s,e.lanes=s,e;case ws:return e=ct(19,n,t,i),e.elementType=ws,e.lanes=s,e;case xc:return Ni(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mc:o=10;break e;case yc:o=9;break e;case zo:o=11;break e;case No:o=14;break e;case Qt:o=16,l=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=ct(o,n,t,i),t.elementType=e,t.type=l,t.lanes=s,t}function Pn(e,t,n,l){return e=ct(7,e,l,t),e.lanes=n,e}function Ni(e,t,n,l){return e=ct(22,e,l,t),e.elementType=xc,e.lanes=n,e.stateNode={isHidden:!1},e}function ps(e,t,n){return e=ct(6,e,null,t),e.lanes=n,e}function hs(e,t,n){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lg(e,t,n,l,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=l,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pa(e,t,n,l,i,s,o,a,d){return e=new lg(e,t,n,a,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ct(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(s),e}function ig(e,t,n){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hn,key:l==null?null:""+l,children:e,containerInfo:t,implementation:n}}function cf(e){if(!e)return pn;e=e._reactInternals;e:{if(Fn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Ye(n))return du(e,n,t)}return t}function uf(e,t,n,l,i,s,o,a,d){return e=pa(n,l,!0,e,i,s,o,a,d),e.context=cf(null),n=e.current,l=Me(),i=an(n),s=Bt(l,i),s.callback=t??null,sn(n,s,i),e.current.lanes=i,gl(e,i,l),Je(e,l),e}function Li(e,t,n,l){var i=t.current,s=Me(),o=an(i);return n=cf(n),t.context===null?t.context=n:t.pendingContext=n,t=Bt(s,o),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=sn(i,t,o),e!==null&&(jt(e,i,o,s),Wl(e,i,o)),o}function vi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Td(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ha(e,t){Td(e,t),(e=e.alternate)&&Td(e,t)}function sg(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function ga(e){this._internalRoot=e}Di.prototype.render=ga.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Li(e,t,null,null)};Di.prototype.unmount=ga.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){Li(null,e,null,null)}),t[At]=null}};function Di(e){this._internalRoot=e}Di.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&Vc(e)}};function ma(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pd(){}function og(e,t,n,l,i){if(i){if(typeof l=="function"){var s=l;l=function(){var c=vi(o);s.call(c)}}var o=uf(t,l,e,0,null,!1,!1,"",Pd);return e._reactRootContainer=o,e[At]=o.current,nl(e.nodeType===8?e.parentNode:e),In(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof l=="function"){var a=l;l=function(){var c=vi(d);a.call(c)}}var d=pa(e,0,!1,null,null,!1,!1,"",Pd);return e._reactRootContainer=d,e[At]=d.current,nl(e.nodeType===8?e.parentNode:e),In(function(){Li(t,d,n,l)}),d}function Bi(e,t,n,l,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var d=vi(o);a.call(d)}}Li(t,o,e,i)}else o=og(n,t,e,i,l);return vi(o)}Oc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ir(t.pendingLanes);n!==0&&(Io(t,n|1),Je(t,_e()),!(le&6)&&(gr=_e()+500,mn()))}break;case 13:In(function(){var l=$t(e,1);if(l!==null){var i=Me();jt(l,e,1,i)}}),ha(e,1)}};Bo=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var n=Me();jt(t,e,134217728,n)}ha(e,134217728)}};Mc=function(e){if(e.tag===13){var t=an(e),n=$t(e,t);if(n!==null){var l=Me();jt(n,e,t,l)}ha(e,t)}};Wc=function(){return se};Uc=function(e,t){var n=se;try{return se=e,t()}finally{se=n}};Ls=function(e,t,n){switch(t){case"input":if(Cs(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var i=Ci(l);if(!i)throw Error(A(90));jc(l),Cs(l,i)}}}break;case"textarea":_c(e,n);break;case"select":t=n.value,t!=null&&rr(e,!!n.multiple,t,!1)}};Tc=da;Pc=In;var ag={usingClientEntryPoint:!1,Events:[yl,Jn,Ci,Ec,Rc,da]},Pr={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dg={bundleType:Pr.bundleType,version:Pr.version,rendererPackageName:Pr.rendererPackageName,rendererConfig:Pr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lc(e),e===null?null:e.stateNode},findFiberByHostInstance:Pr.findFiberByHostInstance||sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{_i=Il.inject(dg),Ct=Il}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ag;rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ma(t))throw Error(A(200));return ig(e,t,null,n)};rt.createRoot=function(e,t){if(!ma(e))throw Error(A(299));var n=!1,l="",i=ff;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pa(e,1,!1,null,null,n,!1,l,i),e[At]=t.current,nl(e.nodeType===8?e.parentNode:e),new ga(t)};rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Lc(t),e=e===null?null:e.stateNode,e};rt.flushSync=function(e){return In(e)};rt.hydrate=function(e,t,n){if(!Ii(t))throw Error(A(200));return Bi(null,e,t,!0,n)};rt.hydrateRoot=function(e,t,n){if(!ma(e))throw Error(A(405));var l=n!=null&&n.hydratedSources||null,i=!1,s="",o=ff;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=uf(t,null,e,1,n??null,i,!1,s,o),e[At]=t.current,nl(e),l)for(e=0;e<l.length;e++)n=l[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Di(t)};rt.render=function(e,t,n){if(!Ii(t))throw Error(A(200));return Bi(null,e,t,!1,n)};rt.unmountComponentAtNode=function(e){if(!Ii(e))throw Error(A(40));return e._reactRootContainer?(In(function(){Bi(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};rt.unstable_batchedUpdates=da;rt.unstable_renderSubtreeIntoContainer=function(e,t,n,l){if(!Ii(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Bi(e,t,n,!1,l)};rt.version="18.3.1-next-f1338f8080-20240426";function pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pf)}catch(e){console.error(e)}}pf(),fc.exports=rt;var cg=fc.exports,zd=cg;vs.createRoot=zd.createRoot,vs.hydrateRoot=zd.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ul.apply(this,arguments)}var en;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(en||(en={}));const Nd="popstate";function ug(e){e===void 0&&(e={});function t(l,i){let{pathname:s,search:o,hash:a}=l.location;return po("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(l,i){return typeof i=="string"?i:ji(i)}return pg(t,n,null,e)}function we(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ya(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fg(){return Math.random().toString(36).substr(2,8)}function Ld(e,t){return{usr:e.state,key:e.key,idx:t}}function po(e,t,n,l){return n===void 0&&(n=null),ul({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vr(t):t,{state:n,key:t&&t.key||l||fg()})}function ji(e){let{pathname:t="/",search:n="",hash:l=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function vr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let l=e.indexOf("?");l>=0&&(t.search=e.substr(l),e=e.substr(0,l)),e&&(t.pathname=e)}return t}function pg(e,t,n,l){l===void 0&&(l={});let{window:i=document.defaultView,v5Compat:s=!1}=l,o=i.history,a=en.Pop,d=null,c=x();c==null&&(c=0,o.replaceState(ul({},o.state,{idx:c}),""));function x(){return(o.state||{idx:null}).idx}function h(){a=en.Pop;let w=x(),f=w==null?null:w-c;c=w,d&&d({action:a,location:_.location,delta:f})}function y(w,f){a=en.Push;let m=po(_.location,w,f);c=x()+1;let p=Ld(m,c),v=_.createHref(m);try{o.pushState(p,"",v)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(v)}s&&d&&d({action:a,location:_.location,delta:1})}function j(w,f){a=en.Replace;let m=po(_.location,w,f);c=x();let p=Ld(m,c),v=_.createHref(m);o.replaceState(p,"",v),s&&d&&d({action:a,location:_.location,delta:0})}function S(w){let f=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof w=="string"?w:ji(w);return m=m.replace(/ $/,"%20"),we(f,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,f)}let _={get action(){return a},get location(){return e(i,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Nd,h),d=w,()=>{i.removeEventListener(Nd,h),d=null}},createHref(w){return t(i,w)},createURL:S,encodeLocation(w){let f=S(w);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:y,replace:j,go(w){return o.go(w)}};return _}var Dd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dd||(Dd={}));function hg(e,t,n){return n===void 0&&(n="/"),gg(e,t,n)}function gg(e,t,n,l){let i=typeof t=="string"?vr(t):t,s=xa(i.pathname||"/",n);if(s==null)return null;let o=hf(e);mg(o);let a=null;for(let d=0;a==null&&d<o.length;++d){let c=Rg(s);a=bg(o[d],c)}return a}function hf(e,t,n,l){t===void 0&&(t=[]),n===void 0&&(n=[]),l===void 0&&(l="");let i=(s,o,a)=>{let d={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(we(d.relativePath.startsWith(l),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(l.length));let c=cn([l,d.relativePath]),x=n.concat(d);s.children&&s.children.length>0&&(we(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),hf(s.children,t,x,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:wg(c,s.index),routesMeta:x})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let d of gf(s.path))i(s,o,d)}),t}function gf(e){let t=e.split("/");if(t.length===0)return[];let[n,...l]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(l.length===0)return i?[s,""]:[s];let o=gf(l.join("/")),a=[];return a.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&a.push(...o),a.map(d=>e.startsWith("/")&&d===""?"/":d)}function mg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kg(t.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}const yg=/^:[\w-]+$/,xg=3,vg=2,jg=1,Sg=10,_g=-2,Id=e=>e==="*";function wg(e,t){let n=e.split("/"),l=n.length;return n.some(Id)&&(l+=_g),t&&(l+=vg),n.filter(i=>!Id(i)).reduce((i,s)=>i+(yg.test(s)?xg:s===""?jg:Sg),l)}function kg(e,t){return e.length===t.length&&e.slice(0,-1).every((l,i)=>l===t[i])?e[e.length-1]-t[t.length-1]:0}function bg(e,t,n){let{routesMeta:l}=e,i={},s="/",o=[];for(let a=0;a<l.length;++a){let d=l[a],c=a===l.length-1,x=s==="/"?t:t.slice(s.length)||"/",h=Cg({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},x),y=d.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:cn([s,h.pathname]),pathnameBase:Lg(cn([s,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(s=cn([s,h.pathnameBase]))}return o}function Cg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,l]=Eg(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:l.reduce((c,x,h)=>{let{paramName:y,isOptional:j}=x;if(y==="*"){let _=a[h]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const S=a[h];return j&&!S?c[y]=void 0:c[y]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function Eg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ya(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,d)=>(l.push({paramName:a,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),l]}function Rg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ya(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,l=e.charAt(n);return l&&l!=="/"?null:e.slice(n)||"/"}const Tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pg=e=>Tg.test(e);function zg(e,t){t===void 0&&(t="/");let{pathname:n,search:l="",hash:i=""}=typeof e=="string"?vr(e):e,s;if(n)if(Pg(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ya(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Bd(n.substring(1),"/"):s=Bd(n,t)}else s=t;return{pathname:s,search:Dg(l),hash:Ig(i)}}function Bd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gs(e,t,n,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ng(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function va(e,t){let n=Ng(e);return t?n.map((l,i)=>i===n.length-1?l.pathname:l.pathnameBase):n.map(l=>l.pathnameBase)}function ja(e,t,n,l){l===void 0&&(l=!1);let i;typeof e=="string"?i=vr(e):(i=ul({},e),we(!i.pathname||!i.pathname.includes("?"),gs("?","pathname","search",i)),we(!i.pathname||!i.pathname.includes("#"),gs("#","pathname","hash",i)),we(!i.search||!i.search.includes("#"),gs("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=t.length-1;if(!l&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),h-=1;i.pathname=y.join("/")}a=h>=0?t[h]:"/"}let d=zg(i,a),c=o&&o!=="/"&&o.endsWith("/"),x=(s||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(c||x)&&(d.pathname+="/"),d}const cn=e=>e.join("/").replace(/\/\/+/g,"/"),Lg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ig=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mf=["post","put","patch","delete"];new Set(mf);const Fg=["get",...mf];new Set(Fg);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},fl.apply(this,arguments)}const Sa=g.createContext(null),Ag=g.createContext(null),yn=g.createContext(null),Fi=g.createContext(null),Wt=g.createContext({outlet:null,matches:[],isDataRoute:!1}),yf=g.createContext(null);function $g(e,t){let{relative:n}=t===void 0?{}:t;jr()||we(!1);let{basename:l,navigator:i}=g.useContext(yn),{hash:s,pathname:o,search:a}=vf(e,{relative:n}),d=o;return l!=="/"&&(d=o==="/"?l:cn([l,o])),i.createHref({pathname:d,search:a,hash:s})}function jr(){return g.useContext(Fi)!=null}function xn(){return jr()||we(!1),g.useContext(Fi).location}function xf(e){g.useContext(yn).static||g.useLayoutEffect(e)}function qe(){let{isDataRoute:e}=g.useContext(Wt);return e?Xg():Og()}function Og(){jr()||we(!1);let e=g.useContext(Sa),{basename:t,future:n,navigator:l}=g.useContext(yn),{matches:i}=g.useContext(Wt),{pathname:s}=xn(),o=JSON.stringify(va(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return xf(()=>{a.current=!0}),g.useCallback(function(c,x){if(x===void 0&&(x={}),!a.current)return;if(typeof c=="number"){l.go(c);return}let h=ja(c,JSON.parse(o),s,x.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:cn([t,h.pathname])),(x.replace?l.replace:l.push)(h,x.state,x)},[t,l,o,s,e])}function Ai(){let{matches:e}=g.useContext(Wt),t=e[e.length-1];return t?t.params:{}}function vf(e,t){let{relative:n}=t===void 0?{}:t,{future:l}=g.useContext(yn),{matches:i}=g.useContext(Wt),{pathname:s}=xn(),o=JSON.stringify(va(i,l.v7_relativeSplatPath));return g.useMemo(()=>ja(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Mg(e,t){return Wg(e,t)}function Wg(e,t,n,l){jr()||we(!1);let{navigator:i}=g.useContext(yn),{matches:s}=g.useContext(Wt),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=xn(),x;if(t){var h;let w=typeof t=="string"?vr(t):t;d==="/"||(h=w.pathname)!=null&&h.startsWith(d)||we(!1),x=w}else x=c;let y=x.pathname||"/",j=y;if(d!=="/"){let w=d.replace(/^\//,"").split("/");j="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=hg(e,{pathname:j}),_=Kg(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:cn([d,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:cn([d,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,l);return t&&_?g.createElement(Fi.Provider,{value:{location:fl({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:en.Pop}},_):_}function Ug(){let e=qg(),t=Bg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:i},n):null,null)}const Vg=g.createElement(Ug,null);class Hg extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(Wt.Provider,{value:this.props.routeContext},g.createElement(yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gg(e){let{routeContext:t,match:n,children:l}=e,i=g.useContext(Sa);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Wt.Provider,{value:t},l)}function Kg(e,t,n,l){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),l===void 0&&(l=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=l)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let x=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);x>=0||we(!1),o=o.slice(0,Math.min(o.length,x+1))}let d=!1,c=-1;if(n&&l&&l.v7_partialHydration)for(let x=0;x<o.length;x++){let h=o[x];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=x),h.route.id){let{loaderData:y,errors:j}=n,S=h.route.loader&&y[h.route.id]===void 0&&(!j||j[h.route.id]===void 0);if(h.route.lazy||S){d=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((x,h,y)=>{let j,S=!1,_=null,w=null;n&&(j=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||Vg,d&&(c<0&&y===0?(Zg("route-fallback"),S=!0,w=null):c===y&&(S=!0,w=h.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,y+1)),m=()=>{let p;return j?p=_:S?p=w:h.route.Component?p=g.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=x,g.createElement(Gg,{match:h,routeContext:{outlet:x,matches:f,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?g.createElement(Hg,{location:n.location,revalidation:n.revalidation,component:_,error:j,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}var jf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jf||{}),Sf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Sf||{});function Qg(e){let t=g.useContext(Sa);return t||we(!1),t}function Yg(e){let t=g.useContext(Ag);return t||we(!1),t}function Jg(e){let t=g.useContext(Wt);return t||we(!1),t}function _f(e){let t=Jg(),n=t.matches[t.matches.length-1];return n.route.id||we(!1),n.route.id}function qg(){var e;let t=g.useContext(yf),n=Yg(),l=_f();return t!==void 0?t:(e=n.errors)==null?void 0:e[l]}function Xg(){let{router:e}=Qg(jf.UseNavigateStable),t=_f(Sf.UseNavigateStable),n=g.useRef(!1);return xf(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,fl({fromRouteId:t},s)))},[e,t])}const Fd={};function Zg(e,t,n){Fd[e]||(Fd[e]=!0)}function em(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yl(e){let{to:t,replace:n,state:l,relative:i}=e;jr()||we(!1);let{future:s,static:o}=g.useContext(yn),{matches:a}=g.useContext(Wt),{pathname:d}=xn(),c=qe(),x=ja(t,va(a,s.v7_relativeSplatPath),d,i==="path"),h=JSON.stringify(x);return g.useEffect(()=>c(JSON.parse(h),{replace:n,state:l,relative:i}),[c,h,i,n,l]),null}function fe(e){we(!1)}function tm(e){let{basename:t="/",children:n=null,location:l,navigationType:i=en.Pop,navigator:s,static:o=!1,future:a}=e;jr()&&we(!1);let d=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:d,navigator:s,static:o,future:fl({v7_relativeSplatPath:!1},a)}),[d,a,s,o]);typeof l=="string"&&(l=vr(l));let{pathname:x="/",search:h="",hash:y="",state:j=null,key:S="default"}=l,_=g.useMemo(()=>{let w=xa(x,d);return w==null?null:{location:{pathname:w,search:h,hash:y,state:j,key:S},navigationType:i}},[d,x,h,y,j,S,i]);return _==null?null:g.createElement(yn.Provider,{value:c},g.createElement(Fi.Provider,{children:n,value:_}))}function wf(e){let{children:t,location:n}=e;return Mg(ho(t),n)}new Promise(()=>{});function ho(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(l,i)=>{if(!g.isValidElement(l))return;let s=[...t,i];if(l.type===g.Fragment){n.push.apply(n,ho(l.props.children,s));return}l.type!==fe&&we(!1),!l.props.index||!l.props.children||we(!1);let o={id:l.props.id||s.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(o.children=ho(l.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},go.apply(this,arguments)}function nm(e,t){if(e==null)return{};var n={},l=Object.keys(e),i,s;for(s=0;s<l.length;s++)i=l[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function rm(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lm(e,t){return e.button===0&&(!t||t==="_self")&&!rm(e)}function mo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let l=e[n];return t.concat(Array.isArray(l)?l.map(i=>[n,i]):[[n,l]])},[]))}function im(e,t){let n=mo(e);return t&&t.forEach((l,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const sm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],om="6";try{window.__reactRouterVersion=om}catch{}const am="startTransition",Ad=Zf[am];function dm(e){let{basename:t,children:n,future:l,window:i}=e,s=g.useRef();s.current==null&&(s.current=ug({window:i,v5Compat:!0}));let o=s.current,[a,d]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=l||{},x=g.useCallback(h=>{c&&Ad?Ad(()=>d(h)):d(h)},[d,c]);return g.useLayoutEffect(()=>o.listen(x),[o,x]),g.useEffect(()=>em(l),[l]),g.createElement(tm,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:l})}const cm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=g.forwardRef(function(t,n){let{onClick:l,relative:i,reloadDocument:s,replace:o,state:a,target:d,to:c,preventScrollReset:x,viewTransition:h}=t,y=nm(t,sm),{basename:j}=g.useContext(yn),S,_=!1;if(typeof c=="string"&&um.test(c)&&(S=c,cm))try{let p=new URL(window.location.href),v=c.startsWith("//")?new URL(p.protocol+c):new URL(c),b=xa(v.pathname,j);v.origin===p.origin&&b!=null?c=b+v.search+v.hash:_=!0}catch{}let w=$g(c,{relative:i}),f=fm(c,{replace:o,state:a,target:d,preventScrollReset:x,relative:i,viewTransition:h});function m(p){l&&l(p),p.defaultPrevented||f(p)}return g.createElement("a",go({},y,{href:S||w,onClick:_||s?l:m,ref:n,target:d}))});var $d;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($d||($d={}));var Od;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Od||(Od={}));function fm(e,t){let{target:n,replace:l,state:i,preventScrollReset:s,relative:o,viewTransition:a}=t===void 0?{}:t,d=qe(),c=xn(),x=vf(e,{relative:o});return g.useCallback(h=>{if(lm(h,n)){h.preventDefault();let y=l!==void 0?l:ji(c)===ji(x);d(e,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,d,x,l,i,n,e,s,o,a])}function pm(e){let t=g.useRef(mo(e)),n=g.useRef(!1),l=xn(),i=g.useMemo(()=>im(l.search,n.current?null:t.current),[l.search]),s=qe(),o=g.useCallback((a,d)=>{const c=mo(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,d)},[s,i]);return[i,o]}const hm="/api",un=(()=>{const e=hm.replace(/\/$/,"");return e.endsWith("/api")?e:`${e}/api`})();let yo=null;function gm(e){yo=e}async function Sr(e,t,n={}){const l={"Content-Type":"application/json",...n.headers};l["Content-Type"]==="multipart/form-data"&&delete l["Content-Type"],t&&(l.Authorization=`Bearer ${t}`);let i=await fetch(`${un}${e}`,{...n,headers:l});if(i.status===401){const s=localStorage.getItem("refresh_token");if(s)try{const o=await fetch(`${un}/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:s})});if(o.ok){const a=await o.json(),d=a.access,c=a.refresh;yo&&yo(d,c),localStorage.setItem("token",d),c&&localStorage.setItem("refresh_token",c),l.Authorization=`Bearer ${d}`,i=await fetch(`${un}${e}`,{...n,headers:l})}}catch(o){console.error("Token refresh failed",o)}}if(!i.ok){const s=await i.text();let o=s;try{const d=JSON.parse(s);o=d.detail||d.message||s}catch{}const a=new Error(o);throw a.status=i.status,a}return i.status===204?null:i.json()}async function Z(e,t){return Sr(e,t,{method:"GET"})}async function oe(e,t,n){return Sr(e,t,{method:"POST",body:JSON.stringify(n)})}async function kf(e,t,n){return Sr(e,t,{method:"PUT",body:JSON.stringify(n)})}async function vn(e,t,n){return Sr(e,t,{method:"PATCH",body:JSON.stringify(n)})}async function An(e,t){return Sr(e,t,{method:"DELETE"})}async function xo(e,t,n){return Sr(e,t,{method:"POST",body:n,headers:{"Content-Type":"multipart/form-data"}})}function bf(e){const t=new URLSearchParams;Object.entries(e).forEach(([l,i])=>{i==null||i===""||t.set(l,String(i))});const n=t.toString();return n?`?${n}`:""}async function mm(e,t){const n=bf(t);return Z(`/workflow/patients/${n}`,e)}async function ym(e,t,n){const l=bf(n||{});return Z(`/workflow/patients/${t}/timeline/${l}`,e)}async function xm(e,t){const n=`${un}/auth/token/`,l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!l.ok){const s=await l.text();throw new Error(s)}return await l.json()}const Cf=g.createContext(null);function vm({children:e}){const[t,n]=g.useState(localStorage.getItem("token")),[l,i]=g.useState(localStorage.getItem("refresh_token")),[s,o]=g.useState(null),[a,d]=g.useState(!1),c=g.useCallback((y,j=null)=>{n(y),y?localStorage.setItem("token",y):localStorage.removeItem("token"),j!==void 0&&(i(j),j?localStorage.setItem("refresh_token",j):localStorage.removeItem("refresh_token"))},[]),x=g.useCallback(()=>{n(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("refresh_token")},[]);g.useEffect(()=>{gm((y,j)=>{c(y,j)})},[c]),g.useEffect(()=>{if(!t){o(null),d(!1);return}d(!0),Z("/auth/me/",t).then(y=>{o(y)}).catch(()=>{o(null),x()}).finally(()=>{d(!1)})},[t,x]);const h=g.useMemo(()=>({token:t,refreshToken:l,setToken:c,logout:x,user:s,isLoading:a}),[t,l,s,a,c,x]);return r.jsx(Cf.Provider,{value:h,children:e})}function Se(){const e=g.useContext(Cf);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const u={colors:{brandBlue:"#0B5ED7",brandBlueDark:"#094BB8",brandBlueSoft:"#E8F2FF",brandOrange:"#FF6B35",brandOrangeDark:"#E65520",brandOrangeSoft:"#FFF0EB",primary:"#0B5ED7",success:"#28a745",warning:"#ffc107",danger:"#dc3545",textPrimary:"#333333",textSecondary:"#666666",textTertiary:"#999999",border:"#e0e0e0",borderLight:"#f0f0f0",background:"#ffffff",backgroundGray:"#fafafa",backgroundLight:"#f5f5f5"},typography:{fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:{base:14},fontWeight:{normal:400,medium:500,semibold:600,bold:700}},radius:{sm:4,base:6,md:8,lg:12},shadows:{sm:"0 1px 3px rgba(0,0,0,0.08)",md:"0 4px 12px rgba(0,0,0,0.12)"},transitions:{fast:"0.15s ease",base:"0.2s ease"}};function Ef({variant:e="full",size:t="md",onClick:n,style:l}){const s={sm:{width:40,height:40},md:{width:80,height:80},lg:{width:120,height:120},xl:{width:200,height:200}}[t];let o="";try{o="/brand/Consultants_Place_Clinic_Logo_Transparent.png"}catch{}const a={display:"inline-flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:n?"pointer":"default",...l},d={width:s.width,height:s.height,objectFit:"contain",display:"block"};return e==="icon"&&(d.objectFit="cover",d.objectPosition="center top"),r.jsx("div",{style:a,onClick:n,children:r.jsx("img",{src:o,alt:"Consultants Place Clinic",style:d,onError:c=>{const x=c.target;x.style.display="none";const h=x.parentElement;if(h&&!h.querySelector(".logo-fallback")){const y=document.createElement("div");y.className="logo-fallback",y.style.cssText=`
              width: ${s.width}px;
              height: ${s.height}px;
              display: flex;
              align-items: center;
              justify-content: center;
              background: linear-gradient(135deg, ${u.colors.brandBlue} 0%, ${u.colors.brandOrange} 100%);
              border-radius: ${u.radius.base}px;
              color: white;
              font-weight: ${u.typography.fontWeight.bold};
              font-size: ${t==="sm"?14:t==="md"?20:28}px;
            `,y.textContent="CP",h.appendChild(y)}}})})}function Rf({size:e="md",style:t}){const n={sm:{fontSize:14,dotSize:3,gap:6},md:{fontSize:18,dotSize:4,gap:8},lg:{fontSize:24,dotSize:5,gap:10}},{fontSize:l,dotSize:i,gap:s}=n[e],o={display:"inline-flex",alignItems:"center",gap:s,fontFamily:u.typography.fontFamily,fontWeight:u.typography.fontWeight.semibold,lineHeight:1.2,flexWrap:"wrap",...t},a={width:i,height:i,borderRadius:"50%",flexShrink:0};return r.jsxs("div",{style:o,children:[r.jsx("span",{style:{color:u.colors.brandBlue,fontSize:l},children:"Consultants"}),r.jsx("span",{style:{...a,backgroundColor:u.colors.brandBlue}}),r.jsx("span",{style:{color:u.colors.brandOrange,fontSize:l},children:"Place"}),r.jsx("span",{style:{...a,backgroundColor:u.colors.brandOrange}}),r.jsx("span",{style:{color:u.colors.brandOrange,fontSize:l},children:"Clinic"})]})}function jm({logoSize:e="md",titleSize:t="md",layout:n="vertical",align:l="center",showTitle:i=!0,onClick:s,style:o}){const a={display:"flex",flexDirection:n==="vertical"?"column":"row",alignItems:l==="center"?"center":l==="left"?"flex-start":"flex-end",gap:n==="vertical"?16:12,cursor:s?"pointer":"default",...o};return r.jsxs("div",{style:a,onClick:s,children:[r.jsx(Ef,{size:e,variant:"full"}),i&&r.jsx(Rf,{size:t})]})}function Sm(){const{setToken:e}=Se(),t=qe(),[n,l]=g.useState(""),[i,s]=g.useState(""),[o,a]=g.useState(""),[d,c]=g.useState(!1),x=async h=>{h.preventDefault(),a(""),c(!0);try{const y=await xm(n,i);e(y.access,y.refresh),t("/")}catch(y){a(y.message||"Login failed")}finally{c(!1)}};return r.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:u.typography.fontFamily,backgroundColor:u.colors.backgroundLight},children:r.jsxs("div",{style:{maxWidth:420,width:"100%",padding:40,backgroundColor:u.colors.background,borderRadius:u.radius.md,boxShadow:u.shadows.md},children:[r.jsx("div",{style:{marginBottom:32},children:r.jsx(jm,{logoSize:"xl",titleSize:"md",layout:"vertical",align:"center"})}),r.jsxs("form",{onSubmit:x,style:{display:"flex",flexDirection:"column",gap:16},children:[r.jsx("div",{children:r.jsx("input",{type:"text","data-testid":"login-username",value:n,onChange:h=>l(h.target.value),placeholder:"Username",required:!0,autoComplete:"username",style:{width:"100%",padding:12,fontSize:14,border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,boxSizing:"border-box",fontFamily:u.typography.fontFamily}})}),r.jsx("div",{children:r.jsx("input",{type:"password","data-testid":"login-password",value:i,onChange:h=>s(h.target.value),placeholder:"Password",required:!0,autoComplete:"current-password",style:{width:"100%",padding:12,fontSize:14,border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,boxSizing:"border-box",fontFamily:u.typography.fontFamily}})}),o&&r.jsx("div",{style:{padding:"12px 16px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:u.radius.base,color:"#c33",fontSize:14},children:o}),r.jsx("button",{type:"submit","data-testid":"login-submit",disabled:d,style:{padding:12,fontSize:16,fontWeight:u.typography.fontWeight.medium,backgroundColor:d?u.colors.border:u.colors.brandBlue,color:"white",border:"none",borderRadius:u.radius.base,cursor:d?"not-allowed":"pointer",transition:u.transitions.base},onMouseEnter:h=>{d||(h.target.style.backgroundColor=u.colors.brandBlueDark)},onMouseLeave:h=>{d||(h.target.style.backgroundColor=u.colors.brandBlue)},children:d?"Logging in...":"Login"})]}),r.jsx("p",{style:{marginTop:20,color:u.colors.textSecondary,fontSize:12,textAlign:"center"},children:"Use your credentials to login"})]})})}function ht({title:e,actions:t,subtitle:n}){return r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:n?"flex-start":"center",marginBottom:24,paddingBottom:16,borderBottom:"1px solid #e0e0e0"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{margin:0,fontSize:28,fontWeight:600,color:"#333"},children:e}),n&&r.jsx("div",{style:{marginTop:4,fontSize:14,color:"#666"},children:n})]}),t&&r.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:t})]})}function Ee({message:e,onDismiss:t}){return r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:6,color:"#c33",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:e}),t&&r.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontSize:18,padding:"0 8px"},children:""})]})}function _m(){const{token:e,user:t}=Se(),n=qe(),[l,i]=g.useState(!0),[s,o]=g.useState(""),[a,d]=g.useState(null),[c,x]=g.useState(null),[h,y]=g.useState(null),[j,S]=g.useState(null),[_,w]=g.useState(null),[f,m]=g.useState(navigator.onLine),p=(t==null?void 0:t.is_superuser)||((t==null?void 0:t.groups)||[]).some(T=>T.toLowerCase()==="admin");g.useEffect(()=>{e&&v()},[e]),g.useEffect(()=>{if(!e)return;b();const T=setInterval(b,6e4);return()=>clearInterval(T)},[e]),g.useEffect(()=>{const T=()=>m(!0),$=()=>m(!1);return window.addEventListener("online",T),window.addEventListener("offline",$),()=>{window.removeEventListener("online",T),window.removeEventListener("offline",$)}},[]);const v=async()=>{if(e){i(!0),o("");try{const[T,$,J]=await Promise.all([Z("/dashboard/summary/",e).catch(()=>null),Z(`/dashboard/worklist/?scope=${p?"department":"my"}`,e).catch(()=>null),Z("/dashboard/flow/",e).catch(()=>null)]);T&&d(T),$&&x($),J&&y(J)}catch(T){o(T.message||"Failed to load dashboard data")}finally{i(!1)}}},b=async()=>{if(e)try{const T=await Z("/health/",e);S(T),w(new Date)}catch{S({status:"down",server_time:new Date().toISOString(),version:"unknown",checks:{db:"fail",storage:"unknown"},latency_ms:0}),w(new Date)}},E=T=>{switch(T){case"patients":n("/registration");break;case"services":n("/registration");break;case"pending":n("/worklists/verification?status=PENDING_VERIFICATION");break;case"verified":n("/reports?status=PUBLISHED");break;case"delays":n("/worklists/verification?status=PENDING_VERIFICATION");break}},z=T=>{T.action_url&&n(T.action_url)},k=T=>{if(T<60)return`${T}m`;const $=Math.floor(T/60),J=T%60;return`${$}h ${J}m`},F=T=>({IN_PROGRESS:"#ffc107",PENDING_VERIFICATION:"#0B5ED7",RETURNED_FOR_CORRECTION:"#dc3545",FINALIZED:"#28a745",PUBLISHED:"#28a745"})[T]||"#666";return l&&!a?r.jsxs("div",{children:[r.jsx(ht,{title:"Dashboard"}),r.jsx("div",{style:{textAlign:"center",padding:40,color:"#666"},children:"Loading..."})]}):r.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[r.jsx(ht,{title:"Dashboard"}),s&&r.jsx(Ee,{message:s,onDismiss:()=>o("")}),r.jsxs("div",{style:{marginBottom:24},children:[r.jsx("h2",{style:{fontSize:18,fontWeight:600,marginBottom:16,color:"#333"},children:"Today's Overview"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:16},children:[{key:"patients",label:"Total Patients Today",value:(a==null?void 0:a.total_patients_today)||0,color:"#0B5ED7"},{key:"services",label:"Total Services Today",value:(a==null?void 0:a.total_services_today)||0,color:"#17a2b8"},{key:"pending",label:"Reports Pending",value:(a==null?void 0:a.reports_pending)||0,color:"#ffc107"},{key:"verified",label:"Reports Verified",value:(a==null?void 0:a.reports_verified)||0,color:"#28a745"},{key:"delays",label:"Critical Delays",value:(a==null?void 0:a.critical_delays)||0,color:"#dc3545"}].map(T=>r.jsxs("div",{onClick:()=>E(T.key),style:{border:"1px solid #e0e0e0",borderRadius:8,padding:20,background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:$=>{$.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)",$.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:$=>{$.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)",$.currentTarget.style.transform="translateY(0)"},children:[r.jsx("h3",{style:{margin:"0 0 10px 0",color:"#666",fontSize:13,fontWeight:500},children:T.label}),r.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:T.color,marginBottom:8},children:T.value}),r.jsx("div",{style:{fontSize:11,color:"#999"},children:"Click to view "})]},T.key))})]}),r.jsxs("div",{style:{marginBottom:24},children:[r.jsx("h2",{style:{fontSize:18,fontWeight:600,marginBottom:16,color:"#333"},children:p?"Department Worklists":"My Worklist"}),c!=null&&c.grouped_by_department?Object.entries(c.grouped_by_department).map(([T,$])=>r.jsxs("div",{style:{marginBottom:20},children:[r.jsxs("h3",{style:{fontSize:14,fontWeight:600,color:"#666",marginBottom:8},children:[T," (",$.length," items)"]}),r.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,background:"white",overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"1px solid #e0e0e0"},children:[r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Patient"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Service"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Status"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Waiting"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Action"})]})}),r.jsx("tbody",{children:$.slice(0,10).map(J=>r.jsxs("tr",{onClick:()=>z(J),style:{borderBottom:"1px solid #f0f0f0",cursor:"pointer"},onMouseEnter:Q=>{Q.currentTarget.style.background="#f8f9fa"},onMouseLeave:Q=>{Q.currentTarget.style.background="white"},children:[r.jsxs("td",{style:{padding:"12px",fontSize:13},children:[r.jsx("div",{style:{fontWeight:500},children:J.patient_name}),r.jsx("div",{style:{fontSize:11,color:"#999"},children:J.patient_mrn})]}),r.jsx("td",{style:{padding:"12px",fontSize:13},children:J.service_name}),r.jsx("td",{style:{padding:"12px"},children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:500,background:F(J.status)+"20",color:F(J.status)},children:J.status_display})}),r.jsx("td",{style:{padding:"12px",fontSize:13,color:"#666"},children:k(J.waiting_minutes)}),r.jsx("td",{style:{padding:"12px",fontSize:12,color:"#0B5ED7"},children:"Open "})]},J.id))})]})})]},T)):c!=null&&c.items&&c.items.length>0?r.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,background:"white",overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"1px solid #e0e0e0"},children:[r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Patient"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Service"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Status"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Waiting"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:12,fontWeight:600,color:"#666"},children:"Action"})]})}),r.jsx("tbody",{children:c.items.slice(0,20).map(T=>r.jsxs("tr",{onClick:()=>z(T),style:{borderBottom:"1px solid #f0f0f0",cursor:"pointer"},onMouseEnter:$=>{$.currentTarget.style.background="#f8f9fa"},onMouseLeave:$=>{$.currentTarget.style.background="white"},children:[r.jsxs("td",{style:{padding:"12px",fontSize:13},children:[r.jsx("div",{style:{fontWeight:500},children:T.patient_name}),r.jsx("div",{style:{fontSize:11,color:"#999"},children:T.patient_mrn})]}),r.jsx("td",{style:{padding:"12px",fontSize:13},children:T.service_name}),r.jsx("td",{style:{padding:"12px"},children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:500,background:F(T.status)+"20",color:F(T.status)},children:T.status_display})}),r.jsx("td",{style:{padding:"12px",fontSize:13,color:"#666"},children:k(T.waiting_minutes)}),r.jsx("td",{style:{padding:"12px",fontSize:12,color:"#0B5ED7"},children:"Open "})]},T.id))})]})}):r.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,padding:40,background:"white",textAlign:"center",color:"#999"},children:"No work items found"})]}),h&&r.jsxs("div",{style:{marginBottom:24},children:[r.jsx("h2",{style:{fontSize:18,fontWeight:600,marginBottom:16,color:"#333"},children:"Today's Flow"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:16},children:[{label:"Registered",value:h.registered_count,color:"#0B5ED7"},{label:"Paid",value:h.paid_count,color:"#17a2b8"},{label:"Performed",value:h.performed_count,color:"#ffc107"},{label:"Reported",value:h.reported_count,color:"#fd7e14"},{label:"Verified",value:h.verified_count,color:"#28a745"}].map((T,$,J)=>r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,padding:16,background:"white",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:T.color,marginBottom:4},children:T.value}),r.jsx("div",{style:{fontSize:12,color:"#666",fontWeight:500},children:T.label})]}),$<J.length-1&&r.jsx("div",{style:{position:"absolute",top:"50%",right:-8,transform:"translateY(-50%)",fontSize:20,color:"#ccc"},children:""})]},T.label))})]}),r.jsxs("div",{style:{marginBottom:24},children:[r.jsx("h2",{style:{fontSize:18,fontWeight:600,marginBottom:16,color:"#333"},children:"Alerts & System Health"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:[r.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,padding:20,background:"white"},children:[r.jsx("h3",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"#333"},children:"Alerts"}),r.jsx("div",{style:{fontSize:13,color:"#666"},children:a!=null&&a.critical_delays&&a.critical_delays>0?r.jsxs("div",{style:{padding:"8px 12px",background:"#fff3cd",borderRadius:4,marginBottom:8},children:[" ",a.critical_delays," items pending > ",a.threshold_hours,"h"]}):r.jsx("div",{style:{color:"#999"},children:"No active alerts"})})]}),r.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,padding:20,background:"white"},children:[r.jsx("h3",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"#333"},children:"System Health"}),j?r.jsxs("div",{style:{fontSize:13},children:[r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("span",{style:{color:"#666"},children:"Backend API: "}),r.jsx("span",{style:{color:j.status==="ok"?"#28a745":j.status==="degraded"?"#ffc107":"#dc3545",fontWeight:500},children:j.status.toUpperCase()}),j.latency_ms>0&&r.jsxs("span",{style:{color:"#999",marginLeft:8},children:["(",j.latency_ms,"ms)"]})]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("span",{style:{color:"#666"},children:"Database: "}),r.jsx("span",{style:{color:j.checks.db==="ok"?"#28a745":"#dc3545",fontWeight:500},children:j.checks.db.toUpperCase()})]}),r.jsxs("div",{style:{marginBottom:8},children:[r.jsx("span",{style:{color:"#666"},children:"Network: "}),r.jsx("span",{style:{color:f?"#28a745":"#dc3545",fontWeight:500},children:f?"ONLINE":"OFFLINE"})]}),j.version&&j.version!=="unknown"&&r.jsxs("div",{style:{marginBottom:8,fontSize:11,color:"#999"},children:["Version: ",j.version.substring(0,8)]}),_&&r.jsxs("div",{style:{fontSize:11,color:"#999"},children:["Last checked: ",_.toLocaleTimeString()]})]}):r.jsx("div",{style:{color:"#999",fontSize:13},children:"Loading health status..."})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:18,fontWeight:600,marginBottom:16,color:"#333"},children:"Quick Actions"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:12},children:[{label:"New Registration",path:"/registration",icon:""},{label:"Search Patient",path:"/registration",icon:""}].slice(0,2).map(T=>r.jsxs($i,{to:T.path,style:{border:"1px solid #e0e0e0",borderRadius:8,padding:16,background:"white",textDecoration:"none",textAlign:"center",transition:"all 0.2s",display:"block"},onMouseEnter:$=>{$.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",$.currentTarget.style.borderColor="#0B5ED7"},onMouseLeave:$=>{$.currentTarget.style.boxShadow="none",$.currentTarget.style.borderColor="#e0e0e0"},children:[r.jsx("div",{style:{fontSize:24,marginBottom:8},children:T.icon}),r.jsx("div",{style:{fontSize:13,color:"#333",fontWeight:500},children:T.label})]},T.path))})]})]})}function I({variant:e="primary",children:t,style:n,...l}){const[i,s]=g.useState(!1),o={padding:"10px 20px",fontSize:14,fontWeight:u.typography.fontWeight.medium,borderRadius:u.radius.base,cursor:l.disabled?"not-allowed":"pointer",transition:u.transitions.base,fontFamily:u.typography.fontFamily,...n},a={primary:{backgroundColor:l.disabled?u.colors.border:i?u.colors.brandBlueDark:u.colors.brandBlue,color:"white",border:"none"},secondary:{backgroundColor:l.disabled?u.colors.borderLight:i?u.colors.brandBlueSoft:"transparent",color:l.disabled?u.colors.textTertiary:i?u.colors.brandBlueDark:u.colors.brandBlue,border:`1px solid ${l.disabled?u.colors.border:u.colors.brandBlue}`},accent:{backgroundColor:l.disabled?u.colors.borderLight:i?u.colors.brandOrangeSoft:"transparent",color:l.disabled?u.colors.textTertiary:i?u.colors.brandOrangeDark:u.colors.brandOrange,border:`1px solid ${l.disabled?u.colors.border:u.colors.brandOrange}`},success:{backgroundColor:l.disabled?u.colors.border:u.colors.success,color:"white",border:"none"},warning:{backgroundColor:l.disabled?u.colors.border:u.colors.warning,color:u.colors.textPrimary,border:"none"},danger:{backgroundColor:l.disabled?u.colors.border:u.colors.danger,color:"white",border:"none"}};return r.jsx("button",{...l,onMouseEnter:d=>{var c;s(!0),(c=l.onMouseEnter)==null||c.call(l,d)},onMouseLeave:d=>{var c;s(!1),(c=l.onMouseLeave)==null||c.call(l,d)},style:{...o,...a[e]},children:t})}function wm(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState(!0),[s,o]=g.useState(""),[a,d]=g.useState(!1),[c,x]=g.useState(null),[h,y]=g.useState({mrn:"",name:"",age:"",gender:"",phone:"",address:"",referrer:"",notes:""}),[j,S]=g.useState(""),_=async()=>{if(e)try{i(!0);const p=await Z(`/patients/?search=${encodeURIComponent(j)}`,e);n(p.results||p),o("")}catch(p){o(p.message)}finally{i(!1)}};g.useEffect(()=>{_()},[e,j]);const w=async p=>{if(p.preventDefault(),!!e)try{const v={...h,age:h.age?parseInt(h.age):null};c?await vn(`/patients/${c.id}/`,e,v):await oe("/patients/",e,v),d(!1),x(null),y({mrn:"",name:"",age:"",gender:"",phone:"",address:"",referrer:"",notes:""}),_()}catch(v){o(v.message)}},f=p=>{var v;x(p),y({mrn:p.mrn,name:p.name,age:((v=p.age)==null?void 0:v.toString())||"",gender:p.gender,phone:p.phone,address:p.address,referrer:p.referrer,notes:p.notes}),d(!0)},m=async p=>{if(!(!e||!confirm("Delete this patient?")))try{await An(`/patients/${p}/`,e),_()}catch(v){o(v.message)}};return r.jsxs("div",{children:[r.jsx(ht,{title:"Patients",actions:r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Search patients...",value:j,onChange:p=>S(p.target.value),style:{padding:"8px 12px",fontSize:14,width:250,border:"1px solid #ddd",borderRadius:6}}),r.jsx(I,{variant:a?"secondary":"primary",onClick:()=>{x(null),y({mrn:"",name:"",age:"",gender:"",phone:"",address:"",referrer:"",notes:""}),d(!a)},children:a?"Cancel":"Add Patient"})]})}),s&&r.jsx(Ee,{message:s,onDismiss:()=>o("")}),a&&r.jsxs("form",{onSubmit:w,style:{background:"#f9f9f9",padding:20,borderRadius:8,marginBottom:20,display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[r.jsxs("div",{children:[r.jsx("label",{children:"Medical Record No (Generated Automatically)"}),r.jsx("input",{type:"text",value:h.mrn,disabled:!0,placeholder:"Auto-generated",style:{width:"100%",padding:8,background:"#eee"}})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Name *"}),r.jsx("input",{type:"text",value:h.name,onChange:p=>y({...h,name:p.target.value}),required:!0,style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Age"}),r.jsx("input",{type:"number",value:h.age,onChange:p=>y({...h,age:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Gender"}),r.jsxs("select",{value:h.gender,onChange:p=>y({...h,gender:p.target.value}),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Phone"}),r.jsx("input",{type:"text",value:h.phone,onChange:p=>y({...h,phone:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Address"}),r.jsx("input",{type:"text",value:h.address,onChange:p=>y({...h,address:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Referrer"}),r.jsx("input",{type:"text",value:h.referrer,onChange:p=>y({...h,referrer:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{style:{gridColumn:"1 / -1"},children:[r.jsx("label",{children:"Notes"}),r.jsx("textarea",{value:h.notes,onChange:p=>y({...h,notes:p.target.value}),style:{width:"100%",padding:8,minHeight:60}})]}),r.jsx("div",{style:{gridColumn:"1 / -1"},children:r.jsxs(I,{type:"submit",children:[c?"Update":"Create"," Patient"]})})]}),l?r.jsx("div",{style:{textAlign:"center",padding:40,color:"#666"},children:"Loading..."}):t.length===0?r.jsx("div",{style:{textAlign:"center",padding:40,color:"#999",border:"1px solid #e0e0e0",borderRadius:8},children:"No patients found."}):r.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f5f5f5"},children:[r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Medical Record No"}),r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Name"}),r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Age"}),r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Gender"}),r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Phone"}),r.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #ddd",fontWeight:600},children:"Actions"})]})}),r.jsx("tbody",{children:t.map(p=>r.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[r.jsx("td",{style:{padding:12},children:p.patient_reg_no||p.mrn}),r.jsx("td",{style:{padding:12},children:p.name}),r.jsx("td",{style:{padding:12},children:p.age||"-"}),r.jsx("td",{style:{padding:12},children:p.gender||"-"}),r.jsx("td",{style:{padding:12},children:p.phone||"-"}),r.jsx("td",{style:{padding:12},children:r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx(I,{variant:"secondary",onClick:()=>f(p),style:{padding:"4px 12px",fontSize:12},children:"Edit"}),r.jsx(I,{variant:"danger",onClick:()=>m(p.id),style:{padding:"4px 12px",fontSize:12},children:"Delete"})]})})]},p.id))})]})})]})}function Rt({message:e,onDismiss:t}){return r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#efe",border:"1px solid #cfc",borderRadius:6,color:"#3c3",marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:e}),t&&r.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"#3c3",cursor:"pointer",fontSize:18,padding:"0 8px"},children:""})]})}function km(){const{token:e}=Se(),[t,n]=g.useState(!1),[l,i]=g.useState(""),[s,o]=g.useState(""),[a,d]=g.useState({header_text:"Consultant Place Clinic",footer_text:`Adjacent Excel Labs, Near Arman Pan Shop Faisalabad Road Jaranwala
For information/Appointment: Tel: 041 4313 777 | WhatsApp: 03279640897`}),[c,x]=g.useState(""),[h,y]=g.useState("");g.useEffect(()=>{e&&j()},[e]);const j=async()=>{if(e)try{const f=await Z("/receipt-settings/",e);d(f),f.logo_image_url&&x(f.logo_image_url),f.header_image_url&&y(f.header_image_url)}catch(f){i(f.message)}},S=async()=>{if(e){n(!0),i(""),o("");try{if(!(await fetch("http://localhost:8000/api/receipt-settings/1/",{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({header_text:a.header_text,footer_text:a.footer_text})})).ok)throw new Error("Failed to update receipt text");o("Receipt text updated successfully!"),setTimeout(()=>o(""),3e3)}catch(f){i(f.message||"Failed to update receipt text")}finally{n(!1)}}},_=async f=>{var m;if(!(!e||!((m=f.target.files)!=null&&m[0]))){n(!0),i(""),o("");try{const p="http://localhost:8000/api",v=new FormData;v.append("logo_image",f.target.files[0]);const b=await fetch(`${p}/receipt-settings/logo/`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:v});if(!b.ok)throw new Error("Failed to upload logo");const E=await b.json();d(E),E.logo_image_url&&x(E.logo_image_url),o("Logo uploaded successfully!"),setTimeout(()=>o(""),3e3)}catch(p){i(p.message||"Failed to upload logo")}finally{n(!1)}}},w=async f=>{var m;if(!(!e||!((m=f.target.files)!=null&&m[0]))){n(!0),i(""),o("");try{const p="http://localhost:8000/api",v=new FormData;v.append("header_image",f.target.files[0]);const b=await fetch(`${p}/receipt-settings/header-image/`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:v});if(!b.ok)throw new Error("Failed to upload header image");const E=await b.json();d(E),E.header_image_url&&y(E.header_image_url),o("Header image uploaded successfully!"),setTimeout(()=>o(""),3e3)}catch(p){i(p.message||"Failed to upload header image")}finally{n(!1)}}};return r.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[r.jsx(ht,{title:"Receipt Branding Settings"}),l&&r.jsx(Ee,{message:l,onDismiss:()=>i("")}),s&&r.jsx(Rt,{message:s,onDismiss:()=>o("")}),r.jsxs("div",{style:{background:"#f9f9f9",padding:20,borderRadius:8,marginBottom:20},children:[r.jsx("h2",{style:{marginTop:0},children:"Header & Footer Text"}),r.jsxs("div",{style:{marginBottom:15},children:[r.jsx("label",{style:{display:"block",marginBottom:8},children:"Header Text"}),r.jsx("input",{type:"text",value:a.header_text,onChange:f=>d({...a,header_text:f.target.value}),style:{width:"100%",padding:8},placeholder:"Consultant Place Clinic"})]}),r.jsxs("div",{style:{marginBottom:15},children:[r.jsx("label",{style:{display:"block",marginBottom:8},children:"Footer Text"}),r.jsx("textarea",{value:a.footer_text||"",onChange:f=>d({...a,footer_text:f.target.value}),style:{width:"100%",padding:8,minHeight:100},placeholder:`Adjacent Excel Labs, Near Arman Pan Shop Faisalabad Road Jaranwala
For information/Appointment: Tel: 041 4313 777 | WhatsApp: 03279640897`})]}),r.jsx(I,{onClick:S,disabled:t,children:t?"Saving...":"Save Receipt Text"})]}),r.jsxs("div",{style:{background:"#f9f9f9",padding:20,borderRadius:8,marginBottom:20},children:[r.jsx("h2",{style:{marginTop:0},children:"Logo Image"}),c&&r.jsxs("div",{style:{marginBottom:15},children:[r.jsx("p",{children:"Current Logo:"}),r.jsx("img",{src:c,alt:"Logo preview",style:{maxWidth:200,maxHeight:200,border:"1px solid #ddd",padding:10}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:8},children:"Upload Logo"}),r.jsx("input",{type:"file",accept:"image/*",onChange:_,disabled:t,style:{marginBottom:10}}),r.jsx("p",{style:{fontSize:12,color:"#666"},children:"Recommended: Square image, max 200x200px"})]})]}),r.jsxs("div",{style:{background:"#f9f9f9",padding:20,borderRadius:8},children:[r.jsx("h2",{style:{marginTop:0},children:"Header Image (Banner)"}),h&&r.jsxs("div",{style:{marginBottom:15},children:[r.jsx("p",{children:"Current Header Image:"}),r.jsx("img",{src:h,alt:"Header preview",style:{maxWidth:"100%",maxHeight:300,border:"1px solid #ddd",padding:10}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:8},children:"Upload Header Image"}),r.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:t,style:{marginBottom:10}}),r.jsx("p",{style:{fontSize:12,color:"#666"},children:"Recommended: Wide banner image, 1200x200px or similar aspect ratio"})]})]})]})}function bm(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState(""),[s,o]=g.useState(""),[a,d]=g.useState(""),[c,x]=g.useState(null),[h,y]=g.useState([]),[j,S]=g.useState(!1),[_,w]=g.useState(""),[f,m]=g.useState("");g.useEffect(()=>{e&&(p(),v())},[e]);const p=async()=>{if(e)try{const k=await Z("/consultants/",e);n(k.results||k||[])}catch(k){w(k.message||"Failed to load consultants")}},v=async()=>{if(e)try{const k=await Z("/consultant-settlements/",e);y(k.results||k||[])}catch(k){w(k.message||"Failed to load settlements")}},b=async()=>{if(e){if(!l||!s||!a){w("Select a consultant and date range before previewing.");return}S(!0),w("");try{const k=await Z(`/consultant-settlements/preview/?consultant_id=${l}&date_from=${s}&date_to=${a}`,e);x(k)}catch(k){w(k.message||"Failed to preview settlement")}finally{S(!1)}}},E=async()=>{if(e){if(!l||!s||!a){w("Select a consultant and date range before creating a draft.");return}S(!0),w("");try{const k=await oe("/consultant-settlements/",e,{consultant_id:l,date_from:s,date_to:a});return m("Settlement draft created."),x(null),await v(),k}catch(k){w(k.message||"Failed to create draft settlement")}finally{S(!1)}}},z=async k=>{if(e&&window.confirm("Finalize this settlement? This action cannot be undone.")){S(!0),w("");try{await oe(`/consultant-settlements/${k}/finalize/`,e,{}),m("Settlement finalized."),await v()}catch(F){w(F.message||"Failed to finalize settlement")}finally{S(!1)}}};return r.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[r.jsx(ht,{title:"Consultant Settlements"}),_&&r.jsx(Ee,{message:_,onDismiss:()=>w("")}),f&&r.jsx(Rt,{message:f,onDismiss:()=>m("")}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,padding:20,borderRadius:8,marginBottom:24},children:[r.jsx("h2",{children:"Settlement Preview"}),r.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Consultant"}),r.jsxs("select",{value:l,onChange:k=>i(k.target.value),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"",children:"Select consultant"}),t.map(k=>r.jsx("option",{value:k.id,children:k.display_name},k.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Date From"}),r.jsx("input",{type:"date",value:s,onChange:k=>o(k.target.value),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Date To"}),r.jsx("input",{type:"date",value:a,onChange:k=>d(k.target.value),style:{width:"100%",padding:8}})]})]}),r.jsxs("div",{style:{marginTop:16,display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx(I,{onClick:b,disabled:j,children:"Preview"}),r.jsx(I,{variant:"secondary",onClick:E,disabled:j,children:"Create Draft"})]})]}),c&&r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,padding:20,borderRadius:8,marginBottom:24},children:[r.jsx("h3",{children:"Preview Totals"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:16},children:[r.jsx("div",{children:"Consultant Split (%):"}),r.jsx("div",{children:r.jsxs("strong",{children:[c.consultant_percent,"%"]})}),r.jsx("div",{children:"Gross Collected:"}),r.jsx("div",{children:r.jsxs("strong",{children:["Rs. ",c.gross_collected]})}),r.jsx("div",{children:"Consultant Payable:"}),r.jsx("div",{children:r.jsxs("strong",{children:["Rs. ",c.consultant_payable]})}),r.jsx("div",{children:"Clinic Share:"}),r.jsx("div",{children:r.jsxs("strong",{children:["Rs. ",c.clinic_share]})})]}),r.jsx("h4",{children:"Line Preview"}),c.lines.length===0?r.jsx("div",{style:{color:u.colors.textTertiary},children:"No consultant-assigned items found."}):r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{textAlign:"left",borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("th",{style:{padding:8},children:"Visit"}),r.jsx("th",{style:{padding:8},children:"Patient"}),r.jsx("th",{style:{padding:8},children:"Service"}),r.jsx("th",{style:{padding:8},children:"Item Amount"}),r.jsx("th",{style:{padding:8},children:"Paid Amount"}),r.jsx("th",{style:{padding:8},children:"Consultant Share"}),r.jsx("th",{style:{padding:8},children:"Clinic Share"})]})}),r.jsx("tbody",{children:c.lines.map(k=>r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("td",{style:{padding:8},children:k.visit_id}),r.jsx("td",{style:{padding:8},children:k.patient_name}),r.jsx("td",{style:{padding:8},children:k.service_name}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.item_amount_snapshot]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.paid_amount_snapshot]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.consultant_share_snapshot]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.clinic_share_snapshot]})]},k.service_item_id))})]})})]}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,padding:20,borderRadius:8},children:[r.jsx("h3",{children:"Settlement History"}),h.length===0?r.jsx("div",{style:{color:u.colors.textTertiary},children:"No settlements created yet."}):r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{textAlign:"left",borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("th",{style:{padding:8},children:"Consultant"}),r.jsx("th",{style:{padding:8},children:"Date Range"}),r.jsx("th",{style:{padding:8},children:"Gross"}),r.jsx("th",{style:{padding:8},children:"Consultant Payable"}),r.jsx("th",{style:{padding:8},children:"Clinic Share"}),r.jsx("th",{style:{padding:8},children:"Status"}),r.jsx("th",{style:{padding:8},children:"Actions"})]})}),r.jsx("tbody",{children:h.map(k=>r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("td",{style:{padding:8},children:k.consultant_name}),r.jsxs("td",{style:{padding:8},children:[k.date_from,"  ",k.date_to]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.gross_collected]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.net_payable]}),r.jsxs("td",{style:{padding:8},children:["Rs. ",k.clinic_share]}),r.jsx("td",{style:{padding:8},children:k.status}),r.jsx("td",{style:{padding:8},children:k.status==="DRAFT"?r.jsx(I,{variant:"secondary",onClick:()=>z(k.id),disabled:j,children:"Finalize"}):r.jsx("span",{style:{color:u.colors.textTertiary},children:""})})]},k.id))})]})})]})]})}function Cm(){var L;const{token:e}=Se();qe();const[t,n]=g.useState([]),[l,i]=g.useState(""),[s,o]=g.useState(!1),[a,d]=g.useState(null),[c,x]=g.useState({display_name:"",mobile_number:"",email:"",degrees:"",designation:"",is_active:!0}),[h,y]=g.useState([]),[j,S]=g.useState({consultant_percent:"",consultant_fixed_amount:"",rule_type:"PERCENT_SPLIT",active_from:"",service_id:""}),[_,w]=g.useState([]),[f,m]=g.useState(""),[p,v]=g.useState(!1);g.useEffect(()=>{e&&(E(),b())},[e]);const b=async()=>{try{const R=await Z("/services/",e);w(R.results||R||[])}catch(R){console.error("Failed to load services",R)}},E=async()=>{try{o(!0);const R=await Z("/consultants/",e);n(R.results||R)}catch(R){i(R.message||"Failed to load consultants")}finally{o(!1)}},z=async R=>{try{const q=await Z(`/consultants/${R}/rules/`,e);y(q.results||q)}catch(q){console.error("Failed to load rules",q)}},k=R=>{d(R.id),x({display_name:R.display_name,mobile_number:R.mobile_number,email:R.email,degrees:R.degrees,designation:R.designation,is_active:R.is_active}),y([]),z(R.id)},F=()=>{d(null),x({display_name:"",mobile_number:"",email:"",degrees:"",designation:"",is_active:!0}),y([])},T=async()=>{if(!c.display_name){i("Name is required");return}try{o(!0),a&&a!=="new"?await vn(`/consultants/${a}/`,e,c):await oe("/consultants/",e,c),d(null),x({display_name:"",mobile_number:"",email:"",degrees:"",designation:"",is_active:!0}),E()}catch(R){i(R.message||"Failed to save consultant")}finally{o(!1)}},$=async R=>{if(confirm("Are you sure you want to delete this rule?"))try{await An(`/consultants/${a}/rules/${R}/`,e),z(a)}catch(q){alert(q.message||"Failed to delete rule")}},J=async()=>{if(!(!a||a==="new")){if(j.rule_type==="PERCENT_SPLIT"&&!j.consultant_percent){alert("Percentage is required");return}if(j.rule_type==="FIXED_AMOUNT"&&!j.consultant_fixed_amount){alert("Fixed Amount is required");return}try{const R={active_from:j.active_from||null,rule_type:j.rule_type};j.rule_type==="PERCENT_SPLIT"?R.consultant_percent=j.consultant_percent:R.consultant_fixed_amount=j.consultant_fixed_amount,j.service_id&&(R.service_id=j.service_id),await oe(`/consultants/${a}/rules/`,e,R),S({consultant_percent:"",consultant_fixed_amount:"",active_from:"",service_id:"",rule_type:"PERCENT_SPLIT"}),m(""),z(a)}catch(R){alert(R.message||"Failed to add rule")}}},Q=_.filter(R=>{if(!f)return!1;const q=f.toLowerCase();return R.name.toLowerCase().includes(q)||R.code&&R.code.toLowerCase().includes(q)}).slice(0,10);return r.jsxs("div",{style:{maxWidth:800},children:[r.jsx(ht,{title:"Consultants"}),l&&r.jsx(Ee,{message:l,onDismiss:()=>i("")}),a?r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,padding:20,borderRadius:8,background:"white"},children:[r.jsx("h3",{children:a==="new"?"Add New Consultant":"Edit Consultant"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Name"}),r.jsx("input",{style:{width:"100%",padding:8},value:c.display_name,onChange:R=>x({...c,display_name:R.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Designation"}),r.jsx("input",{style:{width:"100%",padding:8},value:c.designation,onChange:R=>x({...c,designation:R.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Degrees"}),r.jsx("input",{style:{width:"100%",padding:8},value:c.degrees,onChange:R=>x({...c,degrees:R.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Mobile"}),r.jsx("input",{style:{width:"100%",padding:8},value:c.mobile_number,onChange:R=>x({...c,mobile_number:R.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Email"}),r.jsx("input",{style:{width:"100%",padding:8},value:c.email,onChange:R=>x({...c,email:R.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Status"}),r.jsxs("select",{style:{width:"100%",padding:8},value:c.is_active?"true":"false",onChange:R=>x({...c,is_active:R.target.value==="true"}),children:[r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20},children:[r.jsx(I,{onClick:T,disabled:s,children:"Save"}),r.jsx(I,{variant:"secondary",onClick:F,children:"Cancel"})]}),a!=="new"&&r.jsxs(r.Fragment,{children:[r.jsx("hr",{style:{border:"none",borderTop:`1px solid ${u.colors.border}`,margin:"20px 0"}}),r.jsx("h4",{children:"Billing Rules"}),r.jsx("p",{style:{fontSize:13,color:u.colors.textSecondary},children:"Set the global rules or specific service overrides."}),r.jsxs("div",{style:{background:u.colors.backgroundGray,padding:10,borderRadius:6,marginBottom:12},children:[r.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[r.jsxs("div",{style:{flex:1,position:"relative"},children:[r.jsx("label",{style:{fontSize:11},children:"Service Override (Leave blank for Global)"}),r.jsx("input",{placeholder:"Search Service...",value:f,onFocus:()=>v(!0),onBlur:()=>setTimeout(()=>v(!1),200),onChange:R=>{m(R.target.value),j.service_id&&S({...j,service_id:""})},style:{width:"100%",padding:6,fontSize:13}}),j.service_id&&r.jsxs("span",{style:{fontSize:10,color:"green",fontWeight:"bold"},children:["Selected: ",((L=_.find(R=>R.id===j.service_id))==null?void 0:L.name)||j.service_id]}),p&&f&&r.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #ccc",zIndex:10,maxHeight:200,overflowY:"auto"},children:[Q.map(R=>r.jsxs("div",{style:{padding:8,cursor:"pointer",borderBottom:"1px solid #eee"},onClick:()=>{S({...j,service_id:R.id}),m(R.name),v(!1)},children:[R.name," ",r.jsxs("small",{children:["(",R.code,")"]})]},R.id)),Q.length===0&&r.jsx("div",{style:{padding:8},children:"No results"})]})]}),r.jsxs("div",{style:{width:140},children:[r.jsx("label",{style:{fontSize:11},children:"Rule Type"}),r.jsxs("select",{value:j.rule_type,onChange:R=>S({...j,rule_type:R.target.value}),style:{width:"100%",padding:6,fontSize:13},children:[r.jsx("option",{value:"PERCENT_SPLIT",children:"Percentage"}),r.jsx("option",{value:"FIXED_AMOUNT",children:"Fixed Amount"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"flex-end"},children:[j.rule_type==="PERCENT_SPLIT"?r.jsxs("div",{style:{width:120},children:[r.jsx("label",{style:{fontSize:11},children:"Percent %"}),r.jsx("input",{type:"number",value:j.consultant_percent,onChange:R=>S({...j,consultant_percent:R.target.value}),style:{width:"100%",padding:6,fontSize:13}})]}):r.jsxs("div",{style:{width:120},children:[r.jsx("label",{style:{fontSize:11},children:"Fixed Amount"}),r.jsx("input",{type:"number",value:j.consultant_fixed_amount,onChange:R=>S({...j,consultant_fixed_amount:R.target.value}),style:{width:"100%",padding:6,fontSize:13}})]}),r.jsxs("div",{style:{width:140},children:[r.jsx("label",{style:{fontSize:11},children:"Active From"}),r.jsx("input",{type:"date",value:j.active_from,onChange:R=>S({...j,active_from:R.target.value}),style:{width:"100%",padding:6,fontSize:13}})]}),r.jsx(I,{onClick:J,children:"Add Rule"})]})]}),r.jsxs("table",{style:{width:"100%",fontSize:14},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{textAlign:"left",color:u.colors.textSecondary},children:[r.jsx("th",{children:"Service"}),r.jsx("th",{children:"Rule (Percent / Fixed)"}),r.jsx("th",{children:"Active From"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:h.map(R=>r.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[r.jsx("td",{style:{padding:6},children:R.service_name||r.jsx("span",{style:{fontWeight:"bold"},children:"Global Default"})}),r.jsx("td",{style:{padding:6},children:R.rule_type==="FIXED_AMOUNT"?`${R.consultant_fixed_amount} PKR`:`${R.consultant_percent}%`}),r.jsx("td",{style:{padding:6},children:R.active_from||"Always"}),r.jsx("td",{style:{padding:6},children:r.jsx("button",{onClick:()=>$(R.id),style:{color:u.colors.danger,border:"none",background:"none",cursor:"pointer"},children:"Remove"})})]},R.id))})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginBottom:16},children:r.jsx(I,{onClick:()=>{d("new"),x({display_name:"New Consultant",mobile_number:"",email:"",degrees:"",designation:"",is_active:!0})},children:"Add Consultant"})}),r.jsx("div",{style:{display:"grid",gap:12},children:t.map(R=>r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,padding:16,borderRadius:8,background:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold"},children:R.display_name}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textSecondary},children:[R.designation," ",R.degrees?` ${R.degrees}`:""]}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textTertiary},children:[R.mobile_number," ",R.email?` ${R.email}`:""]})]}),r.jsx("div",{children:r.jsx(I,{variant:"secondary",onClick:()=>k(R),children:"Edit & Settings"})})]},R.id))})]})]})}const Tf="rims:service-usage",Em=e=>{const t={fatherHusband:"",cnic:"",comments:"",extraNotes:""};if(!e)return t;const n=e.split(`
`).map(i=>i.trim()).filter(Boolean),l=[];return n.forEach(i=>{i.toLowerCase().startsWith("father/husband:")?t.fatherHusband=i.replace(/father\/husband:/i,"").trim():i.toLowerCase().startsWith("cnic:")?t.cnic=i.replace(/cnic:/i,"").trim():i.toLowerCase().startsWith("comments:")?t.comments=i.replace(/comments:/i,"").trim():l.push(i)}),!t.comments&&l.length>0&&(t.comments=l.join(`
`)),t.extraNotes=l.join(`
`),t},Rm=(e,t)=>{const n=(e||"").split(`
`).filter(i=>!i.toLowerCase().startsWith("father/husband:")&&!i.toLowerCase().startsWith("cnic:")&&!i.toLowerCase().startsWith("comments:")).join(`
`).trim(),l=[];return t.fatherHusband.trim()&&l.push(`Father/Husband: ${t.fatherHusband.trim()}`),t.cnic.trim()&&l.push(`CNIC: ${t.cnic.trim()}`),t.comments.trim()&&l.push(`Comments: ${t.comments.trim()}`),[n,l.join(`
`)].filter(Boolean).join(`
`)},Md=e=>{if(!e)return{years:"",months:"",days:""};const t=new Date(e);if(Number.isNaN(t.getTime()))return{years:"",months:"",days:""};const n=new Date;let l=n.getFullYear()-t.getFullYear(),i=n.getMonth()-t.getMonth(),s=n.getDate()-t.getDate();if(s<0){i-=1;const o=new Date(n.getFullYear(),n.getMonth(),0);s+=o.getDate()}return i<0&&(l-=1,i+=12),{years:l>=0?String(l):"",months:i>=0?String(i):"",days:s>=0?String(s):""}},Tm=()=>{try{const e=localStorage.getItem(Tf);return e?JSON.parse(e):{}}catch{return{}}},Pm=e=>{const t=Tm();t[e]=(t[e]||0)+1,localStorage.setItem(Tf,JSON.stringify(t))},H={container:{maxWidth:1400,margin:"0 auto",padding:"0 20px 20px 20px",fontFamily:u.typography.fontFamily,color:"#334155"},topBar:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingBottom:10,borderBottom:"1px solid #e2e8f0"},globalSearch:{position:"relative",width:400},searchInput:{width:"100%",padding:"10px 16px",borderRadius:8,border:"1px solid #cbd5e1",fontSize:14,outline:"none",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",transition:"border-color 0.2s"},searchResults:{position:"absolute",top:"calc(100% + 4px)",left:0,right:0,background:"#fff",border:"1px solid #e2e8f0",borderRadius:8,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",maxHeight:300,overflowY:"auto",zIndex:50},resultItem:{padding:"10px 16px",cursor:"pointer",borderBottom:"1px solid #f1f5f9",display:"flex",flexDirection:"column",gap:2},grid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,alignItems:"start"},card:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:12,padding:24,boxShadow:"0 1px 3px rgba(0,0,0,0.05)",height:"100%",display:"flex",flexDirection:"column"},cardHeader:{fontSize:18,fontWeight:600,marginBottom:20,color:"#0f172a",display:"flex",justifyContent:"space-between",alignItems:"center"},sectionLabel:{fontSize:12,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600,color:"#64748b",marginBottom:12,marginTop:8,borderBottom:"1px solid #f1f5f9",paddingBottom:4},label:{display:"block",marginBottom:6,fontSize:13,fontWeight:500,color:"#475569"},input:{width:"100%",padding:"8px 12px",borderRadius:6,border:"1px solid #cbd5e1",fontSize:14,outline:"none",height:38,transition:"border-color 0.2s"},row:{display:"flex",gap:12},serviceItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#f8fafc",borderRadius:6,marginBottom:8,border:"1px solid #e2e8f0"},billRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8,fontSize:14},totalRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:16,paddingTop:16,borderTop:"1px solid #e2e8f0",fontSize:16,fontWeight:600,color:"#0f172a"},dueRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12,padding:"12px",background:"#fff1f2",borderRadius:6,color:"#be123c",fontWeight:700,fontSize:16},disabledOverlay:{opacity:.5,pointerEvents:"none",filter:"grayscale(100%)"}};function zm(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState([]),[s,o]=g.useState(!1),[a,d]=g.useState(""),[c,x]=g.useState(""),[h,y]=g.useState(!1),[j,S]=g.useState(""),[_,w]=g.useState([]),[f,m]=g.useState(!1),[p,v]=g.useState(-1),[b,E]=g.useState(null),[z,k]=g.useState({name:"",gender:"",date_of_birth:"",ageYears:"",ageMonths:"",ageDays:"",phone:"",email:"",address:"",fatherHusband:"",cnic:"",comments:""}),[F,T]=g.useState([]),[$,J]=g.useState(""),[Q,L]=g.useState(-1),[R,q]=g.useState(""),[ce,C]=g.useState(""),[M,O]=g.useState(""),[Y,P]=g.useState(""),[G,ee]=g.useState(""),[ie,he]=g.useState("cash"),ve=g.useRef(null),Ae=g.useRef(null);g.useEffect(()=>{e&&(ae(),Tt())},[e]),g.useEffect(()=>{if(!e||!j.trim()){w([]);return}const N=setTimeout(()=>{Ut(j)},300);return()=>clearTimeout(N)},[j,e]);const B=g.useMemo(()=>F.reduce((N,V)=>{const D=typeof V.price=="number"?V.price:parseFloat(V.price)||0;return N+D},0),[F]),re=g.useMemo(()=>{const N=parseFloat(Y)||0;return Math.max(0,B-N)},[B,Y]);g.useEffect(()=>{B>0&&!G&&ee(re.toFixed(2)),ee(re.toFixed(2))},[re,B]);const ae=async()=>{try{const N=await Z("/services/",e);n(N.results||N||[])}catch(N){console.error(N)}},Tt=async()=>{try{const N=await Z("/consultants/",e);i(N.results||N||[])}catch(N){console.error(N)}},Ut=async N=>{var V;m(!0);try{const D=await Z(`/patients/?search=${encodeURIComponent(N)}`,e);w(D.results||D||[]),v((V=D.results)!=null&&V.length?0:-1)}catch(D){console.error(D)}finally{m(!1)}},it=N=>{const V=Em(N.notes),D=N.date_of_birth?Md(N.date_of_birth):null;E(N),k({name:N.name||"",gender:N.gender||"",date_of_birth:N.date_of_birth||"",ageYears:(D==null?void 0:D.years)||(N.age?String(N.age):""),ageMonths:(D==null?void 0:D.months)||"",ageDays:(D==null?void 0:D.days)||"",phone:N.phone||"",email:"",address:N.address||"",fatherHusband:V.fatherHusband,cnic:V.cnic,comments:V.comments}),S(""),w([]),y(!0)},_t=()=>{E(null),y(!1),k({name:"",gender:"",date_of_birth:"",ageYears:"",ageMonths:"",ageDays:"",phone:"",email:"",address:"",fatherHusband:"",cnic:"",comments:""}),T([]),P(""),O(""),ee("")},st=async()=>{if(e){if(!z.name.trim()||!z.phone.trim()||!z.gender){d("Name, Mobile, and Gender are required.");return}o(!0),d("");try{const N={name:z.name.trim(),gender:z.gender,phone:z.phone.trim(),address:z.address.trim()};z.date_of_birth&&(N.date_of_birth=z.date_of_birth),z.ageYears&&(N.age=parseInt(z.ageYears,10));const V=Rm(b==null?void 0:b.notes,{fatherHusband:z.fatherHusband,cnic:z.cnic,comments:z.comments,extraNotes:""});V&&(N.notes=V);let D;b?D=await vn(`/patients/${b.id}/`,e,N):D=await oe("/patients/",e,N),E(D),y(!0),x("Patient saved. Proceed to add services."),setTimeout(()=>{var U;return(U=ve.current)==null?void 0:U.focus()},100)}catch(N){d(N.message||"Failed to save patient.")}finally{o(!1)}}},$e=g.useMemo(()=>{const N=$.trim().toLowerCase();return N?t.filter(V=>{var D;return V.is_active&&(V.name.toLowerCase().includes(N)||((D=V.code)==null?void 0:D.toLowerCase().includes(N)))}).slice(0,10):[]},[$,t]),jn=N=>{var V;F.find(D=>D.id===N.id)||(T([...F,N]),Pm(N.id),J(""),L(-1),(V=ve.current)==null||V.focus())},$n=N=>{O(N);const V=parseFloat(N);if(isNaN(V))P("");else{const D=B*V/100;P(D.toFixed(2))}},X=N=>{P(N);const V=parseFloat(N);if(!isNaN(V)&&B>0){const D=V/B*100;O(D.toFixed(2))}else O(B===0?"0":"")},Pe=re-(parseFloat(G)||0),Ve=async(N=!1)=>{if(!e||!b||F.length===0){d("Please ensure patient is saved and services are added.");return}o(!0),d("");try{const V={patient_id:b.id,service_ids:F.map(U=>U.id),booked_consultant_id:R||null,referring_consultant:ce,subtotal:B,total_amount:B,discount:parseFloat(Y)||0,discount_percentage:parseFloat(M)||0,net_amount:re,amount_paid:parseFloat(G)||0,payment_method:ie},D=await oe("/workflow/visits/create_visit/",e,V);x(`Visit created: ${D.visit_id}`),_t(),N&&On(D.id,D.visit_id)}catch(V){d(V.message||"Failed to create visit.")}finally{o(!1)}},On=(N,V)=>{const U=`/api/pdf/${N}/receipt/`,K=window.open(U,"_blank");K&&(K.onload=()=>K.print())},Sn=N=>{if(N.key==="ArrowDown")N.preventDefault(),v(V=>Math.min(V+1,_.length-1));else if(N.key==="ArrowUp")N.preventDefault(),v(V=>Math.max(V-1,0));else if(N.key==="Enter"&&p>=0){N.preventDefault();const V=_[p];V&&it(V)}},_n=N=>{N.key==="ArrowDown"?(N.preventDefault(),L(V=>Math.min(V+1,$e.length-1))):N.key==="ArrowUp"?(N.preventDefault(),L(V=>Math.max(V-1,0))):N.key==="Enter"&&(N.preventDefault(),Q>=0&&$e[Q]?jn($e[Q]):$e.length>0&&jn($e[0]))};return r.jsxs("div",{style:H.container,children:[r.jsx(ht,{title:"New Registration"}),a&&r.jsx(Ee,{message:a,onDismiss:()=>d("")}),c&&r.jsx(Rt,{message:c,onDismiss:()=>x("")}),r.jsxs("div",{style:H.topBar,children:[r.jsx("div",{})," ",r.jsxs("div",{style:H.globalSearch,children:[r.jsx("input",{ref:Ae,type:"text",placeholder:"Search patient by name, mobile, or Reg #",value:j,onChange:N=>S(N.target.value),onKeyDown:Sn,style:H.searchInput}),_.length>0&&r.jsx("div",{style:H.searchResults,children:_.map((N,V)=>r.jsxs("div",{style:{...H.resultItem,background:V===p?"#f1f5f9":"transparent"},onClick:()=>it(N),onMouseEnter:()=>v(V),children:[r.jsx("span",{style:{fontWeight:600,color:"#334155"},children:N.name}),r.jsxs("span",{style:{fontSize:12,color:"#64748b"},children:[N.phone," | ",N.mrn]})]},N.id))})]})]}),r.jsxs("div",{style:H.grid,children:[r.jsxs("div",{style:H.card,children:[r.jsxs("div",{style:H.cardHeader,children:[r.jsx("span",{children:"Patient Details"}),h&&r.jsx(I,{onClick:()=>y(!1),variant:"secondary",style:{fontSize:12,padding:"4px 8px"},children:"Edit"})]}),r.jsxs("div",{style:{flex:1,pointerEvents:h?"none":"auto",opacity:h?.8:1},children:[r.jsx("div",{style:H.sectionLabel,children:"Identity"}),r.jsxs("div",{style:H.row,children:[r.jsxs("div",{style:{flex:2},children:[r.jsx("label",{style:H.label,children:"Full Name *"}),r.jsx("input",{style:H.input,value:z.name,onChange:N=>k({...z,name:N.target.value}),placeholder:"e.g. John Doe"})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Gender *"}),r.jsxs("select",{style:H.input,value:z.gender,onChange:N=>k({...z,gender:N.target.value}),children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"Male",children:"Male"}),r.jsx("option",{value:"Female",children:"Female"}),r.jsx("option",{value:"Other",children:"Other"})]})]})]}),r.jsxs("div",{style:{...H.row,marginTop:12},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Date of Birth"}),r.jsx("input",{type:"date",style:H.input,value:z.date_of_birth,onChange:N=>{const V=N.target.value,D=Md(V);k({...z,date_of_birth:V,ageYears:D.years,ageMonths:D.months,ageDays:D.days})}})]}),r.jsxs("div",{style:{flex:1.5},children:[r.jsx("label",{style:H.label,children:"Age (Y / M / D)"}),r.jsxs("div",{style:{display:"flex",gap:4},children:[r.jsx("input",{type:"number",placeholder:"Y",style:{...H.input,textAlign:"center"},value:z.ageYears,onChange:N=>k({...z,ageYears:N.target.value})}),r.jsx("input",{type:"number",placeholder:"M",style:{...H.input,textAlign:"center"},value:z.ageMonths,onChange:N=>k({...z,ageMonths:N.target.value})}),r.jsx("input",{type:"number",placeholder:"D",style:{...H.input,textAlign:"center"},value:z.ageDays,onChange:N=>k({...z,ageDays:N.target.value})})]})]})]}),r.jsx("div",{style:{...H.sectionLabel,marginTop:24},children:"Contact"}),r.jsxs("div",{style:H.row,children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Mobile Number *"}),r.jsx("input",{style:H.input,value:z.phone,onChange:N=>k({...z,phone:N.target.value}),placeholder:"0300-1234567"})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Email (Optional)"}),r.jsx("input",{style:H.input,value:z.email,onChange:N=>k({...z,email:N.target.value})})]})]}),r.jsxs("div",{style:{marginTop:12},children:[r.jsx("label",{style:H.label,children:"Address"}),r.jsx("textarea",{style:{...H.input,height:60,resize:"none"},value:z.address,onChange:N=>k({...z,address:N.target.value})})]}),r.jsx("div",{style:{...H.sectionLabel,marginTop:24},children:"Additional Info"}),r.jsxs("div",{style:H.row,children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Father/Husband Name"}),r.jsx("input",{style:H.input,value:z.fatherHusband,onChange:N=>k({...z,fatherHusband:N.target.value})})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"CNIC / National ID"}),r.jsx("input",{style:H.input,value:z.cnic,onChange:N=>k({...z,cnic:N.target.value})})]})]})]}),r.jsxs("div",{style:{marginTop:24,paddingTop:16,borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"flex-end",gap:12},children:[r.jsx(I,{variant:"secondary",onClick:_t,children:"Clear"}),!h&&r.jsx(I,{onClick:st,disabled:s,children:s?"Saving...":"Save Patient & Continue"})]})]}),r.jsxs("div",{style:{...H.card,...h?{}:H.disabledOverlay},children:[r.jsx("div",{style:H.cardHeader,children:"Services & Billing"}),r.jsxs("div",{style:{position:"relative",marginBottom:20},children:[r.jsx("label",{style:H.label,children:"Add Service / Test"}),r.jsx("input",{ref:ve,style:H.input,placeholder:"Type test name or code (e.g. CBC, Lipid)...",value:$,onChange:N=>J(N.target.value),onKeyDown:_n,disabled:!h}),$&&$e.length>0&&r.jsx("div",{style:H.searchResults,children:$e.map((N,V)=>r.jsxs("div",{style:{...H.resultItem,background:V===Q?"#f1f5f9":"transparent"},onClick:()=>jn(N),onMouseEnter:()=>L(V),children:[r.jsx("span",{style:{fontWeight:600},children:N.name}),r.jsxs("span",{style:{fontSize:12,color:"#64748b"},children:[N.code," | ",N.price," PKR"]})]},N.id))})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",marginBottom:20,maxHeight:300},children:[F.map((N,V)=>r.jsxs("div",{style:H.serviceItem,children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:14},children:N.name}),r.jsx("div",{style:{fontSize:12,color:"#64748b"},children:N.code})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.jsx("span",{style:{fontWeight:600},children:N.price}),r.jsx("button",{onClick:()=>T(D=>D.filter((U,K)=>K!==V)),style:{border:"none",background:"none",color:"#ef4444",cursor:"pointer"},children:""})]})]},V)),F.length===0&&r.jsx("div",{style:{textAlign:"center",color:"#94a3b8",padding:20,fontStyle:"italic"},children:"No services added yet."})]}),r.jsxs("div",{style:H.row,children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Consultant"}),r.jsxs("select",{style:H.input,value:R,onChange:N=>q(N.target.value),children:[r.jsx("option",{value:"",children:"None / Walk-in"}),l.map(N=>r.jsx("option",{value:N.id,children:N.display_name},N.id))]})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:H.label,children:"Referring Dr."}),r.jsx("input",{style:H.input,placeholder:"External doctor name",value:ce,onChange:N=>C(N.target.value)})]})]}),r.jsxs("div",{style:{marginTop:24,padding:16,background:"#f8fafc",borderRadius:8},children:[r.jsxs("div",{style:H.billRow,children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{style:{fontWeight:600},children:B.toFixed(2)})]}),r.jsxs("div",{style:H.billRow,children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:["Discount",r.jsxs("div",{style:{display:"flex",gap:4},children:[r.jsx("input",{placeholder:"%",style:{...H.input,width:50,height:28,padding:4},value:M,onChange:N=>$n(N.target.value)}),r.jsx("input",{placeholder:"PKR",style:{...H.input,width:70,height:28,padding:4},value:Y,onChange:N=>X(N.target.value)})]})]}),r.jsxs("span",{style:{color:"#ef4444"},children:["-",parseFloat(Y||"0").toFixed(2)]})]}),r.jsxs("div",{style:H.totalRow,children:[r.jsx("span",{children:"Net Payable"}),r.jsx("span",{children:re.toFixed(2)})]}),r.jsxs("div",{style:{...H.billRow,marginTop:12},children:[r.jsx("span",{style:{alignSelf:"center"},children:"Amount Paid"}),r.jsx("input",{style:{...H.input,width:120,textAlign:"right",fontWeight:600},value:G,onChange:N=>ee(N.target.value)})]}),Pe>0&&r.jsxs("div",{style:H.dueRow,children:[r.jsx("span",{children:"DUE AMOUNT"}),r.jsx("span",{children:Pe.toFixed(2)})]})]}),r.jsxs("div",{style:{marginTop:20,display:"flex",gap:12},children:[r.jsx(I,{onClick:()=>Ve(!0),disabled:s||F.length===0,style:{flex:1},children:"Save & Print Receipt"}),r.jsx(I,{onClick:()=>Ve(!1),disabled:s||F.length===0,variant:"secondary",children:"Save Only"})]})]})]})]})}const Nm=[{value:"",label:"All statuses"},{value:"registered",label:"Registered"},{value:"services_added",label:"Services added"},{value:"paid",label:"Paid"},{value:"sample_collected",label:"Sample collected"},{value:"report_pending",label:"Report pending"},{value:"report_ready",label:"Report ready"},{value:"report_published",label:"Report published"}],Wd="/api",Lm=e=>e?e.startsWith("http")?e:e.startsWith("/api")?`${Wd.replace(/\/api$/,"")}${e}`:`${Wd}${e.startsWith("/")?"":"/"}${e}`:"";function Dm(){const{token:e}=Se(),[t,n]=pm(),[l,i]=g.useState(t.get("search")||""),[s,o]=g.useState(t.get("date_from")||""),[a,d]=g.useState(t.get("date_to")||""),[c,x]=g.useState(t.get("status")||""),[h,y]=g.useState([]),[j,S]=g.useState(0),[_,w]=g.useState(null),[f,m]=g.useState(null),[p,v]=g.useState(!1),[b,E]=g.useState(""),[z,k]=g.useState(null),[F,T]=g.useState(null),[$,J]=g.useState(!1);g.useEffect(()=>{i(t.get("search")||""),o(t.get("date_from")||""),d(t.get("date_to")||""),x(t.get("status")||"")},[t]);const Q=(C,M=!1)=>{const O=new URLSearchParams(t);Object.entries(C).forEach(([Y,P])=>{P?O.set(Y,P):O.delete(Y)}),M&&O.set("page","1"),n(O,{replace:!0})};g.useEffect(()=>{const C=window.setTimeout(()=>{Q({search:l.trim()||null},!0)},350);return()=>window.clearTimeout(C)},[l]),g.useEffect(()=>{if(!e)return;(async()=>{v(!0),E("");try{const M=await mm(e,{search:t.get("search")||"",date_from:t.get("date_from")||"",date_to:t.get("date_to")||"",status:t.get("status")||"",page:t.get("page")?Number(t.get("page")):1,page_size:20});y(M.results||[]),S(M.count||0),w(M.next||null),m(M.previous||null)}catch(M){E(M.message||"Failed to load workflow list")}finally{v(!1)}})()},[e,t]);const L=async(C,M)=>{if(!(!e||!C))try{const O=Lm(C),Y=await fetch(O,{headers:{Authorization:`Bearer ${e}`}});if(!Y.ok)throw new Error(`Failed to fetch PDF: ${Y.status} ${Y.statusText}`);const P=await Y.blob(),G=window.URL.createObjectURL(P);if(!window.open(G,"_blank")){const ie=document.createElement("a");ie.href=G,ie.target="_blank",ie.download=M||"document.pdf",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)}setTimeout(()=>window.URL.revokeObjectURL(G),15e3)}catch(O){E(O.message||"Failed to open PDF")}},R=async C=>{if(e){k(C),J(!0),E("");try{const M=await ym(e,C,{date_from:s||void 0,date_to:a||void 0});T(M)}catch(M){E(M.message||"Failed to load patient timeline")}finally{J(!1)}}},q=()=>{k(null),T(null)},ce=g.useMemo(()=>p?"Loading patient workflows...":h.length?`${h.length} of ${j} patients`:"No patients found for the selected filters",[p,h.length,j]);return r.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[r.jsx(ht,{title:"Patient workflow",subtitle:"Search, filter, and reprint receipts and reports"}),b&&r.jsx(Ee,{message:b,onDismiss:()=>E("")}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.md,padding:16,backgroundColor:u.colors.background,boxShadow:u.shadows.sm,marginBottom:20},children:[r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,alignItems:"flex-end"},children:[r.jsxs("div",{style:{flex:"1 1 240px"},children:[r.jsx("label",{style:{display:"block",marginBottom:6,color:u.colors.textSecondary,fontSize:13},children:"Search"}),r.jsx("input",{value:l,onChange:C=>i(C.target.value),placeholder:"Search name, MRN, phone, receipt",style:{width:"100%",padding:"10px 12px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6,color:u.colors.textSecondary,fontSize:13},children:"From"}),r.jsx("input",{type:"date",value:s,onChange:C=>{o(C.target.value),Q({date_from:C.target.value||null},!0)},style:{padding:"10px 12px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6,color:u.colors.textSecondary,fontSize:13},children:"To"}),r.jsx("input",{type:"date",value:a,onChange:C=>{d(C.target.value),Q({date_to:C.target.value||null},!0)},style:{padding:"10px 12px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6,color:u.colors.textSecondary,fontSize:13},children:"Status"}),r.jsx("select",{value:c,onChange:C=>{x(C.target.value),Q({status:C.target.value||null},!0)},style:{padding:"10px 12px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14,minWidth:180},children:Nm.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))})]}),r.jsx(I,{variant:"secondary",onClick:()=>{i(""),o(""),d(""),x(""),n({},{replace:!0})},children:"Clear filters"})]}),r.jsx("div",{style:{marginTop:10,fontSize:12,color:u.colors.textTertiary},children:ce})]}),r.jsx("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.md,backgroundColor:u.colors.background,overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{style:{backgroundColor:u.colors.backgroundGray},children:r.jsxs("tr",{children:[r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"MRN / Reg"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"Patient"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"Phone"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"Last visit"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"Status"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12,textTransform:"uppercase",color:u.colors.textTertiary},children:"Actions"})]})}),r.jsxs("tbody",{children:[h.map(C=>{const M=C.workflow_status.replace(/_/g," ");return r.jsxs("tr",{style:{borderTop:`1px solid ${u.colors.borderLight}`},children:[r.jsxs("td",{style:{padding:12,fontSize:14},children:[r.jsx("div",{style:{fontWeight:600},children:C.mrn}),r.jsx("div",{style:{fontSize:12,color:u.colors.textTertiary},children:C.reg_no||"-"})]}),r.jsxs("td",{style:{padding:12,fontSize:14},children:[r.jsx("div",{style:{fontWeight:600},children:C.name}),r.jsx("div",{style:{fontSize:12,color:u.colors.textTertiary},children:C.age?`${C.age} yrs`:"Age N/A"})]}),r.jsx("td",{style:{padding:12,fontSize:14},children:C.phone||"-"}),r.jsx("td",{style:{padding:12,fontSize:14},children:C.last_visit_at?new Date(C.last_visit_at).toLocaleString():"-"}),r.jsx("td",{style:{padding:12},children:r.jsx("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:999,backgroundColor:u.colors.brandBlueSoft,color:u.colors.brandBlue,fontSize:12,textTransform:"capitalize"},children:M})}),r.jsx("td",{style:{padding:12},children:r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[r.jsx(I,{variant:"secondary",disabled:!C.receipt.available,onClick:()=>L(C.receipt.pdf_url||void 0,`receipt_${C.mrn}.pdf`),children:C.receipt.available?"Reprint receipt":"Receipt not available"}),r.jsx(I,{variant:"secondary",disabled:!C.reports.available||!C.reports.items||C.reports.items.length===0,onClick:()=>{const O=C.reports.items&&C.reports.items.length>0?C.reports.items[0]:void 0,Y=(O==null?void 0:O.pdf_url)||void 0;L(Y,`report_${C.mrn}.pdf`)},children:C.reports.available?"Print report":"Report not published yet"}),r.jsx(I,{variant:"primary",onClick:()=>R(C.patient_id),children:"View timeline"})]})})]},C.patient_id)}),!h.length&&!p&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{padding:20,textAlign:"center",color:u.colors.textSecondary},children:"No patients found for the selected filters"})})]})]})}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[r.jsx(I,{variant:"secondary",disabled:!f,onClick:()=>Q({page:String(Math.max(1,Number(t.get("page")||"1")-1))}),children:"Previous"}),r.jsx(I,{variant:"secondary",disabled:!_,onClick:()=>Q({page:String(Number(t.get("page")||"1")+1)}),children:"Next"})]}),z&&r.jsxs("div",{style:{marginTop:24,border:`1px solid ${u.colors.border}`,borderRadius:u.radius.md,backgroundColor:u.colors.backgroundGray,padding:16},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{margin:0},children:"Patient timeline"}),(F==null?void 0:F.patient)&&r.jsxs("div",{style:{fontSize:13,color:u.colors.textSecondary},children:[F.patient.name,"  ",F.patient.mrn]})]}),r.jsx(I,{variant:"secondary",onClick:q,children:"Close"})]}),$&&r.jsx("div",{style:{marginTop:12,color:u.colors.textSecondary},children:"Loading timeline..."}),!$&&(F==null?void 0:F.visits)&&F.visits.length===0&&r.jsx("div",{style:{marginTop:12,color:u.colors.textSecondary},children:"No visits found in this range."}),!$&&(F==null?void 0:F.visits)&&F.visits.length>0&&r.jsx("div",{style:{marginTop:16,display:"grid",gap:12},children:F.visits.map(C=>r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:12,backgroundColor:u.colors.background},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600},children:C.visit_code}),r.jsx("div",{style:{fontSize:12,color:u.colors.textTertiary},children:new Date(C.registered_at).toLocaleString()})]}),r.jsx("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:999,backgroundColor:u.colors.brandBlueSoft,color:u.colors.brandBlue,fontSize:12,textTransform:"capitalize"},children:C.workflow_status.replace(/_/g," ")})]}),r.jsxs("div",{style:{marginTop:10,display:"flex",flexWrap:"wrap",gap:8},children:[r.jsx(I,{variant:"secondary",disabled:!C.receipt.available,onClick:()=>L(C.receipt.pdf_url||void 0,`receipt_${C.visit_code}.pdf`),children:C.receipt.available?"Reprint receipt":"Receipt not available"}),r.jsx(I,{variant:"secondary",disabled:!C.reports.available||!C.reports.items||C.reports.items.length===0,onClick:()=>{const M=C.reports.items&&C.reports.items.length>0?C.reports.items[0]:void 0,O=(M==null?void 0:M.pdf_url)||void 0;L(O,`report_${C.visit_code}.pdf`)},children:C.reports.available?"Print report":"Report not published yet"})]})]},C.visit_id))})]})]})}function ot(){return r.jsx("div",{style:{padding:32,fontFamily:"system-ui"},children:r.jsxs("div",{style:{maxWidth:520,margin:"0 auto",padding:24,borderRadius:8,border:"1px solid #f1c0c0",backgroundColor:"#fff5f5",color:"#8a1c1c"},children:[r.jsx("h2",{style:{marginTop:0},children:"Access denied"}),r.jsx("p",{style:{marginBottom:16},children:"You do not have permission to access this page. Please contact an administrator if you believe this is an error."}),r.jsx($i,{to:"/",style:{color:"#0B5ED7",textDecoration:"none"},children:"Return to dashboard"})]})})}async function Im(e,t){return Z(`/reporting/workitems/${e}/schema/`,t)}async function Bm(e,t){return Z(`/reporting/workitems/${e}/values/`,t)}async function Ud(e,t,n){return oe(`/reporting/workitems/${e}/save/`,n,t)}async function Fm(e,t){return oe(`/reporting/workitems/${e}/submit/`,t,{})}async function Am(e,t){return oe(`/reporting/workitems/${e}/generate-narrative/`,t,{})}async function $m(e,t){return Z(`/reporting/workitems/${e}/narrative/`,t)}async function Om(e,t){return Z(`/reporting/workitems/${e}/print-payload/`,t)}async function Pf(e,t){const n=await fetch(`${un}/reporting/workitems/${e}/report-pdf/`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Failed to fetch PDF");return n.blob()}async function Mm(e,t,n){return oe(`/reporting/workitems/${e}/verify/`,n,{notes:t})}async function Wm(e,t,n){return oe(`/reporting/workitems/${e}/return-for-correction/`,n,{reason:t})}async function Um(e,t,n){return oe(`/reporting/workitems/${e}/publish/`,n,{notes:t,confirm:"PUBLISH"})}async function Vm(e,t,n){return Z(`/reporting/workitems/${e}/published-integrity/?version=${t}`,n)}async function Hm(e,t){return Z(`/reporting/workitems/${e}/publish-history/`,t)}async function Gm(e,t,n){const l=await fetch(`${un}/reporting/workitems/${e}/published-pdf/?version=${t}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!l.ok)throw new Error("Failed to fetch PDF");return l.blob()}function Km(e){return e?(Array.isArray(e.groups)?e.groups:Array.isArray(e.sections)?e.sections:[]).filter(n=>n&&Array.isArray(n.fields)).map(n=>({title:n.title||"Section",fields:n.fields,widgets:n.widgets||{}})):[]}function Qm(e,t){if(!e)return null;const n=e[t];return n&&(n["ui:widget"]||n.widget)||null}function Ym({jsonSchema:e,uiSchema:t,values:n,onChange:l,onSave:i,saving:s,isReadOnly:o}){const a=(e==null?void 0:e.properties)||{},d=g.useMemo(()=>new Set((e==null?void 0:e.required)||[]),[e]),c=g.useMemo(()=>Km(t),[t]),x=Object.entries(a),h=new Set(c.flatMap(w=>w.fields)),y=x.filter(([w])=>!h.has(w)).map(([w])=>w),j=(w,f)=>{l({...n,[w]:f})},S=(w,f,m)=>{const p=f.title||w,v=d.has(w),b=m??Qm(t,w),E=n[w]??"",z=f.enum,k={display:"block",marginBottom:6,fontWeight:600,fontSize:14,color:u.colors.textPrimary},F={width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${u.colors.border}`,fontSize:14,fontFamily:"inherit",backgroundColor:o?u.colors.backgroundGray:"white"},T=f.description;return f.type==="boolean"?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("input",{type:"checkbox",checked:!!E,onChange:$=>j(w,$.target.checked),disabled:o}),r.jsx("span",{style:{fontSize:14},children:p}),v&&r.jsx("span",{style:{color:u.colors.danger},children:"*"})]}):r.jsxs("div",{children:[r.jsxs("label",{style:k,children:[p,v&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),z&&r.jsxs("select",{value:E,onChange:$=>j(w,$.target.value),disabled:o,style:F,children:[r.jsx("option",{value:"",children:"Select..."}),z.map($=>r.jsx("option",{value:$,children:$},$))]}),!z&&(f.type==="number"||f.type==="integer")&&r.jsx("input",{type:"number",value:E,onChange:$=>{const J=$.target.value===""?"":Number($.target.value);j(w,J)},disabled:o,style:F}),!z&&f.type==="string"&&b==="textarea"&&r.jsx("textarea",{value:E,onChange:$=>j(w,$.target.value),disabled:o,style:{...F,minHeight:120,resize:"vertical"}}),!z&&f.type==="string"&&b!=="textarea"&&r.jsx("input",{type:"text",value:E,onChange:$=>j(w,$.target.value),disabled:o,style:F}),T&&r.jsx("div",{style:{marginTop:6,fontSize:12,color:u.colors.textSecondary},children:T})]})},_=w=>r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:[r.jsx("div",{style:{padding:"16px 24px",backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`,fontWeight:600,fontSize:16},children:w.title}),r.jsx("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:20},children:w.fields.map(f=>{var m;return r.jsx("div",{"data-testid":`field-${f}`,children:S(f,a[f]||{},(m=w.widgets)==null?void 0:m[f])},f)})})]},w.title);return x.length?r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[c.map(w=>_(w)),y.length>0&&_({title:"Fields",fields:y}),i&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(I,{variant:"primary",onClick:i,disabled:s,children:s?"Saving...":"Save"})})]}):r.jsx("div",{children:"No schema fields available."})}function Jm({value:e,onChange:t,disabled:n,trueLabel:l="Yes",falseLabel:i="No"}){const s=e===!0,o=e===!1,a=d=>({flex:1,border:`1px solid ${d?u.colors.brandBlue:u.colors.border}`,backgroundColor:d?u.colors.brandBlueSoft:"white",color:d?u.colors.brandBlueDark:u.colors.textPrimary,fontWeight:d?600:400,padding:"8px 12px",cursor:n?"not-allowed":"pointer",textAlign:"center",transition:u.transitions.fast,fontSize:u.typography.fontSize.base});return r.jsxs("div",{"data-testid":"segmented-boolean",style:{display:"flex",borderRadius:u.radius.md,overflow:"hidden",border:`1px solid ${u.colors.border}`},children:[r.jsx("div",{role:"button",tabIndex:n?-1:0,"data-testid":"segmented-boolean-yes",style:a(s),onClick:()=>!n&&t(!0),onKeyDown:d=>{!n&&(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),t(!0))},children:l}),r.jsx("div",{style:{width:1,backgroundColor:u.colors.border}}),r.jsx("div",{role:"button",tabIndex:n?-1:0,"data-testid":"segmented-boolean-no",style:a(o),onClick:()=>!n&&t(!1),onKeyDown:d=>{!n&&(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),t(!1))},children:i})]})}function qm({value:e,onChange:t,unit:n,disabled:l}){return r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[r.jsx("input",{type:"number",value:e??"",onChange:i=>{const s=i.target.value;t(s===""?"":Number(s))},disabled:l,style:{width:"100%",padding:"10px 12px",paddingRight:40,borderRadius:8,border:`1px solid ${u.colors.border}`,fontSize:14,fontFamily:"inherit",backgroundColor:l?u.colors.backgroundGray:"white"}}),r.jsx("span",{"data-testid":"measurement-unit-badge",style:{position:"absolute",right:12,color:u.colors.textTertiary,fontSize:12,fontWeight:500,pointerEvents:"none"},children:n})]})}function Xm({title:e,rightTitle:t,leftTitle:n,rightContent:l,leftContent:i,compact:s}){return r.jsxs("div",{"data-testid":`paired-group-${e.toLowerCase().replace(/\s+/g,"-")}`,style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsx("div",{style:{fontWeight:600,color:u.colors.textPrimary,borderBottom:`1px solid ${u.colors.borderLight}`,paddingBottom:8},children:e}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[r.jsxs("div",{"data-testid":"paired-group-right-column",style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600,color:u.colors.textSecondary,textTransform:"uppercase"},children:t}),l]}),r.jsxs("div",{"data-testid":"paired-group-left-column",style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600,color:u.colors.textSecondary,textTransform:"uppercase"},children:n}),i]})]})]})}function Vd(e,t,n){if(!e)return!0;for(const l of e){if(!l.hide.includes(n))continue;const i=t[l.when.key],s=l.when.value;let o=!1;switch(l.when.op){case"eq":o=i===s;break;case"neq":o=i!==s;break;case"in":o=Array.isArray(s)&&s.includes(i);break}if(o)return!1}return!0}function Zm(e){return e?(Array.isArray(e.groups)?e.groups:Array.isArray(e.sections)?e.sections:[]).filter(n=>n&&Array.isArray(n.fields)).map(n=>({title:n.title||"Section",fields:n.fields,widgets:n.widgets||{}})):[]}function ey(e){const{uiSpec:t,...n}=e;if(!t)return r.jsx(Ym,{...n});const{jsonSchema:l,uiSchema:i,values:s,onChange:o,isReadOnly:a,onSave:d,saving:c}=n,x=(l==null?void 0:l.properties)||{},h=new Set((l==null?void 0:l.required)||[]),y=g.useMemo(()=>Zm(i||null),[i]),j=(f,m)=>{o({...s,[f]:m})},S=(f,m)=>{var R,q,ce;const p=x[f]||{},v=(m==null?void 0:m.label)||p.title||f,b=h.has(f),E=s[f]??"",z=`field-${f}`,k=(ce=(q=(R=i==null?void 0:i.sections)==null?void 0:R.find(C=>C.fields.includes(f)))==null?void 0:q.widgets)==null?void 0:ce[f],F=(m==null?void 0:m.widget)||k,T=(m==null?void 0:m.help)||p.description,$={display:"block",marginBottom:6,fontWeight:600,fontSize:14,color:u.colors.textPrimary},J={marginBottom:0},Q=C=>r.jsxs("div",{"data-testid":z,style:J,children:[C,T&&r.jsx("div",{style:{marginTop:4,fontSize:12,color:u.colors.textSecondary},children:T})]});let L=null;if(F==="segmented_boolean"||p.type==="boolean"&&F===void 0){if(p.type==="boolean"&&F==="segmented_boolean")L=r.jsxs("div",{children:[r.jsxs("label",{style:$,children:[v,b&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),r.jsx(Jm,{value:E===""?null:E,onChange:C=>j(f,C),disabled:a})]});else if(p.type==="boolean")return Q(r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("input",{type:"checkbox",checked:!!E,onChange:C=>j(f,C.target.checked),disabled:a}),r.jsx("span",{style:{fontSize:14},children:v}),b&&r.jsx("span",{style:{color:u.colors.danger},children:"*"})]}))}if(!L&&p.enum){const C=p.enum,M=(m==null?void 0:m.enumLabels)||{};L=r.jsxs("div",{children:[r.jsxs("label",{style:$,children:[v,b&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),r.jsxs("select",{value:E,onChange:O=>j(f,O.target.value),disabled:a,style:{width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${u.colors.border}`,fontSize:14,fontFamily:"inherit",backgroundColor:a?u.colors.backgroundGray:"white"},children:[r.jsx("option",{value:"",children:"Select..."}),C.map(O=>r.jsx("option",{value:O,children:M[O]||O},O))]})]})}if(!L&&F==="measurement"&&(L=r.jsxs("div",{children:[r.jsxs("label",{style:$,children:[v,b&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),r.jsx(qm,{value:E,onChange:C=>j(f,C),unit:(m==null?void 0:m.unit)||"",disabled:a})]})),!L){const C={width:"100%",padding:"10px 12px",borderRadius:8,border:`1px solid ${u.colors.border}`,fontSize:14,fontFamily:"inherit",backgroundColor:a?u.colors.backgroundGray:"white"};if(p.type==="number"||p.type==="integer")L=r.jsxs("div",{children:[r.jsxs("label",{style:$,children:[v,b&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),r.jsx("input",{type:"number",value:E,onChange:M=>{const O=M.target.value===""?"":Number(M.target.value);j(f,O)},disabled:a,style:C})]});else if(p.type==="string"){const M=F==="textarea";L=r.jsxs("div",{children:[r.jsxs("label",{style:$,children:[v,b&&r.jsx("span",{style:{color:u.colors.danger,marginLeft:4},children:"*"})]}),M?r.jsx("textarea",{value:E,onChange:O=>j(f,O.target.value),disabled:a,style:{...C,minHeight:120,resize:"vertical"}}):r.jsx("input",{type:"text",value:E,onChange:O=>j(f,O.target.value),disabled:a,style:C})]})}}return Q(L)},_=[],w=new Set;for(const f of y){const p=f.fields.filter(b=>Vd(t.visibilityRules,s,b)).filter(b=>!w.has(b));if(p.length===0)continue;let v=null;if(t.pairedGroups){for(const b of t.pairedGroups)if(p.some(E=>E.startsWith(b.match.rightPrefix))){v=b;break}}if(v){const b=p.filter(T=>T.startsWith(v.match.rightPrefix)),k=Object.keys(x).filter(T=>T.startsWith(v.match.leftPrefix)).filter(T=>Vd(t.visibilityRules,s,T));b.forEach(T=>w.add(T)),k.forEach(T=>w.add(T)),_.push({type:"paired",group:v,rightFields:b,leftFields:k,originalTitle:f.title});const F=p.filter(T=>!T.startsWith(v.match.rightPrefix));F.length>0&&(_.push({type:"standard",title:f.title+" (Other)",fields:F,widgets:f.widgets}),F.forEach(T=>w.add(T)))}else _.push({type:"standard",title:f.title,fields:p,widgets:f.widgets}),p.forEach(b=>w.add(b))}return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[_.map((f,m)=>{var p;if(f.type==="paired")return r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:[r.jsx("div",{style:{padding:"16px 24px",backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`,fontWeight:600,fontSize:16},children:f.group.title}),r.jsx("div",{style:{padding:24},children:r.jsx(Xm,{title:"",rightTitle:f.group.rightTitle,leftTitle:f.group.leftTitle,rightContent:r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:f.rightFields.map(v=>{var b;return r.jsx("div",{children:S(v,(b=t.fieldEnhancements)==null?void 0:b[v])},v)})}),leftContent:r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:f.leftFields.map(v=>{var b;return r.jsx("div",{children:S(v,(b=t.fieldEnhancements)==null?void 0:b[v])},v)})})})})]},m);{const v=(p=t.sections)==null?void 0:p.find(k=>k.sectionTitle===f.title),b=v==null?void 0:v.compact,E=(v==null?void 0:v.layout)==="grid2",z=f.fields.some(k=>{var F,T;return(T=(F=t.fieldEnhancements)==null?void 0:F[k])==null?void 0:T.compact});return r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:[r.jsx("div",{style:{padding:"16px 24px",backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`,fontWeight:600,fontSize:16},children:f.title}),r.jsx("div",{style:{padding:24,display:b||E?"grid":"flex",flexDirection:b||E?void 0:"column",gridTemplateColumns:E||z?"1fr 1fr":"1fr",gap:20},children:f.fields.map(k=>{var $;const F=($=t.fieldEnhancements)==null?void 0:$[k],T=F==null?void 0:F.compact;return r.jsx("div",{style:{gridColumn:E||T?"auto":"1 / -1"},children:S(k,F)},k)})})]},m)}}),d&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(I,{variant:"primary",onClick:d,disabled:c,children:c?"Saving...":"Save"})})]})}const ty={templateCode:"USG_ABD_V1",version:"1.0",visibilityRules:[{when:{key:"liv_visualized",op:"eq",value:"No"},hide:["liv_size_cm","liv_contour","liv_echotexture","liv_echogenicity","liv_focal_lesion_present","liv_ihbd_present","liv_portal_vein_diameter_mm"]},{when:{key:"gb_visualized",op:"eq",value:"No"},hide:["gb_status","gb_stones_present","gb_sludge_present","gb_wall_thickness_mm","gb_murphy_sign_positive","gb_pericholecystic_fluid_present","gb_cbd_diameter_mm","gb_cbd_stone_suspected"]},{when:{key:"panc_visualized",op:"eq",value:"Obscured by bowel gas"},hide:["panc_echotexture","panc_mpd_diameter_mm","panc_focal_lesion_present"]},{when:{key:"spl_visualized",op:"eq",value:"No"},hide:["spl_length_cm","spl_echotexture"]},{when:{key:"kid_r_visualized",op:"eq",value:"No"},hide:["kid_r_length_cm","kid_r_cortical_echogenicity","kid_r_cmd","kid_r_hydronephrosis_grade","kid_r_calculus_present","kid_r_largest_calculus_mm","kid_r_mass_suspected"]},{when:{key:"kid_l_visualized",op:"eq",value:"No"},hide:["kid_l_length_cm","kid_l_cortical_echogenicity","kid_l_cmd","kid_l_hydronephrosis_grade","kid_l_calculus_present","kid_l_largest_calculus_mm","kid_l_mass_suspected"]},{when:{key:"ff_present",op:"eq",value:!1},hide:["ff_amount"]},{when:{key:"aiv_visualized",op:"eq",value:"Obscured"},hide:["aiv_aorta_max_diameter_mm"]},{when:{key:"kid_r_calculus_present",op:"eq",value:!1},hide:["kid_r_largest_calculus_mm"]},{when:{key:"kid_l_calculus_present",op:"eq",value:!1},hide:["kid_l_largest_calculus_mm"]}],fieldEnhancements:{kid_r_visualized:{enumLabels:{Satisfactory:"Well seen",No:"Not seen"}},kid_l_visualized:{enumLabels:{Satisfactory:"Well seen",No:"Not seen"}},kid_r_cmd:{label:"Corticomedullary diff"},kid_l_cmd:{label:"Corticomedullary diff"},kid_r_length_cm:{unit:"cm",widget:"measurement"},kid_l_length_cm:{unit:"cm",widget:"measurement"},kid_r_calculus_present:{widget:"segmented_boolean",compact:!0},kid_l_calculus_present:{widget:"segmented_boolean",compact:!0},kid_r_largest_calculus_mm:{unit:"mm",widget:"measurement"},kid_l_largest_calculus_mm:{unit:"mm",widget:"measurement"},kid_r_mass_suspected:{widget:"segmented_boolean",compact:!0},kid_l_mass_suspected:{widget:"segmented_boolean",compact:!0},liv_size_cm:{unit:"cm",widget:"measurement"},liv_portal_vein_diameter_mm:{unit:"mm",widget:"measurement"},liv_focal_lesion_present:{widget:"segmented_boolean",compact:!0},liv_ihbd_present:{widget:"segmented_boolean",compact:!0},liv_visualized:{enumLabels:{Satisfactory:"Well seen",Partially:"Partially seen",No:"Not seen"}},gb_wall_thickness_mm:{unit:"mm",widget:"measurement"},gb_cbd_diameter_mm:{unit:"mm",widget:"measurement"},gb_stones_present:{widget:"segmented_boolean",compact:!0},gb_sludge_present:{widget:"segmented_boolean",compact:!0},gb_murphy_sign_positive:{widget:"segmented_boolean",compact:!0},gb_pericholecystic_fluid_present:{widget:"segmented_boolean",compact:!0},gb_cbd_stone_suspected:{widget:"segmented_boolean",compact:!0},panc_mpd_diameter_mm:{unit:"mm",widget:"measurement"},panc_focal_lesion_present:{widget:"segmented_boolean",compact:!0},panc_visualized:{enumLabels:{Satisfactory:"Well seen",Partially:"Partially seen","Obscured by bowel gas":"Not visualized (Gas)"}},spl_length_cm:{unit:"cm",widget:"measurement"},spl_visualized:{enumLabels:{Satisfactory:"Well seen",No:"Not seen"}},aiv_aorta_max_diameter_mm:{unit:"mm",widget:"measurement"},ff_present:{widget:"segmented_boolean",compact:!0}},pairedGroups:[{id:"kidneys",title:"Kidneys",rightTitle:"Right",leftTitle:"Left",match:{rightPrefix:"kid_r_",leftPrefix:"kid_l_"},renderAs:"two_column"}]},ny={templateCode:"USG_KUB_V1",version:"1.0",visibilityRules:[{when:{key:"kid_r_visualized",op:"eq",value:!1},hide:["kid_r_length_cm","kid_r_cortical_echogenicity","kid_r_cmd","kid_r_hydronephrosis_grade","kid_r_calculus_present","kid_r_largest_calculus_mm","kid_r_simple_cyst_present","kid_r_largest_cyst_mm","kid_r_mass_suspected","kid_r_perinephric_collection_present"]},{when:{key:"kid_l_visualized",op:"eq",value:!1},hide:["kid_l_length_cm","kid_l_cortical_echogenicity","kid_l_cmd","kid_l_hydronephrosis_grade","kid_l_calculus_present","kid_l_largest_calculus_mm","kid_l_simple_cyst_present","kid_l_largest_cyst_mm","kid_l_mass_suspected","kid_l_perinephric_collection_present"]},{when:{key:"kid_r_calculus_present",op:"eq",value:!1},hide:["kid_r_largest_calculus_mm"]},{when:{key:"kid_l_calculus_present",op:"eq",value:!1},hide:["kid_l_largest_calculus_mm"]},{when:{key:"kid_r_simple_cyst_present",op:"eq",value:!1},hide:["kid_r_largest_cyst_mm"]},{when:{key:"kid_l_simple_cyst_present",op:"eq",value:!1},hide:["kid_l_largest_cyst_mm"]},{when:{key:"ure_r_visualized",op:"eq",value:!1},hide:["ure_r_segment_assessed","ure_r_hydroureter_present","ure_r_stone_suspected","ure_r_stone_location","ure_r_stone_size_mm","ure_r_jet_seen"]},{when:{key:"ure_l_visualized",op:"eq",value:!1},hide:["ure_l_segment_assessed","ure_l_hydroureter_present","ure_l_stone_suspected","ure_l_stone_location","ure_l_stone_size_mm","ure_l_jet_seen"]},{when:{key:"ure_r_stone_suspected",op:"eq",value:!1},hide:["ure_r_stone_location","ure_r_stone_size_mm"]},{when:{key:"ure_l_stone_suspected",op:"eq",value:!1},hide:["ure_l_stone_location","ure_l_stone_size_mm"]},{when:{key:"bl_visualized",op:"eq",value:!1},hide:["bl_distended","bl_wall_thickness_mm","bl_trabeculation_present","bl_stone_present","bl_mass_suspected","bl_debris_present","bl_prevoid_volume_ml","bl_pvr_ml"]}],fieldEnhancements:{kid_r_visualized:{widget:"segmented_boolean",compact:!0},kid_l_visualized:{widget:"segmented_boolean",compact:!0},kid_r_cmd:{label:"Corticomedullary diff"},kid_l_cmd:{label:"Corticomedullary diff"},kid_r_length_cm:{unit:"cm",widget:"measurement"},kid_l_length_cm:{unit:"cm",widget:"measurement"},kid_r_calculus_present:{widget:"segmented_boolean",compact:!0},kid_l_calculus_present:{widget:"segmented_boolean",compact:!0},kid_r_largest_calculus_mm:{unit:"mm",widget:"measurement"},kid_l_largest_calculus_mm:{unit:"mm",widget:"measurement"},kid_r_simple_cyst_present:{widget:"segmented_boolean",compact:!0},kid_l_simple_cyst_present:{widget:"segmented_boolean",compact:!0},kid_r_largest_cyst_mm:{unit:"mm",widget:"measurement"},kid_l_largest_cyst_mm:{unit:"mm",widget:"measurement"},kid_r_mass_suspected:{widget:"segmented_boolean",compact:!0},kid_l_mass_suspected:{widget:"segmented_boolean",compact:!0},kid_r_perinephric_collection_present:{widget:"segmented_boolean",compact:!0},kid_l_perinephric_collection_present:{widget:"segmented_boolean",compact:!0},ure_r_visualized:{widget:"segmented_boolean",compact:!0},ure_l_visualized:{widget:"segmented_boolean",compact:!0},ure_r_hydroureter_present:{widget:"segmented_boolean",compact:!0},ure_l_hydroureter_present:{widget:"segmented_boolean",compact:!0},ure_r_stone_suspected:{widget:"segmented_boolean",compact:!0},ure_l_stone_suspected:{widget:"segmented_boolean",compact:!0},ure_r_stone_size_mm:{unit:"mm",widget:"measurement"},ure_l_stone_size_mm:{unit:"mm",widget:"measurement"},ure_r_jet_seen:{widget:"segmented_boolean",compact:!0},ure_l_jet_seen:{widget:"segmented_boolean",compact:!0},bl_visualized:{widget:"segmented_boolean",compact:!0},bl_distended:{widget:"segmented_boolean",compact:!0},bl_wall_thickness_mm:{unit:"mm",widget:"measurement"},bl_trabeculation_present:{widget:"segmented_boolean",compact:!0},bl_stone_present:{widget:"segmented_boolean",compact:!0},bl_mass_suspected:{widget:"segmented_boolean",compact:!0},bl_debris_present:{widget:"segmented_boolean",compact:!0},bl_prevoid_volume_ml:{unit:"ml",widget:"measurement"},bl_pvr_ml:{label:"Post-void residual (mL)",unit:"ml",widget:"measurement"}},pairedGroups:[{id:"kidneys",title:"Kidneys",rightTitle:"Right",leftTitle:"Left",match:{rightPrefix:"kid_r_",leftPrefix:"kid_l_"},renderAs:"two_column"},{id:"ureters",title:"Ureters",rightTitle:"Right",leftTitle:"Left",match:{rightPrefix:"ure_r_",leftPrefix:"ure_l_"},renderAs:"two_column"}]},ry={templateCode:"USG_PELVIS_V1",version:"1.0",visibilityRules:[{when:{key:"bl_distended",op:"eq",value:!1},hide:["bl_wall_thickness_mm"]},{when:{key:"ut_fibroid_present",op:"eq",value:!1},hide:["ut_fibroid_largest_mm"]},{when:{key:"adnx_mass_present",op:"eq",value:!1},hide:["adnx_side","adnx_papillary_projection_present","adnx_solid_component_present","adnx_vascularity"]},{when:{key:"ff_present",op:"eq",value:!1},hide:["ff_amount"]}],fieldEnhancements:{bl_distended:{widget:"segmented_boolean",compact:!0},bl_wall_thickness_mm:{unit:"mm",widget:"measurement"},bl_trabeculation_present:{widget:"segmented_boolean",compact:!0},bl_stone_present:{widget:"segmented_boolean",compact:!0},bl_mass_suspected:{widget:"segmented_boolean",compact:!0},bl_debris_present:{widget:"segmented_boolean",compact:!0},bl_pvr_ml:{label:"Post-void residual (mL)",unit:"ml",widget:"measurement"},ut_size_cm:{help:"Format: Length x Width x AP (e.g. 8.0 x 4.2 x 3.5)"},ut_fibroid_present:{widget:"segmented_boolean",compact:!0},ut_fibroid_largest_mm:{unit:"mm",widget:"measurement"},ov_r_simple_cyst_present:{widget:"segmented_boolean",compact:!0},ov_r_complex_cyst_suspected:{widget:"segmented_boolean",compact:!0},ov_r_solid_mass_suspected:{widget:"segmented_boolean",compact:!0},ov_l_simple_cyst_present:{widget:"segmented_boolean",compact:!0},ov_l_complex_cyst_suspected:{widget:"segmented_boolean",compact:!0},ov_l_solid_mass_suspected:{widget:"segmented_boolean",compact:!0},adnx_mass_present:{widget:"segmented_boolean",compact:!0},adnx_papillary_projection_present:{widget:"segmented_boolean",compact:!0},adnx_solid_component_present:{widget:"segmented_boolean",compact:!0},ff_present:{widget:"segmented_boolean",compact:!0}},pairedGroups:[{id:"ovaries",title:"Ovaries",rightTitle:"Right",leftTitle:"Left",match:{rightPrefix:"ov_r_",leftPrefix:"ov_l_"},renderAs:"two_column"}]},ly={USG_ABD_V1:ty,USG_KUB_V1:ny,USG_PELVIS_V1:ry};function iy(e){return ly[e]||null}function sy(e){const t=e==null?void 0:e.detail;if(typeof t=="string")return t;const n=(t==null?void 0:t.code)||(t==null?void 0:t.error);return n==="no_active_template"||n==="NO_ACTIVE_V2_TEMPLATE"?"No active template configured for this service":t!=null&&t.message?t.message:(e==null?void 0:e.message)||"Failed to load report data"}function oy(){var $n;const{service_visit_item_id:e}=Ai(),{token:t,user:n}=Se(),l=qe(),[i,s]=g.useState(null),[o,a]=g.useState({}),[d,c]=g.useState("draft"),[x,h]=g.useState(!1),[y,j]=g.useState(!0),[S,_]=g.useState(!1),[w,f]=g.useState(null),[m,p]=g.useState(null),[v,b]=g.useState(null),[E,z]=g.useState(null),[k,F]=g.useState({}),[T,$]=g.useState(!1),[J,Q]=g.useState(!1),[L,R]=g.useState(!1),[q,ce]=g.useState(""),[C,M]=g.useState(""),[O,Y]=g.useState(""),[P,G]=g.useState([]),[ee,ie]=g.useState(null),[he,ve]=g.useState(!1);g.useEffect(()=>{!e||!t||Ae()},[e,t]);const Ae=async()=>{if(e)try{j(!0),f(null);const[X,Pe,Ve]=await Promise.all([Im(e,t),Bm(e,t),$m(e,t)]);if(X.schema_version!=="v2")throw new Error("Only V2 templates are supported.");s(X),c(Pe.status);const On=!!Pe.is_published;if(h(On),ie(Ve),b(Pe.last_saved_at||null),z(Pe.last_published_at||null),a(Pe.values_json||{}),On){const Sn=await Hm(e,t);G(Sn),Sn.forEach(_n=>{Vm(e,_n.version,t).then(N=>F(V=>({...V,[_n.version]:!!N.content_hash}))).catch(console.error)})}}catch(X){f(sy(X))}finally{j(!1)}};g.useEffect(()=>{},[i]);const B=()=>({schema_version:"v2",values_json:o}),re=async()=>{if(!(!e||d!=="draft"))try{_(!0),f(null),p(null),await Ud(e,B(),t),p("Draft saved successfully"),b(new Date().toISOString())}catch(X){f(X.message||"Failed to save draft")}finally{_(!1)}},ae=async()=>{if(!(!e||d!=="draft"))try{_(!0),f(null),await Ud(e,B(),t),await Fm(e,t),c("submitted"),$(!1)}catch(X){f(X.message||"Failed to submit report")}finally{_(!1)}},Tt=async()=>{if(e)try{ve(!0),f(null);const X=await Am(e,t);ie(X)}catch(X){f(X.message||"Failed to generate narrative")}finally{ve(!1)}},Ut=async()=>{if(e)try{await Mm(e,"",t),c("verified")}catch(X){f(X.message||"Failed to verify report")}},it=async()=>{if(e)try{await Wm(e,q,t),c("draft"),Q(!1)}catch(X){f(X.message||"Failed to return report")}},_t=async()=>{if(e)try{await Um(e,C,t),R(!1),await Ae()}catch(X){f(X.message||"Failed to publish report")}},st=async()=>{e&&window.open(`/print/report/${e}`,"_blank")},$e=async()=>{if(e)try{const X=await Pf(e,t),Pe=URL.createObjectURL(X),Ve=document.createElement("a");Ve.href=Pe,Ve.download=`report_${e}.pdf`,document.body.appendChild(Ve),Ve.click(),Ve.remove(),URL.revokeObjectURL(Pe)}catch(X){f(X.message||"Failed to fetch PDF")}},jn=async X=>{if(e)try{const Pe=await Gm(e,X,t),Ve=URL.createObjectURL(Pe);window.open(Ve,"_blank")}catch(Pe){f(Pe.message||"Failed to fetch published PDF")}};return y?r.jsx("div",{style:{padding:20},children:"Loading..."}):i?r.jsxs("div",{"data-testid":"reporting-v2",style:{padding:20,display:"flex",flexDirection:"column",gap:16},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsx("h2",{"data-testid":"report-template-name",style:{margin:0},children:i.name}),r.jsx("div",{"data-testid":"report-template-code",style:{fontSize:12,color:u.colors.textTertiary},children:i.code}),r.jsxs("div",{"data-testid":"report-status",style:{fontSize:12,color:u.colors.textTertiary},children:["Status: ",d,x?" (published)":""]})]}),r.jsx(I,{variant:"secondary",onClick:()=>l("/reporting/worklist"),children:"Worklist"})]}),w&&r.jsx("div",{"data-testid":"report-error",children:r.jsx(Ee,{message:w})}),m&&r.jsx("div",{"data-testid":"report-success",children:r.jsx(Rt,{message:m})}),r.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[r.jsx(I,{"data-testid":"report-save",onClick:re,disabled:S||d!=="draft",children:"Save Draft"}),r.jsx(I,{"data-testid":"report-submit",variant:"secondary",onClick:()=>$(!0),disabled:d!=="draft",children:"Submit"}),r.jsx(I,{variant:"secondary",onClick:Tt,disabled:he,children:"Generate Narrative"}),r.jsx(I,{"data-testid":"report-preview",variant:"secondary",onClick:st,children:"Preview / Print Layout"}),r.jsx(I,{variant:"secondary",onClick:$e,children:"Download Server PDF"}),((n==null?void 0:n.is_superuser)||(($n=n==null?void 0:n.groups)==null?void 0:$n.includes("reporting_verifier")))&&r.jsxs(r.Fragment,{children:[r.jsx(I,{variant:"secondary",onClick:()=>Q(!0),disabled:d==="draft",children:"Return"}),r.jsx(I,{"data-testid":"report-verify",variant:"secondary",onClick:Ut,disabled:d!=="submitted",children:"Verify"}),r.jsx(I,{"data-testid":"report-publish",variant:"secondary",onClick:()=>R(!0),disabled:d!=="verified",children:"Publish"})]})]}),(v||E)&&r.jsxs("div",{style:{fontSize:12,color:u.colors.textTertiary},children:[v&&r.jsxs("span",{children:["Last saved: ",new Date(v).toLocaleString()," "]}),E&&r.jsxs("span",{children:["Last published: ",new Date(E).toLocaleString()]})]}),r.jsx("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:8,padding:12},children:r.jsx(ey,{jsonSchema:i.json_schema,uiSchema:i.ui_schema,values:o,onChange:X=>a(X),isReadOnly:d!=="draft",uiSpec:iy(i.code||"")})}),ee&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsx("div",{style:{fontWeight:600},children:"Narrative JSON"}),r.jsx("textarea",{value:JSON.stringify(ee.narrative_json,null,2),readOnly:!0,style:{width:"100%",minHeight:180,padding:12,borderRadius:8,border:`1px solid ${u.colors.border}`,backgroundColor:u.colors.backgroundGray,fontFamily:"monospace",fontSize:13,lineHeight:1.4,resize:"vertical"}})]}),x&&P.length>0&&r.jsxs("div",{"data-testid":"publish-history",style:{marginTop:20},children:[r.jsx("h3",{children:"Publish History"}),r.jsx("ul",{children:P.map(X=>r.jsx("li",{style:{marginBottom:8},children:r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[r.jsxs("span",{children:["Version ",X.version]}),r.jsx("span",{children:X.published_at?new Date(X.published_at).toLocaleString():""}),r.jsx("span",{children:k[X.version]?"Integrity OK":"Integrity pending"}),r.jsx(I,{variant:"secondary",onClick:()=>jn(X.version),children:"Open PDF"})]})},X.version))})]}),T&&r.jsx("div",{"data-testid":"submit-modal",style:{background:"rgba(0,0,0,0.4)",position:"fixed",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxs("div",{style:{background:"white",padding:20,borderRadius:8,width:360},children:[r.jsx("h3",{children:"Submit report?"}),r.jsx("p",{children:"Once submitted, the report cannot be edited until returned."}),r.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[r.jsx(I,{variant:"secondary",onClick:()=>$(!1),children:"Cancel"}),r.jsx(I,{"data-testid":"submit-confirm",onClick:ae,disabled:S,children:"Submit"})]})]})}),J&&r.jsx("div",{style:{background:"rgba(0,0,0,0.4)",position:"fixed",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxs("div",{style:{background:"white",padding:20,borderRadius:8,width:360},children:[r.jsx("h3",{children:"Return report"}),r.jsx("textarea",{placeholder:"Reason",value:q,onChange:X=>ce(X.target.value),style:{width:"100%",minHeight:80,marginBottom:12}}),r.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[r.jsx(I,{variant:"secondary",onClick:()=>Q(!1),children:"Cancel"}),r.jsx(I,{onClick:it,disabled:!q,children:"Return"})]})]})}),L&&r.jsx("div",{"data-testid":"publish-modal",style:{background:"rgba(0,0,0,0.4)",position:"fixed",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxs("div",{style:{background:"white",padding:20,borderRadius:8,width:360},children:[r.jsx("h3",{children:"Publish report"}),r.jsx("textarea",{"data-testid":"publish-notes",placeholder:"Notes",value:C,onChange:X=>M(X.target.value),style:{width:"100%",minHeight:80,marginBottom:12}}),r.jsx("input",{"data-testid":"publish-confirm",placeholder:"Type PUBLISH to confirm",value:O,onChange:X=>Y(X.target.value),style:{width:"100%",marginBottom:12}}),r.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[r.jsx(I,{variant:"secondary",onClick:()=>R(!1),children:"Cancel"}),r.jsx(I,{"data-testid":"publish-confirm-button",onClick:_t,disabled:O!=="PUBLISH",children:"Publish"})]})]})})]}):r.jsx("div",{style:{padding:20},children:"No template found for this service."})}function ay(){const{token:e}=Se(),t=qe(),[n,l]=g.useState([]),[i,s]=g.useState(!0),[o,a]=g.useState(null),[d,c]=g.useState("ALL"),[x,h]=g.useState("TODAY"),[y,j]=g.useState(()=>new Date().toISOString().split("T")[0]),[S,_]=g.useState(()=>new Date().toISOString().split("T")[0]);g.useEffect(()=>{e&&w()},[e,x]);const w=async()=>{try{s(!0),a(null);let v="/workflow/items/worklist/?";const b=new Date,E=k=>k.toISOString().split("T")[0];if(x==="TODAY"){const k=E(b);v+=`&date_from=${k}&date_to=${k}`}else if(x==="LAST_3_DAYS"){const k=new Date;k.setDate(b.getDate()-3),v+=`&date_from=${E(k)}&date_to=${E(b)}`}else x==="CUSTOM"&&(y&&(v+=`&date_from=${y}`),S&&(v+=`&date_to=${S}`));const z=await Z(v,e);l(z||[])}catch(v){a(v.message||"Failed to load reporting worklist")}finally{s(!1)}},f=v=>v.profile_code?["REGISTERED","IN_PROGRESS","RETURNED_FOR_CORRECTION"].includes(v.status)?"Enter Report":v.status==="PUBLISHED"?"View Published":["submitted","verified"].includes(v.report_status)?"View Report":"Enter Report":"No Profile",m=n.filter(v=>d==="ALL"?!0:d==="PENDING"?!v.report_status||v.report_status==="draft":d==="COMPLETED"?v.report_status==="submitted"||v.report_status==="verified":d==="PUBLISHED"?v.status==="PUBLISHED":!0),p=v=>{switch(v){case"REGISTERED":return{bg:u.colors.backgroundGray,text:u.colors.textSecondary};case"IN_PROGRESS":return{bg:"#fff3cd",text:"#856404"};case"RETURNED_FOR_CORRECTION":return{bg:"#f8d7da",text:"#842029"};case"PENDING_VERIFICATION":return{bg:u.colors.brandBlueSoft,text:u.colors.brandBlue};case"FINALIZED":case"PUBLISHED":return{bg:"#d1e7dd",text:"#0f5132"};default:return{bg:u.colors.backgroundGray,text:u.colors.textPrimary}}};return r.jsxs("div",{"data-testid":"reporting-worklist",style:{maxWidth:1200,margin:"0 auto"},children:[r.jsx(ht,{title:"Reporting Worklist",subtitle:"Manage radiology and diagnostic reports"}),r.jsx("div",{style:{marginBottom:20},children:o&&r.jsx(Ee,{message:o})}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,boxShadow:u.shadows.sm,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:[r.jsxs("div",{style:{padding:16,borderBottom:`1px solid ${u.colors.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:u.colors.backgroundGray},children:[r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx(I,{variant:d==="ALL"?"primary":"secondary",onClick:()=>c("ALL"),style:{padding:"6px 16px",fontSize:13},children:"All Items"}),r.jsx(I,{variant:d==="PENDING"?"primary":"secondary",onClick:()=>c("PENDING"),style:{padding:"6px 16px",fontSize:13},children:"Pending"}),r.jsx(I,{variant:d==="COMPLETED"?"primary":"secondary",onClick:()=>c("COMPLETED"),style:{padding:"6px 16px",fontSize:13},children:"Completed"}),r.jsx(I,{variant:d==="PUBLISHED"?"primary":"secondary",onClick:()=>c("PUBLISHED"),style:{padding:"6px 16px",fontSize:13},children:"Published"})]}),r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[r.jsxs("select",{value:x,onChange:v=>h(v.target.value),style:{padding:"6px 10px",fontSize:13,borderRadius:u.radius.sm,border:`1px solid ${u.colors.border}`,backgroundColor:"white",cursor:"pointer"},children:[r.jsx("option",{value:"TODAY",children:"Today"}),r.jsx("option",{value:"LAST_3_DAYS",children:"Last 3 Days"}),r.jsx("option",{value:"CUSTOM",children:"Custom Range"}),r.jsx("option",{value:"ALL",children:"All Time"})]}),x==="CUSTOM"&&r.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[r.jsx("input",{type:"date",value:y,onChange:v=>j(v.target.value),style:{padding:"5px",fontSize:13,borderRadius:u.radius.sm,border:`1px solid ${u.colors.border}`}}),r.jsx("span",{style:{fontSize:12,color:u.colors.textSecondary},children:"-"}),r.jsx("input",{type:"date",value:S,onChange:v=>_(v.target.value),style:{padding:"5px",fontSize:13,borderRadius:u.radius.sm,border:`1px solid ${u.colors.border}`}})]}),r.jsx(I,{variant:"secondary",onClick:w,disabled:i,style:{padding:"6px 16px",fontSize:13},children:i?"Refreshing...":"Refresh"})]})]}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{"data-testid":"worklist-table",style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:`2px solid ${u.colors.border}`,backgroundColor:"white"},children:[r.jsx("th",{style:Wn,children:"Date"}),r.jsx("th",{style:Wn,children:"Patient Info"}),r.jsx("th",{style:Wn,children:"Service"}),r.jsx("th",{style:Wn,children:"Department"}),r.jsx("th",{style:Wn,children:"Status"}),r.jsx("th",{style:{...Wn,textAlign:"right"},children:"Action"})]})}),r.jsx("tbody",{children:i&&n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{padding:40,textAlign:"center",color:u.colors.textTertiary},children:"Loading worklist items..."})}):m.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{padding:40,textAlign:"center",color:u.colors.textTertiary},children:"No items found matching your filters."})}):m.map(v=>{const b=p(v.status);return r.jsxs("tr",{"data-testid":`workitem-row-${v.id}`,style:{borderBottom:`1px solid ${u.colors.borderLight}`,transition:"background 0.2s"},onMouseEnter:E=>E.currentTarget.style.backgroundColor="#f8f9fa",onMouseLeave:E=>E.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("td",{style:Un,children:[r.jsx("div",{style:{fontSize:13},children:new Date(v.created_at).toLocaleDateString()}),r.jsx("div",{style:{fontSize:11,color:u.colors.textTertiary},children:new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("td",{style:Un,children:[r.jsx("div",{style:{fontWeight:600,fontSize:14},children:v.patient_name}),r.jsx("div",{style:{fontSize:12,color:u.colors.textSecondary},children:v.patient_mrn})]}),r.jsxs("td",{style:Un,children:[r.jsx("div",{style:{fontSize:14},children:v.service_name}),r.jsxs("div",{style:{fontSize:11,color:u.colors.textTertiary},children:["Visit: ",v.visit_id]}),v.profile_code?r.jsx("span",{style:{fontSize:10,backgroundColor:"#e2e3e5",color:"#383d41",padding:"1px 4px",borderRadius:3,marginLeft:4},children:v.profile_code}):r.jsx("span",{style:{fontSize:10,backgroundColor:"#f8d7da",color:"#721c24",padding:"1px 4px",borderRadius:3,marginLeft:4},children:"NO PROFILE"})]}),r.jsx("td",{style:Un,children:r.jsx("span",{style:{fontSize:11,fontWeight:600,padding:"2px 6px",borderRadius:4,backgroundColor:"#f0f0f0",color:"#666"},children:v.department})}),r.jsx("td",{style:Un,children:r.jsx("span",{style:{fontSize:12,fontWeight:600,padding:"4px 10px",borderRadius:999,backgroundColor:b.bg,color:b.text,display:"inline-block",whiteSpace:"nowrap"},children:v.status_display})}),r.jsx("td",{style:{...Un,textAlign:"right"},children:r.jsx(I,{variant:["REGISTERED","IN_PROGRESS","RETURNED_FOR_CORRECTION"].includes(v.status)?"primary":"secondary",style:{padding:"6px 12px",fontSize:13},onClick:()=>t(`/reporting/worklist/${v.id}/report`),disabled:!v.profile_code,title:v.profile_code?"":"No report profile mapped to this service","data-testid":`open-report-${v.id}`,children:f(v)})})]},v.id)})})]})})]})]})}const Wn={textAlign:"left",padding:"16px",fontSize:12,fontWeight:600,textTransform:"uppercase",color:u.colors.textSecondary,letterSpacing:"0.5px"},Un={padding:"16px",verticalAlign:"middle"},pl="/reporting/templates-v2/",Oi="/reporting/service-templates-v2/";async function dy(e){return Z(pl,e)}async function cy(e,t){return oe(pl,e,t)}async function uy(e,t){return vn(`${pl}${t}/`,e,{is_frozen:!0})}async function fy(e,t,n){const l=n?`${pl}${t}/activate/?force=1`:`${pl}${t}/activate/`;return oe(l,e,{})}async function py(e){return Z(Oi,e)}async function hy(e,t){return oe(Oi,e,t)}async function gy(e,t){return oe(`${Oi}${t}/set-default/`,e,{})}async function my(e,t,n){return vn(`${Oi}${t}/`,e,{is_active:n})}const Hd={code:"",name:"",jsonSchema:"",uiSchema:""},Gd={service:"",template:"",is_active:!0};function yy(){const{token:e}=Se(),t=qe(),[n,l]=g.useState([]),[i,s]=g.useState([]),[o,a]=g.useState([]),[d,c]=g.useState(!0),[x,h]=g.useState(null),[y,j]=g.useState(null),[S,_]=g.useState(Hd),[w,f]=g.useState(Gd),[m,p]=g.useState(null),v=g.useCallback(async()=>{if(e)try{c(!0),h(null);const[L,R,q]=await Promise.all([dy(e),Z("/services/",e),py(e)]);l(Array.isArray(L)?L:L.results||[]),s(Array.isArray(R)?R:R.results||[]),a(Array.isArray(q)?q:q.results||[])}catch(L){h(L.message||"Failed to load TemplateV2 data")}finally{c(!1)}},[e]);g.useEffect(()=>{v()},[v]);const b=g.useMemo(()=>new Map(n.map(L=>[L.id,L])),[n]),E=g.useMemo(()=>new Map(i.map(L=>[L.id,L])),[i]),z=(L,R)=>{if(!L.trim())return null;try{return JSON.parse(L)}catch{throw new Error(`Invalid JSON in ${R}.`)}},k=async()=>{if(e){h(null),j(null);try{const L=z(S.jsonSchema,"JSON schema"),R=z(S.uiSchema,"UI schema"),q={code:S.code,name:S.name,json_schema:L,ui_schema:R},ce=await cy(e,q);j("TemplateV2 created."),_(Hd),ce!=null&&ce.id?t(`/settings/templates-v2/${ce.id}/builder`):v()}catch(L){h(L.message||"Failed to create TemplateV2")}}},F=async(L,R=!1)=>{if(e){h(null),j(null);try{await fy(e,L,R),p(null),j("Template activated."),v()}catch(q){q.status===409?(p(L),h("Conflict while activating template.")):h(q.message||"Failed to activate template")}}},T=async()=>{if(e){h(null),j(null);try{const L={service:w.service,template:w.template,is_active:w.is_active};await hy(e,L),j("Service mapping created."),f(Gd),v()}catch(L){h(L.message||"Failed to create mapping")}}},$=async L=>{if(e){h(null),j(null);try{await uy(e,L),j("Template frozen."),v()}catch(R){h(R.message||"Failed to freeze template")}}},J=async L=>{if(e){h(null),j(null);try{await gy(e,L),j("Default mapping set."),v()}catch(R){h(R.message||"Failed to set default mapping")}}},Q=async L=>{if(e){h(null),j(null);try{await my(e,L.id,!L.is_active),j("Mapping updated."),v()}catch(R){h(R.message||"Failed to update mapping")}}};return r.jsxs("div",{style:{padding:20},children:[r.jsxs("div",{style:{marginBottom:20},children:[r.jsx("h1",{style:{fontSize:24,margin:0},children:"Templates V2"}),r.jsx("p",{style:{color:u.colors.textSecondary,marginTop:6},children:"Manage schema-driven templates and service mappings."})]}),x&&r.jsx(Ee,{message:x}),y&&r.jsx(Rt,{message:y}),d?r.jsx("div",{children:"Loading..."}):r.jsxs(r.Fragment,{children:[r.jsxs("section",{style:{marginBottom:32},children:[r.jsx("h2",{style:{fontSize:20,marginBottom:12},children:"Create TemplateV2"}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,padding:20,display:"grid",gap:16},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Code"}),r.jsx("input",{type:"text",value:S.code,onChange:L=>_(R=>({...R,code:L.target.value})),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Name"}),r.jsx("input",{type:"text",value:S.name,onChange:L=>_(R=>({...R,name:L.target.value})),style:{width:"100%",padding:8}})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"JSON Schema"}),r.jsx("textarea",{value:S.jsonSchema,onChange:L=>_(R=>({...R,jsonSchema:L.target.value})),style:{width:"100%",minHeight:140,padding:8,fontFamily:"monospace"},placeholder:"Paste JSON schema..."})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"UI Schema"}),r.jsx("textarea",{value:S.uiSchema,onChange:L=>_(R=>({...R,uiSchema:L.target.value})),style:{width:"100%",minHeight:120,padding:8,fontFamily:"monospace"},placeholder:"Optional UI schema JSON..."})]}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(I,{variant:"primary",onClick:k,children:"Create Template"})})]})]}),r.jsxs("section",{style:{marginBottom:32},children:[r.jsx("h2",{style:{fontSize:20,marginBottom:12},children:"Templates"}),r.jsx("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Code"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Name"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Version"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Status"}),r.jsx("th",{style:{textAlign:"right",padding:12,fontSize:12},children:"Action"})]})}),r.jsx("tbody",{children:n.map(L=>r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.borderLight}`},children:[r.jsx("td",{style:{padding:12},children:L.code||"-"}),r.jsx("td",{style:{padding:12},children:L.name}),r.jsx("td",{style:{padding:12},children:L.version??"-"}),r.jsx("td",{style:{padding:12},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{children:L.status||(L.is_active?"active":"-")}),L.is_frozen&&r.jsx("span",{style:{fontSize:11,backgroundColor:"#ffeeba",color:"#795548",padding:"2px 6px",borderRadius:4,textTransform:"uppercase"},children:"Frozen"})]})}),r.jsx("td",{style:{padding:12,textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,alignItems:"center"},children:[r.jsx(I,{variant:"secondary",onClick:()=>t(`/settings/templates-v2/${L.id}/builder`),children:"Open Builder"}),!L.is_frozen&&r.jsx(I,{variant:"secondary",onClick:()=>$(L.id),children:"Freeze"}),r.jsx(I,{variant:"secondary",onClick:()=>F(L.id),children:"Activate"}),m===L.id&&r.jsx(I,{variant:"primary",onClick:()=>F(L.id,!0),style:{backgroundColor:u.colors.danger,borderColor:u.colors.danger},children:"Force Activate"})]})})]},L.id))})]})})]}),r.jsxs("section",{children:[r.jsx("h2",{style:{fontSize:20,marginBottom:12},children:"Service Template Mappings"}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,padding:20,marginBottom:20},children:[r.jsx("h3",{style:{marginTop:0},children:"Create Mapping"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Service"}),r.jsxs("select",{value:w.service,onChange:L=>f(R=>({...R,service:L.target.value})),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"",children:"Select service"}),i.map(L=>r.jsxs("option",{value:L.id,children:[L.code?`${L.code} - `:"",L.name]},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:6},children:"Template"}),r.jsxs("select",{value:w.template,onChange:L=>f(R=>({...R,template:L.target.value})),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"",children:"Select template"}),n.map(L=>r.jsxs("option",{value:L.id,children:[L.code?`${L.code} - `:"",L.name]},L.id))]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("input",{type:"checkbox",checked:w.is_active,onChange:L=>f(R=>({...R,is_active:L.target.checked}))}),r.jsx("span",{children:"Active"})]})]}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:r.jsx(I,{variant:"primary",onClick:T,children:"Create Mapping"})})]}),r.jsx("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Service"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Template"}),r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:12},children:"Status"}),r.jsx("th",{style:{textAlign:"right",padding:12,fontSize:12},children:"Actions"})]})}),r.jsx("tbody",{children:o.map(L=>{const R=E.get(L.service),q=b.get(L.template);return r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.borderLight}`},children:[r.jsx("td",{style:{padding:12},children:R?`${R.code?`${R.code} - `:""}${R.name}`:L.service}),r.jsx("td",{style:{padding:12},children:q?`${q.code?`${q.code} - `:""}${q.name}`:L.template}),r.jsx("td",{style:{padding:12},children:L.is_default?"Default":L.is_active?"Active":"Inactive"}),r.jsx("td",{style:{padding:12,textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[r.jsx(I,{variant:"secondary",onClick:()=>J(L.id),children:"Set Default"}),r.jsx(I,{variant:"secondary",onClick:()=>Q(L),children:L.is_active?"Deactivate":"Activate"})]})})]},L.id)})})]})})]})]})]})}function Kr({isOpen:e,onClose:t,title:n,children:l}){return e?r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,padding:24,width:"100%",maxWidth:600,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:16},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{fontSize:20,margin:0,fontWeight:u.typography.fontWeight.semibold},children:n}),r.jsx("button",{onClick:t,style:{border:"none",background:"transparent",cursor:"pointer",fontSize:24,lineHeight:1,color:u.colors.textSecondary},children:""})]}),r.jsx("div",{children:l})]})}):null}function xy({isOpen:e,onClose:t,onImportSuccess:n,importUrl:l,title:i}){var p,v;const{token:s}=Se(),[o,a]=g.useState(null),[d,c]=g.useState("idle"),[x,h]=g.useState(null),[y,j]=g.useState(null),S=()=>{a(null),c("idle"),h(null),j(null)},_=()=>{S(),t()},w=b=>{b.target.files&&(a(b.target.files[0]),c("idle"),h(null))},f=g.useCallback(async()=>{if(!(!o||!s)){c("validating"),j(null);try{const b=new FormData;b.append("file",o);const E=await xo(`${l}?dry_run=true`,s,b);h(E),c("validation_complete"),E.errors&&E.errors.length>0&&j("Validation failed. Please fix the errors in your CSV and try again.")}catch(b){c("error"),j(b.message||"Validation failed")}}},[o,s,l]),m=g.useCallback(async()=>{if(!(!o||!s)){c("importing"),j(null);try{const b=new FormData;b.append("file",o),await xo(`${l}?dry_run=false`,s,b),c("success"),n()}catch(b){c("error"),j(b.message||"Import failed")}}},[o,s,l,n]);return r.jsx(Kr,{isOpen:e,onClose:_,title:i,children:d==="success"?r.jsxs("div",{children:[r.jsx("p",{children:"Import successful!"}),r.jsx(I,{onClick:_,children:"Close"})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[y&&r.jsx("div",{style:{color:u.colors.danger,fontWeight:u.typography.fontWeight.medium},children:y}),r.jsx("input",{type:"file",accept:".csv",onChange:w}),o&&r.jsx(I,{onClick:f,disabled:d==="validating",children:d==="validating"?"Validating...":"Validate (Dry Run)"}),x&&d==="validation_complete"&&r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:16,marginBottom:8},children:"Validation Result"}),r.jsxs("p",{children:["To be Created: ",x.created]}),r.jsxs("p",{children:["To be Updated: ",x.updated]}),r.jsxs("p",{children:["Errors: ",((p=x.errors)==null?void 0:p.length)||0]}),x.errors&&x.errors.length>0&&r.jsx("div",{style:{maxHeight:200,overflowY:"auto",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:8},children:r.jsxs("table",{style:{width:"100%",fontSize:12},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{textAlign:"left"},children:"Row"}),r.jsx("th",{style:{textAlign:"left"},children:"Error"})]})}),r.jsx("tbody",{children:x.errors.map((b,E)=>r.jsxs("tr",{children:[r.jsx("td",{children:b.row}),r.jsx("td",{children:b.error})]},E))})]})}),((v=x.errors)==null?void 0:v.length)===0&&r.jsx(I,{onClick:m,variant:"primary",style:{marginTop:16},children:"Apply Import"})]})]})})}const Kd=async(e,t,n)=>{const l={};n&&(l.Authorization=`Bearer ${n}`);const i=await fetch(`${un}${e}`,{headers:l});if(!i.ok){const d=await i.text();throw new Error(d||"Download failed")}const s=await i.blob(),o=window.URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=t,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(o)};function vy(){const{token:e}=Se(),t=qe(),[n,l]=g.useState([]),[i,s]=g.useState(!0),[o,a]=g.useState(null),[d,c]=g.useState(""),[x,h]=g.useState(!1),y=g.useCallback(async()=>{if(e)try{s(!0);const _=d?`?search=${encodeURIComponent(d)}`:"",w=await Z(`/services/${_}`,e);l(Array.isArray(w)?w:w.results||[])}catch(_){a(_.message||"Failed to load services")}finally{s(!1)}},[e,d]);g.useEffect(()=>{y()},[y]);const j=async _=>{if(window.confirm("Are you sure you want to deactivate this service?"))try{await An(`/services/${_}/`,e),y()}catch(w){a(w.message||"Failed to deactivate")}},S=()=>{h(!1),y()};return r.jsxs("div",{style:{padding:20},children:[r.jsx(xy,{isOpen:x,onClose:()=>h(!1),onImportSuccess:S,importUrl:"/services/import-csv/",title:"Import Services"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[r.jsx("h1",{style:{fontSize:24,margin:0},children:"Services"}),r.jsxs("div",{style:{display:"flex",gap:12},children:[r.jsx("input",{placeholder:"Search services...",value:d,onChange:_=>c(_.target.value),style:{padding:"8px 12px",borderRadius:4,border:"1px solid #ccc"}}),r.jsx(I,{variant:"secondary",onClick:()=>Kd("/services/template-csv/","services_template.csv",e),children:"Download CSV Template"}),r.jsx(I,{variant:"secondary",onClick:()=>Kd("/services/export-csv/","services_export.csv",e),children:"Export CSV"}),r.jsx(I,{variant:"secondary",onClick:()=>h(!0),children:"Import CSV"}),r.jsx(I,{variant:"primary",onClick:()=>t("/settings/services/new"),children:"Create Service"})]})]}),o&&r.jsx(Ee,{message:o}),r.jsx("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:u.colors.backgroundGray,borderBottom:`1px solid ${u.colors.border}`},children:[r.jsx("th",{style:{padding:12,textAlign:"left"},children:"Code"}),r.jsx("th",{style:{padding:12,textAlign:"left"},children:"Name"}),r.jsx("th",{style:{padding:12,textAlign:"left"},children:"Category"}),r.jsx("th",{style:{padding:12,textAlign:"right"},children:"Price"}),r.jsx("th",{style:{padding:12,textAlign:"right"},children:"Actions"})]})}),r.jsxs("tbody",{children:[n.map(_=>r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.borderLight}`},children:[r.jsx("td",{style:{padding:12},children:_.code}),r.jsx("td",{style:{padding:12},children:_.name}),r.jsx("td",{style:{padding:12},children:_.category}),r.jsx("td",{style:{padding:12,textAlign:"right"},children:_.price}),r.jsxs("td",{style:{padding:12,textAlign:"right"},children:[r.jsx(I,{variant:"secondary",onClick:()=>t(`/settings/services/${_.id}`),style:{marginRight:8},children:"Edit"}),r.jsx(I,{variant:"secondary",onClick:()=>j(_.id),style:{color:u.colors.danger},children:"Del"})]})]},_.id)),n.length===0&&!i&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{padding:20,textAlign:"center",color:u.colors.textSecondary},children:"No services found."})})]})]})})]})}function jy(){const{id:e}=Ai(),t=!e||e==="new",{token:n}=Se(),l=qe(),[i,s]=g.useState({code:"",name:"",category:"Radiology",modality:"",price:0,tat_value:1,tat_unit:"hours",is_active:!0}),[o,a]=g.useState([]),[d,c]=g.useState(!1),[x,h]=g.useState(!1),[y,j]=g.useState(null),[S,_]=g.useState(null),w=g.useCallback(async()=>{try{const p=await Z("/modalities/",n);a(Array.isArray(p)?p:p.results||[])}catch(p){console.error("Failed to load modalities:",p)}},[n]),f=g.useCallback(async()=>{c(!0);try{const v={...await Z(`/services/${e}/`,n)};v.modality&&typeof v.modality=="object"&&(v.modality=v.modality.id),s(v)}catch(p){j(p.message)}finally{c(!1)}},[e,n]);g.useEffect(()=>{w(),!t&&n&&f()},[w,f,t,n]);const m=async()=>{h(!0),j(null),_(null);try{let p;t?(p=await oe("/services/",n,i),l(`/settings/services/${p.id}`,{replace:!0}),_("Service created")):(p=await kf(`/services/${e}/`,n,i),_("Service updated"))}catch(p){j(p.message)}finally{h(!1)}};return d?r.jsx("div",{children:"Loading..."}):r.jsxs("div",{style:{padding:20,maxWidth:800,margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[r.jsx("h1",{style:{fontSize:24,margin:0},children:t?"New Service":`Edit Service: ${i.code}`}),r.jsx(I,{variant:"secondary",onClick:()=>l("/settings/services"),children:"Back to List"})]}),y&&r.jsx(Ee,{message:y}),S&&r.jsx(Rt,{message:S}),r.jsxs("div",{style:{backgroundColor:"white",padding:20,borderRadius:u.radius.lg,border:`1px solid ${u.colors.border}`},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Code"}),r.jsx("input",{value:i.code||"",onChange:p=>s({...i,code:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Name"}),r.jsx("input",{value:i.name,onChange:p=>s({...i,name:p.target.value}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Category"}),r.jsxs("select",{value:i.category,onChange:p=>s({...i,category:p.target.value}),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"Radiology",children:"Radiology"}),r.jsx("option",{value:"Lab",children:"Lab"}),r.jsx("option",{value:"OPD",children:"OPD"}),r.jsx("option",{value:"Procedure",children:"Procedure"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Modality"}),r.jsxs("select",{value:i.modality||"",onChange:p=>s({...i,modality:p.target.value}),style:{width:"100%",padding:8},children:[r.jsx("option",{value:"",children:"Select Modality"}),o.map(p=>r.jsxs("option",{value:p.id,children:[p.code," - ",p.name]},p.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Price"}),r.jsx("input",{type:"number",value:i.price,onChange:p=>s({...i,price:parseFloat(p.target.value)}),style:{width:"100%",padding:8}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:5},children:"Turnaround Time"}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("input",{type:"number",value:i.tat_value,onChange:p=>s({...i,tat_value:parseInt(p.target.value)}),style:{width:"60%",padding:8}}),r.jsxs("select",{value:i.tat_unit,onChange:p=>s({...i,tat_unit:p.target.value}),style:{width:"40%",padding:8},children:[r.jsx("option",{value:"hours",children:"Hours"}),r.jsx("option",{value:"days",children:"Days"})]})]})]})]}),r.jsx("div",{style:{marginTop:16},children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("input",{type:"checkbox",checked:i.is_active,onChange:p=>s({...i,is_active:p.target.checked})}),"Active"]})}),r.jsx("div",{style:{marginTop:20,textAlign:"right"},children:r.jsx(I,{variant:"primary",onClick:m,disabled:x,children:x?"Saving...":t?"Create Service":"Update Service"})})]})]})}function vo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function ms(e){const t={},n=[];e.sections.forEach(i=>{i.fields.forEach(s=>{const o={};s.type==="text"?o.type="string":s.type==="enum"?(o.type="string",s.enumValues&&s.enumValues.length>0&&(o.enum=s.enumValues)):o.type=s.type,o.title=s.title,(s.type==="number"||s.type==="integer")&&(s.min!==void 0&&(o.minimum=s.min),s.max!==void 0&&(o.maximum=s.max)),s.default!==void 0&&s.default!==""&&(o.default=s.default),t[s.key]=o,s.required&&n.push(s.key)})});const l={type:"object",properties:t};return n.length>0&&(l.required=n),l}function Qd(e){return{groups:e.sections.map(n=>{const l=n.fields.map(o=>o.key),i={};n.fields.forEach(o=>{o.widget?i[o.key]=o.widget:o.type==="text"?i[o.key]="textarea":o.type==="boolean"?i[o.key]="checkbox":o.type==="enum"&&(i[o.key]="select")});const s={title:n.title,fields:l};return Object.keys(i).length>0&&(s.widgets=i),s})}}function zf(e){const t={field:e.field};return e.op==="is_empty"?t.is_empty=!0:e.op==="is_not_empty"?t.is_not_empty=!0:t[e.op]=e.value,t}function jo(e){return e.map(t=>{if(t.kind==="text")return t.template;{const l={if:zf(t.if),then:jo(t.then)};return t.else&&t.else.length>0&&(l.else=jo(t.else)),l}})}function Yd(e){const t={};e.narrative.computed_fields&&e.narrative.computed_fields.forEach(i=>{t[i.key]=i.expr});const n=e.narrative.sections.map(i=>({title:i.title,content:jo(i.lines)})),l=e.narrative.impression_rules.map(i=>({priority:Number(i.priority),when:zf(i.when),text:i.text,continue:!!i.continue}));return{computed_fields:t,sections:n,impression_rules:l}}function Nf(e){const t=Object.keys(e).filter(s=>s!=="field");let n="equals",l;const i=["equals","not_equals","gt","gte","lt","lte","in","not_in","is_empty","is_not_empty"];for(const s of t)if(i.includes(s)){n=s,l=e[s];break}return n==="is_empty"&&l===!0&&(l=void 0),{field:e.field,op:n,value:l}}function Fr(e){return Array.isArray(e)?e.map(t=>{if(typeof t=="string")return{kind:"text",template:t};{const n=t.if?Nf(t.if):{field:"error",op:"equals"},l=Array.isArray(t.then)?Fr(t.then):t.then?Fr([t.then]):[],i=t.else?Array.isArray(t.else)?Fr(t.else):Fr([t.else]):void 0;return{kind:"if",if:n,then:l,else:i}}}):[]}function Lf(e,t,n,l){const i=[],s=(t==null?void 0:t.properties)||{};if(n&&n.groups)n.groups.forEach(a=>{const d={id:vo(),title:a.title||"Untitled Section",fields:[]},c=a.fields||[],x=a.widgets||{};c.forEach(h=>{const y=s[h];if(!y)return;const j={key:h,title:y.title||h,type:"string"};y.type==="integer"?j.type="integer":y.type==="number"?j.type="number":y.type==="boolean"?j.type="boolean":y.enum?j.type="enum":y.type==="string"&&(j.type="string"),y.enum&&(j.enumValues=y.enum),x[h]&&(j.widget=x[h],j.widget==="textarea"&&(j.type="text")),y.minimum!==void 0&&(j.min=y.minimum),y.maximum!==void 0&&(j.max=y.maximum),t.required&&t.required.includes(h)&&(j.required=!0),y.default!==void 0&&(j.default=y.default),d.fields.push(j)}),i.push(d)});else{const a={id:vo(),title:"General",fields:[]};Object.keys(s).forEach(d=>{const c=s[d];a.fields.push({key:d,title:c.title||d,type:"string"})}),a.fields.length>0&&i.push(a)}const o={computed_fields:[],sections:[],impression_rules:[]};return l&&(l.computed_fields&&Object.entries(l.computed_fields).forEach(([a,d])=>{o.computed_fields.push({key:a,expr:d})}),l.sections&&l.sections.forEach(a=>{o.sections.push({title:a.title,lines:Fr(a.content||[])})}),l.impression_rules&&l.impression_rules.forEach(a=>{o.impression_rules.push({priority:a.priority,when:Nf(a.when),text:a.text,continue:a.continue})})),{meta:e,sections:i,narrative:o}}function Sy(e,t){if(!e)return e;const n=JSON.parse(JSON.stringify(e)),l=(i,s,o)=>i.replace(new RegExp(`{{s*${s}s*}}`,"g"),`{{${o}}}`).replace(new RegExp(`\b${s}\b`,"g"),o);return n.sections.forEach(i=>{const s=o=>{o.forEach(a=>{a.kind==="text"?Object.entries(t).forEach(([d,c])=>{a.template=l(a.template,d,c)}):a.kind==="if"&&(t[a.if.field]&&(a.if.field=t[a.if.field]),s(a.then),a.else&&s(a.else))})};s(i.lines)}),n.computed_fields.forEach(i=>{t[i.key]&&(i.key=t[i.key]),Object.entries(t).forEach(([s,o])=>{i.expr=l(i.expr,s,o)})}),n.impression_rules.forEach(i=>{t[i.when.field]&&(i.when.field=t[i.when.field]),Object.entries(t).forEach(([s,o])=>{typeof i.text=="string"&&(i.text=l(i.text,s,o))})}),n}function Df(e){if(!e||typeof e!="object")throw new Error("Invalid block payload");const t=e.content||e,n=t.json_schema||t.ui_schema||t.narrative_rules,l=Array.isArray(t.sections);try{if(n){const i=Lf(e.meta||{},t.json_schema||{},t.ui_schema||{},t.narrative_rules||{});return{sections:i.sections,narrative:i.narrative}}if(l){const i=t.sections.map(o=>({id:o.id||vo(),title:o.title||"Untitled Section",fields:Array.isArray(o.fields)?o.fields.map(a=>{if(!a.key)throw new Error("Block field is missing a key.");return{key:a.key,title:a.title||a.key,type:a.type||"string",required:!!a.required,enumValues:a.enumValues||a.enum||void 0,widget:a.widget,min:a.min,max:a.max,default:a.default}}):[]})),s=t.narrative_defaults?{computed_fields:t.narrative_defaults.computed_fields||[],sections:t.narrative_defaults.sections||[],impression_rules:t.narrative_defaults.impression_rules||[]}:{computed_fields:[],sections:[],impression_rules:[]};return{sections:i,narrative:s}}}catch{throw new Error("Block content is malformed. Please fix block JSON before inserting.")}throw new Error("Block does not contain sections or schema to insert.")}function _y({onClose:e,onInsert:t,isSectionSelected:n,blocks:l,loading:i,error:s,onReload:o}){const[a,d]=g.useState(""),[c,x]=g.useState(""),[h,y]=g.useState(!1),[j,S]=g.useState({}),_=g.useMemo(()=>l.filter(f=>f.name.toLowerCase().includes(a.toLowerCase())&&(c?(f.modality||"").toLowerCase().includes(c.toLowerCase()):!0)),[l,a,c]),w=f=>{try{const m=Df(f),p=m.sections.length,v=m.sections.reduce((b,E)=>b+E.fields.length,0);return{ok:!0,sectionsCount:p,fieldsCount:v,fragment:m}}catch(m){return{ok:!1,error:m.message}}};return r.jsx("div",{className:"modal-backdrop",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h2",{children:"Insert Block"}),r.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[r.jsx("input",{type:"text",placeholder:"Search by name...",value:a,onChange:f=>d(f.target.value),style:{flex:1,padding:8}}),r.jsx("input",{type:"text",placeholder:"Filter by modality",value:c,onChange:f=>x(f.target.value),style:{width:160,padding:8}})]}),r.jsx("input",{type:"checkbox",checked:h,onChange:()=>y(!h),disabled:!n})," ",r.jsx("label",{children:r.jsx("label",{children:"Merge into selected section"})}),!n&&r.jsx("div",{style:{color:"#b26a00",fontSize:12,marginTop:4},children:"Select a section to enable merge mode."}),r.jsxs("div",{style:{margin:"10px 0"},children:[r.jsx("button",{onClick:o,style:{marginRight:8},children:"Reload"}),r.jsx("button",{onClick:e,children:"Close"})]}),i&&r.jsx("p",{children:"Loading blocks..."}),s&&r.jsx("p",{style:{color:"red"},children:s}),r.jsxs("div",{style:{maxHeight:360,overflowY:"auto"},children:[_.map(f=>{const m=w(f),p=j[f.id];return r.jsxs("div",{style:{border:"1px solid #ddd",padding:10,marginBottom:8,borderRadius:6,background:"white"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:600},children:[f.name," ",f.modality&&r.jsxs("span",{style:{color:"#666",fontSize:12},children:["(",f.modality,")"]})]}),r.jsx("div",{style:{fontSize:12,color:"#555"},children:f.description}),m.ok?r.jsxs("div",{style:{fontSize:12,color:"#0b6b37"},children:[m.sectionsCount," sections  ",m.fieldsCount," fields"]}):r.jsxs("div",{style:{fontSize:12,color:"#b00020"},children:["Invalid block: ",m.error]})]}),r.jsxs("div",{style:{display:"flex",gap:6},children:[m.ok&&r.jsx("button",{onClick:()=>t(f,h),disabled:!m.ok,children:"Insert"}),r.jsx("button",{onClick:()=>S(v=>({...v,[f.id]:!p})),children:p?"Hide":"Preview"})]})]}),p&&m.ok&&m.fragment&&r.jsx("div",{style:{marginTop:8,padding:8,background:"#f9f9f9",borderRadius:4},children:m.fragment.sections.map((v,b)=>r.jsxs("div",{style:{marginBottom:6},children:[r.jsx("div",{style:{fontWeight:600},children:v.title}),r.jsxs("div",{style:{fontSize:12,color:"#555"},children:[v.fields.length," fields"]})]},b))})]},f.id)}),_.length===0&&!i&&r.jsx("div",{style:{color:"#888"},children:"No blocks found."})]})]})})}function wy({conflictingKeys:e,renameMapping:t,onRenameChange:n,onResolve:l,onCancel:i,existingKeys:s}){const[o,a]=Co.useState({}),d=()=>{const x={},h=e.map(y=>t[y.key]||`${y.key}_block`);return e.forEach(y=>{const j=t[y.key]||`${y.key}_block`;s.includes(j)&&(x[y.key]="This key already exists in the template."),h.filter(S=>S===j).length>1&&(x[y.key]="This key is not unique among the new keys.")}),a(x),Object.keys(x).length===0},c=()=>{d()&&l()};return r.jsx("div",{className:"modal-backdrop",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h2",{children:"Resolve Key Conflicts"}),r.jsx("p",{children:"The following field keys from the block already exist in your template. Please rename them to continue."}),e.map(x=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5,marginBottom:10},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{children:x.key}),r.jsx("input",{type:"text",value:t[x.key]||`${x.key}_block`,onChange:h=>n(x.key,h.target.value),placeholder:"New key"})]}),o[x.key]&&r.jsx("span",{style:{color:"red",fontSize:12},children:o[x.key]})]},x.key)),r.jsxs("div",{style:{marginTop:20},children:[r.jsx("button",{onClick:c,disabled:Object.keys(o).length>0,children:"Resolve and Insert"}),r.jsx("button",{onClick:i,style:{marginLeft:10},children:"Cancel"})]})]})})}const ky=({currentStep:e,onStepChange:t,children:n})=>{const l=[{id:"sections",label:"1. Sections"},{id:"findings",label:"2. Findings"},{id:"narrative",label:"3. Narrative"}];return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#fcfcfc"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0",borderBottom:`1px solid ${u.colors.border}`,backgroundColor:"white"},children:r.jsx("div",{style:{display:"flex",gap:40},children:l.map(i=>r.jsxs("div",{onClick:()=>t(i.id),style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",opacity:e===i.id?1:.5,transition:"opacity 0.2s"},children:[r.jsx("div",{style:{width:24,height:24,borderRadius:"50%",backgroundColor:e===i.id?u.colors.primary:"#ccc",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,fontWeight:"bold"},children:l.indexOf(i)+1}),r.jsx("span",{style:{fontWeight:e===i.id?"bold":"normal",color:e===i.id?u.colors.primary:u.colors.textSecondary},children:i.label.split(". ")[1]})]},i.id))})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"40px"},children:r.jsx("div",{style:{maxWidth:900,margin:"0 auto"},children:n})}),r.jsxs("div",{style:{padding:"20px 40px",borderTop:`1px solid ${u.colors.border}`,backgroundColor:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("button",{disabled:e==="sections",onClick:()=>t(e==="narrative"?"findings":"sections"),style:{padding:"10px 24px",borderRadius:8,border:`1px solid ${u.colors.border}`,backgroundColor:"white",cursor:e==="sections"?"default":"pointer",opacity:e==="sections"?.5:1},children:"Back"}),r.jsx("div",{style:{fontSize:13,color:u.colors.textTertiary},children:"Auto-saving draft..."}),r.jsx("button",{disabled:e==="narrative",onClick:()=>t(e==="sections"?"findings":"narrative"),style:{padding:"10px 32px",borderRadius:8,border:"none",backgroundColor:u.colors.primary,color:"white",fontWeight:"bold",cursor:e==="narrative"?"default":"pointer",opacity:e==="narrative"?.5:1},children:"Next Step"})]})]})},by=({title:e,status:t,onStatusChange:n,onEdit:l,validationError:i,disabled:s})=>{const a=(()=>{switch(t){case"normal":return{bg:"#e6fffa",border:"#b2f5ea",text:"#234e52",label:"Normal"};case"abnormal":return{bg:"#fff5f5",border:"#fed7d7",text:"#822727",label:"Abnormal"};case"not_assessed":return{bg:"#f7fafc",border:"#edf2f7",text:"#4a5568",label:"Not Assessed"}}})();return r.jsxs("div",{style:{border:`1px solid ${i?u.colors.danger:a.border}`,borderRadius:12,padding:16,backgroundColor:a.bg,display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,transition:"all 0.2s",opacity:s?.6:1},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.jsx("h3",{style:{margin:0,fontSize:16,color:u.colors.textPrimary},children:e}),r.jsx("span",{style:{fontSize:10,fontWeight:"bold",textTransform:"uppercase",padding:"2px 8px",borderRadius:999,backgroundColor:a.border,color:a.text},children:a.label})]}),i&&r.jsx("div",{style:{color:u.colors.danger,fontSize:12,marginTop:4},children:i})]}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("button",{onClick:()=>n("normal"),disabled:s,style:{padding:"6px 12px",borderRadius:6,border:"1px solid #cbd5e0",backgroundColor:t==="normal"?a.border:"white",cursor:"pointer",fontSize:12},children:"Mark Normal"}),r.jsx("button",{onClick:()=>n("not_assessed"),disabled:s,style:{padding:"6px 12px",borderRadius:6,border:"1px solid #cbd5e0",backgroundColor:t==="not_assessed"?a.border:"white",cursor:"pointer",fontSize:12},children:"Not Assessed"}),r.jsx("button",{onClick:l,disabled:s,style:{padding:"6px 16px",borderRadius:6,border:"none",backgroundColor:u.colors.primary,color:"white",cursor:"pointer",fontSize:12,fontWeight:"bold"},children:"Go to Findings"})]})]})},Cy=({state:e,sectionStatuses:t,onStatusChange:n,onGoToFindings:l,validationErrors:i})=>r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h1",{style:{fontSize:24,marginBottom:8},children:"Sections"}),r.jsx("p",{style:{color:u.colors.textSecondary},children:"Manage the main sections of your report. Mark sections as Normal or Not Assessed to quickly fill defaults."})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:e.sections.map(s=>r.jsx(by,{title:s.title,status:t[s.id]||"not_assessed",onStatusChange:o=>n(s.id,o),onEdit:()=>l(s.id),validationError:i[s.id]},s.id))}),e.sections.length===0&&r.jsx("div",{style:{padding:40,textAlign:"center",border:`2px dashed ${u.colors.border}`,borderRadius:12,color:u.colors.textSecondary},children:"No sections defined yet. Switch to Advanced Mode to add sections or insert a block."})]}),Jd={};function Ey(e,t){if(t)return t;if(Jd[e])return Jd[e];let n=e;return n=n.replace(/_r_/g," (Right) "),n=n.replace(/_l_/g," (Left) "),n=n.replace(/_/g," "),n=n.charAt(0).toUpperCase()+n.slice(1),n=n.replace(/\s+/g," ").trim(),n.includes("(Right)")&&(n="Right "+n.replace("(Right)","").trim()),n.includes("(Left)")&&(n="Left "+n.replace("(Left)","").trim()),n}function Ry(e){return e.endsWith("_cm")?"cm":e.endsWith("_mm")?"mm":e.endsWith("_cc")?"cc":e.endsWith("_g")?"g":null}const So=({field:e,value:t,onChange:n,disabled:l=!1,basicMode:i=!0})=>{var j;const s=i?Ey(e.key,e.title):e.title,o=Ry(e.key),a=S=>r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:4},children:S.map(_=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,cursor:l?"default":"pointer",fontSize:13},children:[r.jsx("input",{type:"radio",name:e.key,value:_,checked:t===_,onChange:()=>n(_),disabled:l}),_]},_))}),d=S=>{const _=Array.isArray(t)?t:t?[t]:[];return r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:4},children:S.map(w=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,cursor:l?"default":"pointer",fontSize:13},children:[r.jsx("input",{type:"checkbox",checked:_.includes(w),onChange:f=>{f.target.checked?n([..._,w]):n(_.filter(m=>m!==w))},disabled:l}),w]},w))})},c=()=>r.jsx("div",{style:{display:"flex",gap:2,backgroundColor:u.colors.backgroundGray,padding:2,borderRadius:6,width:"fit-content",marginTop:4},children:[{label:"Yes",val:!0},{label:"No",val:!1}].map(S=>r.jsx("button",{onClick:()=>n(S.val),disabled:l,style:{padding:"4px 16px",border:"none",borderRadius:4,fontSize:12,fontWeight:t===S.val?"bold":"normal",backgroundColor:t===S.val?"white":"transparent",boxShadow:t===S.val?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:l?"default":"pointer",color:t===S.val?u.colors.primary:u.colors.textPrimary},children:S.label},S.label))}),x=()=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:4},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",border:`1px solid ${u.colors.border}`,borderRadius:4,overflow:"hidden"},children:[r.jsx("button",{onClick:()=>n((Number(t)||0)-(e.type==="integer"?1:.1)),disabled:l,style:{padding:"4px 8px",border:"none",background:"#f5f5f5",cursor:"pointer"},children:"-"}),r.jsx("input",{type:"number",value:t??"",onChange:S=>n(S.target.value===""?void 0:Number(S.target.value)),disabled:l,style:{width:60,border:"none",textAlign:"center",padding:"4px 0",fontSize:13}}),r.jsx("button",{onClick:()=>n((Number(t)||0)+(e.type==="integer"?1:.1)),disabled:l,style:{padding:"4px 8px",border:"none",background:"#f5f5f5",cursor:"pointer"},children:"+"})]}),o&&r.jsx("span",{style:{fontSize:12,color:u.colors.textSecondary},children:o})]}),h=(S=!1)=>r.jsx("div",{style:{marginTop:4},children:S?r.jsx("textarea",{value:t??"",onChange:_=>n(_.target.value),disabled:l,rows:3,style:{width:"100%",padding:8,borderRadius:4,border:`1px solid ${u.colors.border}`,fontSize:13,resize:"vertical"}}):r.jsx("input",{type:"text",value:t??"",onChange:_=>n(_.target.value),disabled:l,style:{width:"100%",padding:8,borderRadius:4,border:`1px solid ${u.colors.border}`,fontSize:13}})});let y;return e.type==="enum"?e.widget==="select"?y=r.jsxs("select",{value:t??"",onChange:S=>n(S.target.value),disabled:l,style:{width:"100%",padding:8,borderRadius:4,border:`1px solid ${u.colors.border}`,marginTop:4},children:[r.jsx("option",{value:"",children:"Select..."}),(j=e.enumValues)==null?void 0:j.map(S=>r.jsx("option",{value:S,children:S},S))]}):e.widget==="checkbox"?y=d(e.enumValues||[]):y=a(e.enumValues||[]):e.type==="boolean"?y=c():e.type==="number"||e.type==="integer"?y=x():e.type==="string"||e.type==="text"?y=h(e.type==="text"||e.widget==="textarea"):y=r.jsxs("div",{style:{color:"orange",fontSize:12},children:["Unsupported type: ",e.type]}),r.jsxs("div",{style:{marginBottom:16},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{style:{fontWeight:500,fontSize:14,color:u.colors.textPrimary},children:s}),!i&&r.jsxs("span",{style:{fontSize:10,color:"#999",fontFamily:"monospace"},children:["[",e.key,"]"]})]}),y]})},Ty=({leftField:e,rightField:t,values:n,onChange:l,disabled:i,basicMode:s})=>r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:16},children:[r.jsx("div",{children:r.jsx(So,{field:e,value:n[e.key],onChange:o=>l(e.key,o),disabled:i,basicMode:s})}),r.jsx("div",{children:r.jsx(So,{field:t,value:n[t.key],onChange:o=>l(t.key,o),disabled:i,basicMode:s})})]});function Py(e){const t=[],n=[],l=new Set;return e.forEach(i=>{if(!l.has(i.key))if(i.key.includes("_l_")){const s=i.key.replace("_l_","_r_"),o=e.find(a=>a.key===s);o?(t.push([i,o]),l.add(i.key),l.add(s)):(n.push(i),l.add(i.key))}else if(i.key.includes("_r_")){const s=i.key.replace("_r_","_l_");e.find(a=>a.key===s)||(n.push(i),l.add(i.key))}else n.push(i),l.add(i.key)}),{pairs:t,singles:n}}const zy=({section:e,values:t,onChange:n,onBack:l,basicMode:i})=>{const{pairs:s,singles:o}=Py(e.fields);return r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:32,display:"flex",alignItems:"center",gap:16},children:[r.jsx("button",{onClick:l,style:{border:"none",background:"none",cursor:"pointer",fontSize:20,color:u.colors.primary,display:"flex",alignItems:"center"},children:""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:24,margin:0},children:e.title}),r.jsx("p",{style:{color:u.colors.textSecondary,margin:"4px 0 0 0"},children:"Configure findings for this section. Side-by-side layout is automatically applied for paired organs."})]})]}),r.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${u.colors.border}`,borderRadius:12,padding:32},children:[s.map(([a,d])=>r.jsx(Ty,{leftField:a,rightField:d,values:t,onChange:n,basicMode:i},`${a.key}-${d.key}`)),o.map(a=>r.jsx(So,{field:a,value:t[a.key],onChange:d=>n(a.key,d),basicMode:i},a.key)),e.fields.length===0&&r.jsx("div",{style:{textAlign:"center",color:u.colors.textSecondary,padding:20},children:"No fields defined in this section."})]}),r.jsx("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end"},children:r.jsx("button",{onClick:()=>{e.fields.forEach(a=>{n(a.key,a.default||void 0)})},style:{padding:"8px 16px",borderRadius:6,border:`1px solid ${u.colors.primary}`,color:u.colors.primary,backgroundColor:"white",cursor:"pointer",fontSize:13,fontWeight:500},children:"Reset to Normals"})})]})},Ny=({autoNarrative:e,finalNarrative:t,onFinalNarrativeChange:n,onResetToAuto:l})=>{const[i,s]=g.useState([]),o=()=>{n(t+`
`+e),s([...i,"insert"])},a=()=>{s(i.slice(0,-1))};return r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:32},children:[r.jsx("h1",{style:{fontSize:24,marginBottom:8},children:"Narrative"}),r.jsx("p",{style:{color:u.colors.textSecondary},children:"Compare the automatically generated narrative with your final report text."})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontWeight:"bold",fontSize:13,color:u.colors.textSecondary},children:"Auto Narrative"}),r.jsx("span",{style:{fontSize:11,backgroundColor:"#ebf8ff",color:"#2b6cb0",padding:"2px 8px",borderRadius:4},children:"Generated"})]}),r.jsx("div",{style:{flex:1,minHeight:300,padding:16,backgroundColor:"#f8f9fa",border:`1px solid ${u.colors.border}`,borderRadius:8,fontSize:14,lineHeight:1.6,color:"#444",whiteSpace:"pre-wrap"},children:e||"No auto-narrative generated yet. Select findings to see results."}),r.jsx("button",{onClick:o,style:{padding:"8px",borderRadius:6,border:`1px solid ${u.colors.primary}`,backgroundColor:"white",color:u.colors.primary,cursor:"pointer",fontSize:12,fontWeight:500},children:"Insert Auto Narrative "})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontWeight:"bold",fontSize:13,color:u.colors.textPrimary},children:"Final Narrative"}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("button",{onClick:l,style:{fontSize:11,background:"none",border:"none",color:u.colors.primary,cursor:"pointer",textDecoration:"underline"},children:"Reset to Auto"}),r.jsx("button",{onClick:a,disabled:i.length===0,style:{fontSize:11,background:"none",border:"none",color:"#999",cursor:"pointer"},children:"Undo"})]})]}),r.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:"Start typing your final report here...",style:{flex:1,minHeight:300,padding:16,backgroundColor:"white",border:`2px solid ${u.colors.primary}`,borderRadius:8,fontSize:14,lineHeight:1.6,color:"#1a202c",resize:"none"}}),r.jsxs("div",{style:{padding:12,backgroundColor:"#fffaf0",border:"1px solid #feebc8",borderRadius:6,fontSize:12,color:"#744210"},children:[r.jsx("b",{children:"Pro Tip:"})," You can edit the final narrative freely before saving. The auto-narrative is a calculated draft based on your findings."]})]})]}),r.jsxs("div",{style:{marginTop:40,border:`1px solid ${u.colors.border}`,borderRadius:12,overflow:"hidden"},children:[r.jsx("div",{style:{padding:"12px 20px",backgroundColor:"#f1f1f1",borderBottom:`1px solid ${u.colors.border}`,fontWeight:"bold",fontSize:13},children:"Final Report Preview"}),r.jsx("div",{style:{padding:40,backgroundColor:"white",minHeight:100},children:r.jsxs("div",{style:{maxWidth:700,margin:"0 auto",fontFamily:"serif",fontSize:16,lineHeight:1.5},children:[r.jsx("div",{style:{borderBottom:"2px solid #333",marginBottom:20,paddingBottom:10,textAlign:"center"},children:r.jsx("h2",{style:{margin:0},children:"RADIOLOGY REPORT"})}),r.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t||"Report content will appear here..."})]})})]})]})},ys=({title:e,children:t,style:n,actions:l})=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.md,backgroundColor:"white",overflow:"hidden",height:"100%",...n},children:[r.jsxs("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${u.colors.border}`,backgroundColor:u.colors.backgroundGray,fontWeight:"bold",fontSize:13,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:e}),l]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:12},children:t})]});function Ly(){var V;const{id:e}=Ai(),{token:t}=Se(),n=qe(),[l,i]=g.useState(null),[s,o]=g.useState(!0),[a,d]=g.useState(null),[c,x]=g.useState(null),[h,y]=g.useState("basic"),[j,S]=g.useState("sections"),[_,w]=g.useState({}),[f,m]=g.useState({}),[p,v]=g.useState(""),[b,E]=g.useState(""),[z,k]=g.useState(!1),[F,T]=g.useState(!1),[$,J]=g.useState("form"),[Q,L]=g.useState(null),[R,q]=g.useState("sections"),[ce,C]=g.useState(!1),[M,O]=g.useState([]),[Y,P]=g.useState(null),[G,ee]=g.useState({}),[ie,he]=g.useState(!1),[ve,Ae]=g.useState([]),[B,re]=g.useState([]),[ae,Tt]=g.useState(!1),[Ut,it]=g.useState(null),_t=l==null?void 0:l.meta.is_frozen,st=!!_t,$e=g.useMemo(()=>l?l.sections.flatMap(D=>D.fields.map(U=>U.key)):[],[l]),jn=g.useMemo(()=>[...$e,...ve.filter(D=>!$e.includes(D))],[$e]);g.useEffect(()=>{!t||!e||(o(!0),Z(`/reporting/templates-v2/${e}/`,t).then(D=>{const U=Lf(D,D.json_schema||{},D.ui_schema||{},D.narrative_rules||{});i(U),U.sections.length>0&&L(U.sections[0].id);const K={};U.sections.forEach(ne=>K[ne.id]="not_assessed"),w(K),o(!1)}).catch(D=>{d(D.message||"Failed to load template"),o(!1)}))},[e,t]),g.useEffect(()=>{j==="narrative"&&l&&t&&e&&$n()},[j,f,l]);const $n=async()=>{if(!(!t||!e||!l)){k(!0);try{const U=(await oe(`/reporting/templates-v2/${e}/preview-narrative/`,t,{values_json:f})).narrative_json;let K="";U.sections&&U.sections.forEach(ne=>{K+=`${ne.title}
${ne.lines.join(" ")}

`}),U.impression&&U.impression.length>0&&(K+=`IMPRESSION:
${U.impression.join(`
`)}`),v(K.trim()),b||E(K.trim())}catch(D){console.error("Narrative preview failed",D)}finally{k(!1)}}},X=g.useCallback(()=>{!t||B.length>0||ae||(Tt(!0),Z("/reporting/block-library/",t).then(D=>{const U=Array.isArray(D)?D:D.results||[];re(U),Tt(!1)}).catch(D=>{it(D.message||"Failed to load block library"),Tt(!1)}))},[t,B.length,ae]),Pe=async()=>{if(!(!t||!e||!l)&&!st)try{x(null),d(null);const D={json_schema:ms(l),ui_schema:Qd(l),narrative_rules:Yd(l)};await vn(`/reporting/templates-v2/${e}/`,t,D),x("Template saved successfully.")}catch(D){d(D.message||"Failed to save template")}},Ve=async()=>{if(!(!t||!l))try{const D=l.meta.version+1,U=`${l.meta.code.split("_v")[0]}_v${D}`,K={name:l.meta.name,code:U,modality:l.meta.modality,version:D,is_frozen:!1,status:"draft",json_schema:ms(l),ui_schema:Qd(l),narrative_rules:Yd(l)},ne=await oe("/reporting/templates-v2/",t,K);n(`/settings/templates-v2/${ne.id}/builder`)}catch(D){d(D.message||"Failed to duplicate template")}},On=async(D,U)=>{if(!(!t||!l||st))try{const K=Df(D),ne=K.sections.flatMap(Vt=>Vt.fields),He=ne.map(Vt=>Vt.key),Pt=new Set($e),_r=ne.filter(Vt=>Pt.has(Vt.key));if(_r.length>0){const Vt={},If=new Set([...$e,...He]);_r.forEach(Mi=>{let Wi=`${Mi.key}_block`,_a=1;for(;If.has(Wi);)Wi=`${Mi.key}_${_a}`,_a+=1;Vt[Mi.key]=Wi}),O(_r),P(K),he(U),ee(Vt),Ae(He),C(!0),T(!1);return}Sn(K,U),T(!1)}catch(K){d(K.message||"Failed to insert block")}},Sn=(D,U)=>{if(l)if(U&&Q){const K=D.sections.flatMap(ne=>ne.fields);i(ne=>{if(!ne)return ne;const He=[...ne.sections],Pt=He.findIndex(_r=>_r.id===Q);return Pt>-1&&(He[Pt].fields=[...He[Pt].fields,...K]),{...ne,sections:He,narrative:D.narrative?_n(ne.narrative,D.narrative):ne.narrative}})}else i(K=>K&&{...K,sections:[...K.sections,...D.sections],narrative:D.narrative?_n(K.narrative,D.narrative):K.narrative})},_n=(D,U)=>({computed_fields:[...(D==null?void 0:D.computed_fields)||[],...(U==null?void 0:U.computed_fields)||[]],sections:[...(D==null?void 0:D.sections)||[],...(U==null?void 0:U.sections)||[]],impression_rules:[...(D==null?void 0:D.impression_rules)||[],...(U==null?void 0:U.impression_rules)||[]]}),N=()=>{if(!Y)return;const D={sections:Y.sections.map(U=>({...U,fields:U.fields.map(K=>({...K,key:G[K.key]||K.key}))})),narrative:Y.narrative?Sy(Y.narrative,G):Y.narrative};Sn(D,ie),C(!1),O([]),P(null)};return s?r.jsx("div",{style:{padding:20},children:"Loading builder..."}):l?r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 60px)"},children:[r.jsxs("div",{style:{padding:"10px 20px",borderBottom:`1px solid ${u.colors.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white"},children:[r.jsxs("div",{children:[r.jsxs("nav",{style:{fontSize:12,color:u.colors.textSecondary,marginBottom:4},children:[r.jsx("span",{style:{cursor:"pointer"},onClick:()=>n("/settings/templates-v2"),children:"Templates"})," / ",l.meta.code]}),r.jsx("h1",{style:{fontSize:18,margin:0},children:l.meta.name})]}),r.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,backgroundColor:"#f0f0f0",padding:"4px 8px",borderRadius:20},children:[r.jsx("span",{style:{opacity:h==="basic"?1:.5,fontWeight:h==="basic"?"bold":"normal"},children:"Basic"}),r.jsx("div",{onClick:()=>y(h==="basic"?"advanced":"basic"),style:{width:36,height:20,borderRadius:10,backgroundColor:h==="advanced"?u.colors.primary:"#ccc",position:"relative",cursor:"pointer",transition:"all 0.2s"},children:r.jsx("div",{style:{width:14,height:14,borderRadius:"50%",backgroundColor:"white",position:"absolute",top:3,left:h==="advanced"?19:3,transition:"all 0.2s"}})}),r.jsx("span",{style:{opacity:h==="advanced"?1:.5,fontWeight:h==="advanced"?"bold":"normal"},children:"Advanced"})]}),r.jsxs("div",{style:{display:"flex",gap:8},children:[_t&&r.jsx(I,{variant:"secondary",onClick:Ve,children:"Duplicate"}),r.jsx(I,{variant:"primary",onClick:Pe,disabled:st,children:"Save Changes"})]})]})]}),_t&&r.jsx("div",{style:{backgroundColor:"#fff3cd",borderBottom:"1px solid #ffeeba",padding:"6px 20px",color:"#856404",fontSize:12,fontWeight:600},children:"Frozen template  editing disabled."}),a&&r.jsx("div",{style:{padding:"0 20px"},children:r.jsx(Ee,{message:a})}),c&&r.jsx("div",{style:{padding:"0 20px"},children:r.jsx(Rt,{message:c})}),r.jsx("div",{style:{flex:1,overflow:"hidden"},children:h==="basic"?r.jsxs(ky,{currentStep:j,onStepChange:D=>S(D),children:[j==="sections"&&r.jsx(Cy,{state:l,sectionStatuses:_,onStatusChange:(D,U)=>{if(w({..._,[D]:U}),U==="normal"){const K=l.sections.find(ne=>ne.id===D);if(K){const ne={...f};K.fields.forEach(He=>{delete ne[He.key]}),m(ne)}}},onGoToFindings:D=>{L(D),S("findings")},validationErrors:(()=>{const D={};return l.sections.forEach(U=>{_[U.id]==="abnormal"&&(U.fields.some(ne=>f[ne.key]!==void 0&&f[ne.key]!=="")||(D[U.id]="Section marked as Abnormal but no findings selected."))}),D})()}),j==="findings"&&Q&&r.jsx(zy,{section:l.sections.find(D=>D.id===Q),values:f,onChange:(D,U)=>m({...f,[D]:U}),onBack:()=>S("sections"),basicMode:!0}),j==="narrative"&&r.jsx(Ny,{autoNarrative:p,finalNarrative:b,onFinalNarrativeChange:E,onResetToAuto:()=>E(p)})]}):r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"250px 400px 1fr",gap:20,height:"100%",padding:20},children:[r.jsx(ys,{title:"Sections",actions:!st&&r.jsx(I,{variant:"secondary",onClick:()=>i(D=>D&&{...D,sections:[...D.sections,{id:crypto.randomUUID(),title:"New Section",fields:[]}]}),children:"+ Add"}),children:l.sections.map((D,U)=>r.jsx("div",{onClick:()=>L(D.id),style:{padding:10,border:`1px solid ${D.id===Q?u.colors.primary:u.colors.border}`,marginBottom:8,borderRadius:u.radius.sm,backgroundColor:D.id===Q?"#f0f9ff":"white",cursor:"pointer",display:"flex",gap:8},children:r.jsx("input",{value:D.title,disabled:st,onChange:K=>{const ne=[...l.sections];ne[U].title=K.target.value,i({...l,sections:ne})},style:{border:"none",background:"transparent",width:"100%",fontWeight:500},onClick:K=>K.stopPropagation()})},D.id))}),r.jsx(ys,{title:"Fields",actions:Q&&!st&&r.jsx(I,{variant:"secondary",onClick:()=>{const D=[...l.sections];D.find(K=>K.id===Q).fields.push({key:`new_field_${Date.now()}`,title:"New Field",type:"string"}),i({...l,sections:D})},children:"+ Add Field"}),children:((V=l.sections.find(D=>D.id===Q))==null?void 0:V.fields.map((D,U)=>r.jsxs("div",{style:{border:"1px solid #eee",padding:8,marginBottom:8,borderRadius:4},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("input",{value:D.title,disabled:st,onChange:K=>{const ne=[...l.sections],He=ne.find(Pt=>Pt.id===Q);He.fields[U].title=K.target.value,i({...l,sections:ne})},style:{fontWeight:"bold",border:"none",background:"transparent"}}),r.jsx("button",{disabled:st,onClick:()=>{const K=[...l.sections],ne=K.find(He=>He.id===Q);ne.fields=ne.fields.filter((He,Pt)=>Pt!==U),i({...l,sections:K})},style:{color:"red",border:"none",background:"transparent",cursor:"pointer"},children:""})]}),r.jsxs("div",{style:{fontSize:11,color:"#666"},children:["Key: ",r.jsx("span",{style:{fontFamily:"monospace"},children:D.key})]})]},U)))||r.jsx("div",{style:{color:"#888"},children:"Select a section"})}),r.jsx(ys,{title:"Raw Schema (Live)",children:r.jsx("pre",{style:{fontSize:10,overflow:"auto"},children:JSON.stringify(ms(l),null,2)})})]})}),F&&r.jsx(_y,{onClose:()=>T(!1),onInsert:On,isSectionSelected:Q!==null,blocks:B,loading:ae,error:Ut,onReload:X}),ce&&r.jsx(wy,{conflictingKeys:M,renameMapping:G,onRenameChange:(D,U)=>ee(K=>({...K,[D]:U})),onResolve:N,onCancel:()=>C(!1),existingKeys:jn})]}):r.jsx("div",{style:{padding:20},children:"Failed to load state."})}const qd={name:"New Block",modality:"USG",sections:[],narrative_defaults:{}};function Dy(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState(!0),[s,o]=g.useState(null),[a,d]=g.useState(null),[c,x]=g.useState(!1),[h,y]=g.useState(qd),j=async()=>{if(e){i(!0);try{const w=await Z("/reporting/block-library/",e);n(Array.isArray(w)?w:w.results||[]),i(!1)}catch(w){o(w.message||"Failed to load blocks"),i(!1)}}};g.useEffect(()=>{j()},[e]);const S=async()=>{if(e){o(null);try{h.id?(await vn(`/reporting/block-library/${h.id}/`,e,h),d("Block updated.")):(await oe("/reporting/block-library/",e,h),d("Block created.")),x(!1),j()}catch(w){o(w.message||"Failed to save block")}}},_=async w=>{if(!(!e||!confirm("Delete this block?")))try{await An(`/reporting/block-library/${w}/`,e),d("Block deleted."),j()}catch(f){o(f.message||"Failed to delete block")}};return r.jsxs("div",{style:{padding:20},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[r.jsx("h1",{children:"Block Library"}),r.jsx(I,{variant:"primary",onClick:()=>{y(qd),x(!0)},children:"+ Create Block"})]}),s&&r.jsx(Ee,{message:s}),a&&r.jsx(Rt,{message:a}),r.jsx("div",{style:{backgroundColor:"white",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.md},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{style:{backgroundColor:u.colors.backgroundGray},children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:10,textAlign:"left"},children:"Name"}),r.jsx("th",{style:{padding:10,textAlign:"left"},children:"Modality"}),r.jsx("th",{style:{padding:10,textAlign:"right"},children:"Actions"})]})}),r.jsxs("tbody",{children:[t.map(w=>r.jsxs("tr",{style:{borderTop:`1px solid ${u.colors.border}`},children:[r.jsx("td",{style:{padding:10},children:w.name}),r.jsx("td",{style:{padding:10},children:w.modality}),r.jsxs("td",{style:{padding:10,textAlign:"right"},children:[r.jsx(I,{variant:"secondary",onClick:()=>{y(w),x(!0)},children:"Edit"}),r.jsx("span",{style:{marginLeft:8}}),r.jsx(I,{variant:"primary",onClick:()=>_(w.id),style:{backgroundColor:u.colors.danger,borderColor:u.colors.danger},children:"Delete"})]})]},w.id)),t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:3,style:{padding:20,textAlign:"center",color:"#888"},children:"No blocks found."})})]})]})}),c&&r.jsx(Kr,{isOpen:c,title:h.id?"Edit Block":"Create Block",onClose:()=>x(!1),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Name"}),r.jsx("input",{value:h.name,onChange:w=>y({...h,name:w.target.value}),style:{width:"100%",padding:6}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Modality"}),r.jsx("input",{value:h.modality,onChange:w=>y({...h,modality:w.target.value}),style:{width:"100%",padding:6}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Sections (JSON)"}),r.jsx("textarea",{value:JSON.stringify(h.sections,null,2),onChange:w=>{try{const f=JSON.parse(w.target.value);y({...h,sections:f})}catch{}},style:{width:"100%",height:100,padding:6,fontSize:11,fontFamily:"monospace"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:12},children:"Narrative Defaults (JSON)"}),r.jsx("textarea",{value:JSON.stringify(h.narrative_defaults,null,2),onChange:w=>{try{const f=JSON.parse(w.target.value);y({...h,narrative_defaults:f})}catch{}},style:{width:"100%",height:100,padding:6,fontSize:11,fontFamily:"monospace"}})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:10},children:[r.jsx(I,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),r.jsx(I,{variant:"primary",onClick:S,children:"Save Block"})]})]})})]})}function Iy(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState(!0),[s,o]=g.useState(null),[a,d]=g.useState("");g.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{i(!0),o(null);const y=await Z("/workflow/items/worklist/?status=PUBLISHED,FINALIZED",e);n(y||[])}catch(y){o(y.message||"Failed to load published reports")}finally{i(!1)}},x=async y=>{window.open(`/print/report/${y.id}`,"_blank")},h=t.filter(y=>y.patient_name.toLowerCase().includes(a.toLowerCase())||y.patient_mrn.toLowerCase().includes(a.toLowerCase())||y.visit_id.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[r.jsx(ht,{title:"Print Reports",subtitle:"View and print all published diagnostic reports"}),r.jsx("div",{style:{marginBottom:20},children:s&&r.jsx(Ee,{message:s})}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:u.radius.lg,boxShadow:u.shadows.sm,border:`1px solid ${u.colors.border}`,overflow:"hidden"},children:[r.jsxs("div",{style:{padding:16,borderBottom:`1px solid ${u.colors.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:u.colors.backgroundGray,gap:16},children:[r.jsx("div",{style:{position:"relative",flex:1,maxWidth:400},children:r.jsx("input",{type:"text",placeholder:"Search by Patient Name, MRN or Visit ID...",value:a,onChange:y=>d(y.target.value),style:{width:"100%",padding:"10px 16px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14,outline:"none"}})}),r.jsx(I,{variant:"secondary",onClick:c,disabled:l,style:{padding:"6px 16px",fontSize:13},children:l?"Refreshing...":"Refresh"})]}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:`2px solid ${u.colors.border}`,backgroundColor:"white"},children:[r.jsx("th",{style:zr,children:"Published Date"}),r.jsx("th",{style:zr,children:"Patient Info"}),r.jsx("th",{style:zr,children:"Service / Visit"}),r.jsx("th",{style:zr,children:"Department"}),r.jsx("th",{style:{...zr,textAlign:"right"},children:"Action"})]})}),r.jsx("tbody",{children:l&&t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{padding:40,textAlign:"center",color:u.colors.textTertiary},children:"Loading reports..."})}):h.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{padding:40,textAlign:"center",color:u.colors.textTertiary},children:"No published reports found."})}):h.map(y=>r.jsxs("tr",{style:{borderBottom:`1px solid ${u.colors.borderLight}`,transition:"background 0.2s"},onMouseEnter:j=>j.currentTarget.style.backgroundColor="#f8f9fa",onMouseLeave:j=>j.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("td",{style:Nr,children:[r.jsx("div",{style:{fontSize:13,fontWeight:500},children:new Date(y.updated_at).toLocaleDateString()}),r.jsx("div",{style:{fontSize:11,color:u.colors.textTertiary},children:new Date(y.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("td",{style:Nr,children:[r.jsx("div",{style:{fontWeight:600,fontSize:14},children:y.patient_name}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textSecondary},children:["MRN: ",y.patient_mrn]})]}),r.jsxs("td",{style:Nr,children:[r.jsx("div",{style:{fontSize:14},children:y.service_name}),r.jsxs("div",{style:{fontSize:11,color:u.colors.textTertiary},children:["Visit: ",y.visit_id]})]}),r.jsx("td",{style:Nr,children:r.jsx("span",{style:{fontSize:11,fontWeight:600,padding:"2px 6px",borderRadius:4,backgroundColor:"#f0f0f0",color:"#666"},children:y.department_snapshot})}),r.jsx("td",{style:{...Nr,textAlign:"right"},children:r.jsx(I,{variant:"primary",style:{padding:"8px 16px",fontSize:13,backgroundColor:u.colors.success,borderColor:u.colors.success},onClick:()=>x(y),children:"Print Report"})})]},y.id))})]})})]})]})}const zr={textAlign:"left",padding:"16px",fontSize:12,fontWeight:600,textTransform:"uppercase",color:u.colors.textSecondary,letterSpacing:"0.5px"},Nr={padding:"16px",verticalAlign:"middle"};function By(e){const t=new URLSearchParams;Object.entries(e).forEach(([l,i])=>{i==null||i===""||t.set(l,String(i))});const n=t.toString();return n?`?${n}`:""}async function Fy(e,t={}){const n=By({search:t.search});return Z(`/auth/users/${n}`,e)}async function Ay(e,t){return oe("/auth/users/",e,t)}async function $y(e,t,n){return kf(`/auth/users/${t}/`,e,n)}async function Oy(e,t){return An(`/auth/users/${t}/`,e)}async function My(e,t,n){return oe(`/auth/users/${t}/reset-password/`,e,{password:n})}async function Wy(e){return Z("/auth/groups/",e)}async function Uy(e,t){return oe("/auth/groups/",e,t)}async function Vy(e,t,n){return vn(`/auth/groups/${t}/`,e,n)}async function Hy(e,t){return An(`/auth/groups/${t}/`,e)}async function Gy(e){return Z("/auth/permissions/",e)}const Xd={username:"",first_name:"",last_name:"",email:"",is_active:!0,is_staff:!1,is_superuser:!1,groups:[],user_permissions:[],password:""};function Ky(){const{token:e}=Se(),[t,n]=g.useState([]),[l,i]=g.useState([]),[s,o]=g.useState([]),[a,d]=g.useState(null),[c,x]=g.useState(Xd),[h,y]=g.useState(""),[j,S]=g.useState(""),[_,w]=g.useState({id:null,name:"",permissions:[]}),[f,m]=g.useState(!1),[p,v]=g.useState(!1),[b,E]=g.useState(null),[z,k]=g.useState(null);g.useEffect(()=>{F()},[e]);async function F(){if(e){m(!0),k(null);try{const[P,G,ee]=await Promise.all([Fy(e),Wy(e),Gy(e)]);n(P),i(G),o(ee)}catch(P){k((P==null?void 0:P.message)||"Failed to load user settings.")}finally{m(!1)}}}const T=g.useMemo(()=>{if(!j)return t;const P=j.toLowerCase();return t.filter(G=>{var ee;return G.username.toLowerCase().includes(P)||((ee=G.email)==null?void 0:ee.toLowerCase().includes(P))||`${G.first_name} ${G.last_name}`.toLowerCase().includes(P)})},[t,j]);function $(P){d(P.id),x({username:P.username,first_name:P.first_name,last_name:P.last_name,email:P.email,is_active:P.is_active,is_staff:P.is_staff,is_superuser:P.is_superuser,groups:P.groups||[],user_permissions:P.user_permissions||[],password:""}),y("")}function J(){d(null),x(Xd),y("")}async function Q(){var P;if(e){v(!0),k(null),E(null);try{const G={...c,password:(P=c.password)!=null&&P.trim()?c.password:void 0};let ee;a?ee=await $y(e,a,G):ee=await Ay(e,G),await F(),E(`User "${ee.username}" saved.`);const ie=t.find(he=>he.id===ee.id)||ee;$(ie)}catch(G){k((G==null?void 0:G.message)||"Failed to save user.")}finally{v(!1)}}}async function L(){if(!(!e||!a||!window.confirm("Delete this user?"))){v(!0),k(null),E(null);try{await Oy(e,a),E("User deleted."),J(),await F()}catch(G){k((G==null?void 0:G.message)||"Failed to delete user.")}finally{v(!1)}}}async function R(){if(!(!e||!a)){if(!h.trim()){k("Please enter a new password.");return}v(!0),k(null),E(null);try{await My(e,a,h.trim()),y(""),E("Password reset successfully.")}catch(P){k((P==null?void 0:P.message)||"Failed to reset password.")}finally{v(!1)}}}function q(P,G){return P.includes(G)?P.filter(ee=>ee!==G):[...P,G]}const ce=g.useMemo(()=>{const P=new Set;c.groups.forEach(ie=>{var ve;const he=l.find(Ae=>Ae.id===ie);(ve=he==null?void 0:he.permissions)==null||ve.forEach(Ae=>P.add(Ae))});const G=new Set(c.user_permissions||[]),ee=new Set([...Array.from(P),...Array.from(G)]);return s.filter(ie=>ee.has(ie.id))},[c.groups,c.user_permissions,l,s]);function C(P){w({id:P.id,name:P.name,permissions:P.permissions||[]})}function M(){w({id:null,name:"",permissions:[]})}async function O(){if(e){v(!0),k(null),E(null);try{_.id?await Vy(e,_.id,{name:_.name,permissions:_.permissions}):await Uy(e,{name:_.name,permissions:_.permissions}),E("Role saved."),await F()}catch(P){k((P==null?void 0:P.message)||"Failed to save role.")}finally{v(!1)}}}async function Y(){if(!(!e||!_.id||!window.confirm("Delete this role?"))){v(!0),k(null),E(null);try{await Hy(e,_.id),E("Role deleted."),M(),await F()}catch(G){k((G==null?void 0:G.message)||"Failed to delete role.")}finally{v(!1)}}}return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[r.jsx(ht,{title:"User Settings",subtitle:"Manage users, roles, passwords, and permissions.",actions:r.jsx(I,{variant:"secondary",onClick:F,disabled:f,children:"Refresh"})}),z&&r.jsx(Ee,{message:z,onDismiss:()=>k(null)}),b&&r.jsx(Rt,{message:b,onDismiss:()=>E(null)}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.6fr 1fr",gap:20,alignItems:"start"},children:[r.jsxs("div",{style:{background:"white",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.lg,padding:16,display:"grid",gridTemplateColumns:"1fr 1.2fr",gap:12,minHeight:560},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minHeight:0},children:[r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("input",{value:j,onChange:P=>S(P.target.value),placeholder:"Search users",style:{flex:1,padding:10,borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`}}),r.jsx(I,{variant:"accent",onClick:J,children:"New"})]}),r.jsx("div",{style:{flex:1,minHeight:0,border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,overflow:"auto"},children:f?r.jsx("div",{style:{padding:12},children:"Loading users..."}):T.length===0?r.jsx("div",{style:{padding:12,color:u.colors.textTertiary},children:"No users"}):T.map(P=>{var ie;const G=P.is_active,ee=P.id===a;return r.jsxs("div",{onClick:()=>$(P),style:{padding:"10px 12px",borderBottom:`1px solid ${u.colors.borderLight}`,cursor:"pointer",backgroundColor:ee?u.colors.brandBlueSoft:"white"},children:[r.jsxs("div",{style:{fontWeight:600,color:u.colors.textPrimary},children:[P.username," ",!G&&r.jsx("span",{style:{color:u.colors.danger},children:"(inactive)"})]}),r.jsx("div",{style:{fontSize:13,color:u.colors.textTertiary},children:P.email||""}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textSecondary},children:["Roles: ",(ie=P.groups)!=null&&ie.length?P.groups.map(he=>{var ve;return((ve=l.find(Ae=>Ae.id===he))==null?void 0:ve.name)||he}).join(", "):"none"]})]},P.id)})})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Username"}),r.jsx("input",{value:c.username,onChange:P=>x({...c,username:P.target.value}),style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Email"}),r.jsx("input",{value:c.email,onChange:P=>x({...c,email:P.target.value}),style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"First name"}),r.jsx("input",{value:c.first_name,onChange:P=>x({...c,first_name:P.target.value}),style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Last name"}),r.jsx("input",{value:c.last_name,onChange:P=>x({...c,last_name:P.target.value}),style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Password (only to set / change)"}),r.jsx("input",{type:"password",value:c.password||"",onChange:P=>x({...c,password:P.target.value}),placeholder:a?"Leave blank to keep current":"",style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Status"}),r.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:c.is_active,onChange:P=>x({...c,is_active:P.target.checked})}),"Active"]}),r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:c.is_staff,onChange:P=>x({...c,is_staff:P.target.checked})}),"Staff"]}),r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:c.is_superuser,onChange:P=>x({...c,is_superuser:P.target.checked})}),"Superuser"]})]})]})]}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:12},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Roles (Groups)"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:8},children:l.map(P=>r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:c.groups.includes(P.id),onChange:()=>x({...c,groups:q(c.groups,P.id)})}),P.name]},P.id))})]}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:12},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Direct Permissions"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:6,maxHeight:220,overflow:"auto"},children:s.map(P=>r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:c.user_permissions.includes(P.id),onChange:()=>x({...c,user_permissions:q(c.user_permissions,P.id)})}),P.codename," ",r.jsxs("span",{style:{color:u.colors.textTertiary},children:["(",P.app_label||"app",")"]})]},P.id))}),r.jsx("div",{style:{marginTop:10,fontSize:12,color:u.colors.textTertiary},children:"Effective permissions include role permissions plus the direct permissions above."})]}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:12},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Effective permissions"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[ce.map(P=>r.jsx("span",{style:{background:u.colors.brandBlueSoft,color:u.colors.brandBlueDark,padding:"4px 8px",borderRadius:u.radius.base,fontSize:12},children:P.codename},P.id)),ce.length===0&&r.jsx("span",{style:{color:u.colors.textTertiary},children:"No permissions"})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[r.jsx(I,{onClick:Q,disabled:p,children:a?"Save user":"Create user"}),r.jsx(I,{variant:"danger",onClick:L,disabled:!a||p,children:"Delete"}),r.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[r.jsx("input",{type:"password",value:h,onChange:P=>y(P.target.value),placeholder:"New password",style:{...wn,width:180}}),r.jsx(I,{variant:"warning",onClick:R,disabled:!a||p,children:"Reset password"})]})]})]})]}),r.jsxs("div",{style:{background:"white",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.lg,padding:16,display:"flex",flexDirection:"column",gap:12,minHeight:560},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0},children:"Roles & Permissions"}),r.jsx(I,{variant:"accent",onClick:M,children:"New role"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8,maxHeight:180,overflow:"auto"},children:[l.map(P=>r.jsxs("div",{style:{padding:10,border:`1px solid ${_.id===P.id?u.colors.brandBlue:u.colors.border}`,borderRadius:u.radius.base,cursor:"pointer",background:_.id===P.id?u.colors.brandBlueSoft:"white"},onClick:()=>C(P),children:[r.jsx("div",{style:{fontWeight:600},children:P.name}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textTertiary},children:[P.permissions.length," permission(s)"]})]},P.id)),l.length===0&&r.jsx("div",{style:{color:u.colors.textTertiary},children:"No roles defined."})]}),r.jsx("div",{style:{borderTop:`1px solid ${u.colors.border}`,paddingTop:10},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:[r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Role name"}),r.jsx("input",{value:_.name,onChange:P=>w({..._,name:P.target.value}),style:wn})]}),r.jsxs("div",{children:[r.jsx("label",{style:Gt,children:"Permissions"}),r.jsx("div",{style:{maxHeight:260,overflow:"auto",border:`1px solid ${u.colors.border}`,borderRadius:u.radius.base,padding:8},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:6},children:s.map(P=>r.jsxs("label",{style:Vn,children:[r.jsx("input",{type:"checkbox",checked:_.permissions.includes(P.id),onChange:()=>w({..._,permissions:q(_.permissions,P.id)})}),P.codename," ",r.jsxs("span",{style:{color:u.colors.textTertiary},children:["(",P.app_label||"app",")"]})]},P.id))})})]}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx(I,{onClick:O,disabled:p||!_.name.trim(),children:_.id?"Save role":"Create role"}),r.jsx(I,{variant:"danger",onClick:Y,disabled:!_.id||p,children:"Delete"})]})]})})]})]})]})}const Gt={fontSize:13,fontWeight:600,color:"#555",display:"block",marginBottom:4},wn={width:"100%",padding:"10px 12px",borderRadius:u.radius.base,border:`1px solid ${u.colors.border}`,fontSize:14},Vn={display:"flex",alignItems:"center",gap:8,fontSize:13,color:u.colors.textPrimary};function xs(e){if(!Number.isFinite(e)||e<=0)return"0 B";const t=["B","KB","MB","GB","TB"];let n=e,l=0;for(;n>=1024&&l<t.length-1;)n/=1024,l+=1;return`${n.toFixed(l===0?0:1)} ${t[l]}`}function Zd(e){return e==="RUNNING"}function Qy(){var ee,ie,he,ve,Ae;const{token:e,user:t}=Se(),[n,l]=g.useState(null),[i,s]=g.useState(null),[o,a]=g.useState(!1),[d,c]=g.useState(!1),[x,h]=g.useState(null),[y,j]=g.useState(null),[S,_]=g.useState(!1),[w,f]=g.useState(!1),[m,p]=g.useState(null),[v,b]=g.useState(""),[E,z]=g.useState(""),[k,F]=g.useState("offsite"),[T,$]=g.useState("radreport-backups"),J=g.useRef(null),Q=(t==null?void 0:t.is_superuser)||!1;async function L(){if(e){a(!0);try{const B=await Z("/backups/",e);l(B),F(B.cloud.remote_name||"offsite"),$(B.cloud.remote_path||"radreport-backups")}catch(B){h((B==null?void 0:B.message)||"Failed to load backups")}finally{a(!1)}}}g.useEffect(()=>{L()},[e]);const R=g.useMemo(()=>((n==null?void 0:n.items)||[]).some(B=>Zd(B.status))||((n==null?void 0:n.running_jobs)||[]).some(B=>Zd(B.status))||!!(n!=null&&n.restore_in_progress),[n]);g.useEffect(()=>{if(!R)return;const B=window.setInterval(()=>{L(),i!=null&&i.id&&q(i.id)},2500);return()=>window.clearInterval(B)},[R,i==null?void 0:i.id]);async function q(B){if(e){h(null);try{const re=await Z(`/backups/${B}/`,e);s(re)}catch(re){h((re==null?void 0:re.message)||"Failed to load backup detail")}}}async function ce(){if(e){c(!0),h(null),j(null);try{await oe("/backups/",e,{force:!1,deletable:!0}),j("Backup job started"),await L()}catch(B){h((B==null?void 0:B.message)||"Failed to start backup")}finally{c(!1)}}}async function C(B,re="full"){if(e)try{const ae=await fetch(`${un}/backups/${B}/export/?artifact=${re}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!ae.ok){const _t=await ae.text();throw new Error(_t||`Export failed (${ae.status})`)}const Tt=await ae.blob(),Ut=window.URL.createObjectURL(Tt),it=document.createElement("a");it.href=Ut,it.download=re==="full"?`backup-${B}.tar.gz`:`backup-${B}-${re}`,document.body.appendChild(it),it.click(),it.remove(),window.URL.revokeObjectURL(Ut),j("Backup export downloaded")}catch(ae){h((ae==null?void 0:ae.message)||"Export failed")}}async function M(B){if(e){c(!0);try{await oe(`/backups/${B}/upload/`,e,{}),j("Cloud upload started"),await L()}catch(re){h((re==null?void 0:re.message)||"Upload failed")}finally{c(!1)}}}async function O(B){if(!(!e||!window.confirm("Delete this backup permanently?"))){c(!0);try{await An(`/backups/${B}/`,e),j("Backup deleted"),(i==null?void 0:i.id)===B&&s(null),await L()}catch(ae){h((ae==null?void 0:ae.message)||"Delete failed")}finally{c(!1)}}}async function Y(B){if(!e)return;c(!0),h(null);const re=new FormData;re.append("file",B);try{await xo("/backups/import/",e,re),j("Backup import completed"),await L()}catch(ae){h((ae==null?void 0:ae.message)||"Import failed")}finally{c(!1)}}async function P(){if(e){c(!0),h(null);try{await oe("/backups/cloud/test/",e,{remote_name:k,remote_path:T}),j("Cloud connection OK"),await L()}catch(B){h((B==null?void 0:B.message)||"Cloud test failed")}finally{c(!1)}}}async function G(){if(!(!e||!m)){if(v!=="RESTORE NOW"){h('Restore confirmation phrase must be "RESTORE NOW"');return}if(E!==m.id){h("Restore backup id confirmation does not match");return}c(!0);try{await oe(`/backups/${m.id}/restore/`,e,{confirm_phrase:v,dry_run:!1,yes:!0,allow_system_caddy_overwrite:!1}),j("Restore started"),f(!1),b(""),z(""),p(null),await L()}catch(B){h((B==null?void 0:B.message)||"Restore failed to start")}finally{c(!1)}}}return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[r.jsx(ht,{title:"Backups",subtitle:"Create, review, import/export, cloud sync, and restore backups"}),x&&r.jsx(Ee,{message:x}),y&&r.jsx(Rt,{message:y}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.lg,background:"#fff",padding:16,display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[r.jsx("strong",{children:"Cloud Sync"}),r.jsx("span",{style:{fontSize:13,color:n!=null&&n.cloud.connected?u.colors.success:u.colors.warning},children:n!=null&&n.cloud.connected?"Connected":"Not connected"}),(n==null?void 0:n.restore_in_progress)&&r.jsx("span",{style:{color:u.colors.danger,fontSize:13},children:"Restore in progress. New operations are blocked."}),!!((ee=n==null?void 0:n.running_jobs)!=null&&ee.length)&&r.jsxs("span",{style:{color:u.colors.textSecondary,fontSize:13},children:["Running jobs: ",n.running_jobs.map(B=>`${B.operation} (${B.id.slice(0,8)})`).join(", ")]})]}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx(I,{onClick:ce,disabled:d||R,children:"Create Backup Now"}),r.jsx("input",{ref:J,type:"file",accept:".zip,.tar,.gz,.tgz,.tar.gz",style:{display:"none"},onChange:B=>{var ae;const re=(ae=B.target.files)==null?void 0:ae[0];re&&Y(re),J.current&&(J.current.value="")}}),r.jsx(I,{variant:"secondary",onClick:()=>{var B;return(B=J.current)==null?void 0:B.click()},disabled:d||R,children:"Import Backup"}),r.jsx(I,{variant:"secondary",onClick:()=>_(!0),children:"Cloud Settings"})]})]}),r.jsxs("div",{style:{border:`1px solid ${u.colors.border}`,borderRadius:u.radius.lg,background:"#fff",overflowX:"auto"},children:[r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:1100},children:[r.jsx("thead",{children:r.jsx("tr",{style:{background:u.colors.backgroundGray},children:["Date/Time","Trigger","Status","Size (DB/Media/Infra)","Stored Locally","Uploaded","Actions"].map(B=>r.jsx("th",{style:{textAlign:"left",padding:12,fontSize:13,color:u.colors.textSecondary},children:B},B))})}),r.jsx("tbody",{children:((n==null?void 0:n.items)||[]).map(B=>r.jsxs("tr",{style:{borderTop:`1px solid ${u.colors.borderLight}`},children:[r.jsx("td",{style:{padding:12,fontSize:13},children:B.date||B.id}),r.jsx("td",{style:{padding:12,fontSize:13},children:B.trigger==="cron"?"Auto":"Manual"}),r.jsx("td",{style:{padding:12,fontSize:13},children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:999,background:B.status==="SUCCESS"?"#e6f7ee":B.status==="FAILED"?"#ffecec":"#fff7e6",color:B.status==="SUCCESS"?"#117a35":B.status==="FAILED"?"#b42318":"#b54708"},children:B.status})}),r.jsxs("td",{style:{padding:12,fontSize:13},children:[xs(B.size.db)," / ",xs(B.size.media)," / ",xs(B.size.infra)]}),r.jsx("td",{style:{padding:12,fontSize:13},children:"Yes"}),r.jsx("td",{style:{padding:12,fontSize:13},children:B.uploaded?`Yes ${B.provider?`(${B.provider})`:""}`:"No"}),r.jsxs("td",{style:{padding:12,fontSize:13,display:"flex",gap:6,flexWrap:"wrap"},children:[r.jsx(I,{variant:"secondary",onClick:()=>q(B.id),disabled:d,children:"View"}),r.jsx(I,{variant:"secondary",onClick:()=>C(B.id,"full"),disabled:d,children:"Export"}),r.jsx(I,{variant:"secondary",onClick:()=>M(B.id),disabled:d||R,children:"Upload"}),B.can_delete&&r.jsx(I,{variant:"danger",onClick:()=>O(B.id),disabled:d||R,children:"Delete"}),Q&&r.jsx(I,{variant:"warning",onClick:()=>{p(B),f(!0)},disabled:d||R,children:"Restore"})]})]},B.id))})]}),o&&r.jsx("div",{style:{padding:12,fontSize:13,color:u.colors.textSecondary},children:"Loading..."})]}),r.jsx(Kr,{isOpen:!!i,onClose:()=>s(null),title:"Backup Details",children:i&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,fontSize:13},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Created by:"})," ",i.created_by||((ie=i.meta)==null?void 0:ie.created_by)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Trigger:"})," ",i.trigger||((he=i.meta)==null?void 0:he.trigger)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Commit:"})," ",((ve=i.meta)==null?void 0:ve.git_commit)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Artifacts:"}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:6},children:[r.jsx(I,{variant:"secondary",onClick:()=>C(i.id,"db"),disabled:d,children:"Download DB"}),r.jsx(I,{variant:"secondary",onClick:()=>C(i.id,"media"),disabled:d,children:"Download Media"}),r.jsx(I,{variant:"secondary",onClick:()=>C(i.id,"infra"),disabled:d,children:"Download Infra"}),r.jsx(I,{variant:"secondary",onClick:()=>C(i.id,"meta"),disabled:d,children:"Download Meta"})]})]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Checksums:"}),r.jsx("pre",{style:{maxHeight:150,overflow:"auto",background:u.colors.backgroundGray,padding:10},children:Object.entries(i.checksums).map(([B,re])=>`${B}: ${re}`).join(`
`)||"No checksums"})]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Logs (tail):"}),r.jsx("pre",{style:{maxHeight:220,overflow:"auto",background:u.colors.backgroundGray,padding:10},children:((Ae=i.logs_tail)==null?void 0:Ae.join(`
`))||"No logs"})]})]})}),r.jsx(Kr,{isOpen:S,onClose:()=>_(!1),title:"Cloud Settings",children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:13,marginBottom:4},children:"Remote name"}),r.jsx("input",{value:k,onChange:B=>F(B.target.value),style:{width:"100%",padding:8,borderRadius:8,border:`1px solid ${u.colors.border}`}})]}),r.jsxs("label",{children:[r.jsx("div",{style:{fontSize:13,marginBottom:4},children:"Remote path"}),r.jsx("input",{value:T,onChange:B=>$(B.target.value),style:{width:"100%",padding:8,borderRadius:8,border:`1px solid ${u.colors.border}`}})]}),r.jsxs("div",{style:{fontSize:12,color:u.colors.textSecondary},children:["Configure rclone on server with: ",r.jsx("code",{children:"rclone config"}),". Keep secrets in server-side rclone config only."]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[r.jsx(I,{variant:"secondary",onClick:()=>_(!1),children:"Close"}),r.jsx(I,{onClick:P,disabled:d,children:"Test Connection"})]})]})}),r.jsx(Kr,{isOpen:w,onClose:()=>f(!1),title:"Restore Backup",children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,fontSize:13},children:[r.jsx("div",{style:{color:u.colors.danger,fontWeight:600},children:"Destructive action: this restores database/media/infra from selected backup."}),r.jsxs("ul",{style:{margin:0,paddingLeft:20},children:[r.jsx("li",{children:"Active users should be informed."}),r.jsx("li",{children:"Take a fresh backup before restore."}),r.jsx("li",{children:"Restore is superuser-only and audited."})]}),r.jsxs("label",{children:[r.jsx("div",{children:"Type confirmation phrase"}),r.jsx("input",{value:v,onChange:B=>b(B.target.value),placeholder:"RESTORE NOW",style:{width:"100%",padding:8,borderRadius:8,border:`1px solid ${u.colors.border}`}})]}),r.jsxs("label",{children:[r.jsx("div",{children:"Type backup id again"}),r.jsx("input",{value:E,onChange:B=>z(B.target.value),placeholder:(m==null?void 0:m.id)||"",style:{width:"100%",padding:8,borderRadius:8,border:`1px solid ${u.colors.border}`}})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[r.jsx(I,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),r.jsx(I,{variant:"danger",onClick:G,disabled:d,children:"Start Restore"})]})]})})]})}function zt(e){return!!e&&e.trim().length>0}function Kt(e,t){return zt(t)?r.jsxs("div",{className:"rm-field-row",children:[r.jsx("div",{className:"rm-field-label",children:e}),r.jsx("div",{className:"rm-field-value",children:t})]},e):null}function Bl(e){const t=(e||[]).map(n=>(n||"").trim()).filter(Boolean);return t.length?t.map((n,l)=>r.jsx("p",{className:"rm-paragraph",children:n},`${n}-${l}`)):null}function Yy({payload:e,actions:t}){var j;const n=e.header||{},l=e.patient||{},i=e.sections||{},s=i.findings||[],o=i.measurements||[],a=(i.impression||[]).map(S=>S.trim()).filter(Boolean),d=(i.recommendations||[]).map(S=>S.trim()).filter(Boolean),c=(n.center_lines||[]).map(S=>S.trim()).filter(Boolean),x=(n.right_lines||[]).map(S=>S.trim()).filter(Boolean),h=e.signatories||[],y=[l.age,l.sex].filter(zt).join(" / ");return r.jsxs("div",{className:"radiology-master-page",children:[t?r.jsx("div",{className:"radiology-master-toolbar",children:t}):null,r.jsxs("article",{className:"radiology-master-paper",children:[r.jsxs("header",{className:"rm-header",children:[r.jsx("div",{className:"rm-logo-box",children:zt(n.logo_url)?r.jsx("img",{src:n.logo_url,alt:"logo"}):null}),r.jsx("div",{className:"rm-center-block",children:c.map((S,_)=>r.jsx("div",{className:_===0?"rm-center-line-strong":"rm-center-line",children:S},`${S}-${_}`))}),r.jsx("div",{className:"rm-right-block",children:x.map((S,_)=>r.jsx("div",{children:S},`${S}-${_}`))})]}),r.jsx("div",{className:"rm-divider"}),r.jsxs("section",{className:"rm-patient",children:[r.jsxs("div",{className:"rm-patient-grid",children:[r.jsxs("div",{children:[Kt("Patient Name",l.name),Kt("Age / Sex",y),Kt("MRN / Patient ID",l.mrn),Kt("Mobile",l.mobile)]}),r.jsxs("div",{children:[Kt("Ref No / Accession",l.ref_no),Kt("Referred By",l.referred_by),Kt("Study Date/Time",l.study_datetime),Kt("Report Date/Time",l.report_datetime)]})]}),zt(l.clinical_indication)?r.jsxs("div",{className:"rm-indication",children:[r.jsx("span",{className:"rm-field-label",children:"Clinical Indication: "}),r.jsx("span",{children:l.clinical_indication})]}):null]}),r.jsx("h1",{className:"rm-title",children:e.report_title||"RADIOLOGY REPORT"}),r.jsx("div",{className:"rm-divider"}),Bl(i.technique)?r.jsxs("section",{className:"rm-section",children:[r.jsx("h2",{className:"rm-section-title",children:"Technique"}),Bl(i.technique)]}):null,Bl(i.comparison)?r.jsxs("section",{className:"rm-section",children:[r.jsx("h2",{className:"rm-section-title",children:"Comparison"}),Bl(i.comparison)]}):null,r.jsxs("section",{className:"rm-section",children:[r.jsx("h2",{className:"rm-section-title",children:"Findings"}),s.length?s.map((S,_)=>{const w=(S.lines||[]).map(p=>p.trim()).filter(Boolean),f=(S.paragraphs||[]).map(p=>p.trim()).filter(Boolean),m=(S.bullets||[]).map(p=>p.trim()).filter(Boolean);return!w.length&&!f.length&&!m.length?null:r.jsxs("div",{children:[zt(S.heading)?r.jsx("h3",{className:"rm-subheading",children:S.heading}):null,w.map((p,v)=>r.jsx("p",{className:"rm-paragraph",children:p},`line-${v}`)),f.map((p,v)=>r.jsx("p",{className:"rm-paragraph",children:p},`para-${v}`)),m.length?r.jsx("ul",{className:"rm-list",children:m.map((p,v)=>r.jsx("li",{children:p},`bullet-${v}`))}):null]},`finding-${_}`)}):r.jsx("p",{className:"rm-paragraph",children:"No findings provided."})]}),o.length?r.jsxs("section",{className:"rm-section",children:[r.jsx("h2",{className:"rm-section-title",children:"Measurements"}),r.jsxs("table",{className:"rm-measurements",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"})]})}),r.jsx("tbody",{children:o.map((S,_)=>r.jsxs("tr",{children:[r.jsx("td",{children:S.label}),r.jsxs("td",{children:[S.value,zt(S.unit)?` ${S.unit}`:""]})]},`m-${_}`))})]})]}):null,a.length?r.jsxs("section",{className:"rm-impression",children:[r.jsx("h2",{className:"rm-section-title",style:{marginTop:0},children:"Impression"}),r.jsx("ul",{className:"rm-list",children:a.map((S,_)=>r.jsx("li",{children:S},`impression-${_}`))})]}):null,d.length?r.jsxs("section",{className:"rm-section",children:[r.jsx("h2",{className:"rm-section-title",children:"Recommendations / Advice"}),r.jsx("ul",{className:"rm-list",children:d.map((S,_)=>r.jsx("li",{children:S},`recommend-${_}`))})]}):null,h.length?r.jsx("section",{className:"rm-signatures",children:r.jsx("div",{className:"rm-signature-stack",children:h.map((S,_)=>r.jsxs("div",{className:"rm-signature-item",children:[r.jsx("div",{children:S.verification_label||"Electronically Verified"}),zt(S.name)?r.jsx("div",{className:"rm-signature-name",children:S.name}):null,zt(S.credentials)?r.jsx("div",{children:S.credentials}):null,zt(S.registration)?r.jsx("div",{children:S.registration}):null]},`sig-${_}`))})}):null,r.jsx("footer",{className:"rm-footer",children:((j=e.footer)==null?void 0:j.disclaimer)||"This report is based on imaging findings at the time of examination. Clinical correlation is advised."})]})]})}function Jy(){const{service_visit_item_id:e}=Ai(),{token:t}=Se(),n=qe(),[l,i]=g.useState(null),[s,o]=g.useState(null),[a,d]=g.useState(!0);g.useEffect(()=>{!e||!t||(d(!0),o(null),Om(e,t).then(x=>i(x)).catch(x=>o((x==null?void 0:x.message)||"Failed to load print preview")).finally(()=>d(!1)))},[e,t]);async function c(){if(!(!e||!t))try{const x=await Pf(e,t),h=URL.createObjectURL(x),y=document.createElement("a");y.href=h,y.download=`report-${e}.pdf`,document.body.appendChild(y),y.click(),y.remove(),URL.revokeObjectURL(h)}catch(x){o((x==null?void 0:x.message)||"Failed to download server PDF")}}return a?r.jsx("div",{style:{padding:24},children:"Loading print layout..."}):l?r.jsxs("div",{children:[s?r.jsx("div",{style:{maxWidth:960,margin:"10px auto 0"},children:r.jsx(Ee,{message:s})}):null,r.jsx(Yy,{payload:l,actions:r.jsxs(r.Fragment,{children:[r.jsx(I,{variant:"secondary",onClick:()=>n(-1),children:"Back"}),r.jsx(I,{variant:"secondary",onClick:c,children:"Download Server PDF"}),r.jsx(I,{onClick:()=>window.print(),children:"Print / Save PDF"})]})})]}):r.jsxs("div",{style:{padding:24},children:[s?r.jsx(Ee,{message:s}):null,r.jsx(I,{variant:"secondary",onClick:()=>n(-1),children:"Back"})]})}function ec({title:e="Module disabled",message:t="This module is disabled in this build."}){return r.jsx("div",{style:{padding:32,fontFamily:"system-ui"},children:r.jsxs("div",{style:{maxWidth:520,margin:"0 auto",padding:24,borderRadius:8,border:"1px solid #e9e1b5",backgroundColor:"#fffaf0",color:"#7a5b00"},children:[r.jsx("h2",{style:{marginTop:0},children:e}),r.jsx("p",{style:{marginBottom:16},children:t}),r.jsx($i,{to:"/",style:{color:"#0B5ED7",textDecoration:"none"},children:"Return to dashboard"})]})})}function qy(){return r.jsxs("footer",{style:{textAlign:"center",padding:"16px 20px",color:"#999",fontSize:"13px",lineHeight:"1.6",borderTop:"1px solid #eee",backgroundColor:"#fafafa",marginTop:"auto"},children:[r.jsx("div",{children:"Adjust Excel Labs, Near Arman Pan Shop Faisalabad Road Jaranwala"}),r.jsx("div",{style:{marginTop:"4px"},children:"For information/Appointment: Tel: 041 4313 777 | WhatsApp: 0322 7972 958"})]})}function Xe({to:e,children:t}){const n=xn(),l=e==="/"?n.pathname==="/":n.pathname===e||n.pathname.startsWith(e+"/");return r.jsx($i,{to:e,style:{padding:"10px 12px",textDecoration:"none",color:l?u.colors.brandBlue:u.colors.textSecondary,backgroundColor:l?u.colors.brandBlueSoft:"transparent",borderRadius:u.radius.base,fontSize:14,fontWeight:l?u.typography.fontWeight.medium:u.typography.fontWeight.normal,transition:u.transitions.fast},children:t})}function Xy(){const{token:e,logout:t,user:n,isLoading:l}=Se();xn();const i=qe(),s=(n==null?void 0:n.groups)||[],o=(n==null?void 0:n.is_superuser)||!1,a=o||s.includes("registration"),d=o||s.includes("performance"),c=o||s.includes("verification"),x=o,h=o||s.includes("manager")||s.includes("admin"),y=o||a||d||c;return e?l?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontFamily:u.typography.fontFamily},children:"Loading user..."}):r.jsx("div",{style:{display:"flex",minHeight:"100vh",fontFamily:u.typography.fontFamily,flexDirection:"column"},children:r.jsxs("div",{style:{display:"flex",flex:1,minHeight:0},children:[r.jsxs("aside",{style:{width:240,padding:20,borderRight:`1px solid ${u.colors.border}`,backgroundColor:u.colors.backgroundGray,display:"flex",flexDirection:"column"},children:[r.jsx("div",{style:{marginBottom:24,cursor:"pointer"},onClick:()=>i("/"),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:12},children:[r.jsx(Ef,{size:"lg",variant:"full"}),r.jsx(Rf,{size:"md"})]})}),r.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:4,flex:1},children:[r.jsx(Xe,{to:"/",children:"Dashboard"}),r.jsx("div",{style:{marginTop:12,paddingTop:12,borderTop:`1px solid ${u.colors.border}`},children:r.jsx("div",{style:{fontSize:11,color:u.colors.textTertiary,fontWeight:u.typography.fontWeight.semibold,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:8},children:"WORKFLOW"})}),a&&r.jsx(Xe,{to:"/registration",children:"Registration"}),y&&r.jsx(Xe,{to:"/patients/workflow",children:"Patient workflow"}),(d||c)&&r.jsx(Xe,{to:"/reporting/worklist",children:"Reporting worklist"}),y&&r.jsx(Xe,{to:"/reports",children:"Print reports"}),x&&r.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:`1px solid ${u.colors.border}`,display:"flex",flexDirection:"column",gap:4},children:[r.jsx("div",{style:{fontSize:11,color:u.colors.textTertiary,fontWeight:u.typography.fontWeight.semibold,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:8},children:"CATALOG & TEMPLATES"}),r.jsx(Xe,{to:"/settings/templates-v2",children:"Templates V2"}),r.jsx(Xe,{to:"/settings/block-library",children:"Block Library"}),r.jsx(Xe,{to:"/settings/services",children:"Services"})]}),x&&r.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:`1px solid ${u.colors.border}`,display:"flex",flexDirection:"column",gap:4},children:[r.jsx("div",{style:{fontSize:11,color:u.colors.textTertiary,fontWeight:u.typography.fontWeight.semibold,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:8},children:"SETTINGS"}),r.jsx(Xe,{to:"/settings/consultants",children:"Consultants"}),r.jsx(Xe,{to:"/settings/consultant-settlements",children:"Consultant Settlements"}),r.jsx(Xe,{to:"/settings/users",children:"User Settings"}),r.jsx(Xe,{to:"/receipt-settings",children:"Receipt Settings"}),h&&r.jsx(Xe,{to:"/settings/backups",children:"Backups"})]})]}),r.jsx("button",{onClick:t,style:{marginTop:"auto",padding:"10px 16px",backgroundColor:u.colors.danger,color:"white",border:"none",borderRadius:u.radius.base,cursor:"pointer",fontSize:14,fontWeight:u.typography.fontWeight.medium,transition:u.transitions.fast},children:"Logout"})]}),r.jsxs("main",{style:{flex:1,padding:24,display:"flex",flexDirection:"column",minHeight:0,backgroundColor:u.colors.background},children:[r.jsx("div",{style:{flex:1,minHeight:0,paddingBottom:20},children:r.jsxs(wf,{children:[r.jsx(fe,{path:"/",element:r.jsx(_m,{})}),r.jsx(fe,{path:"/registration",element:a?r.jsx(zm,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/patients/workflow",element:y?r.jsx(Dm,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/worklists/opd/*",element:r.jsx(ec,{title:"OPD module disabled",message:"OPD module is disabled in this build."})}),r.jsx(fe,{path:"/opd/*",element:r.jsx(ec,{title:"OPD module disabled",message:"OPD module is disabled in this build."})}),r.jsx(fe,{path:"/settings/consultant-settlements",element:x?r.jsx(bm,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/consultants",element:x?r.jsx(Cm,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/templates-v2",element:x?r.jsx(yy,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/templates-v2/:id/builder",element:x?r.jsx(Ly,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/block-library",element:x?r.jsx(Dy,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/services",element:x?r.jsx(vy,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/services/:id",element:x?r.jsx(jy,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/users",element:x?r.jsx(Ky,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/settings/backups",element:h?r.jsx(Qy,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/patients",element:r.jsx(wm,{})}),r.jsx(fe,{path:"/receipt-settings",element:x?r.jsx(km,{}):r.jsx(ot,{})}),r.jsx(fe,{path:"/studies",element:r.jsx(Yl,{to:"/",replace:!0})}),r.jsx(fe,{path:"/reports/:reportId/edit",element:r.jsx(Yl,{to:"/reports",replace:!0})}),r.jsx(fe,{path:"/reporting/worklist",element:r.jsx(ay,{})}),r.jsx(fe,{path:"/reporting/worklist/:service_visit_item_id/report",element:r.jsx(oy,{})}),r.jsx(fe,{path:"/reports",element:r.jsx(Iy,{})})]})}),r.jsx(qy,{})]})]})}):r.jsx(Yl,{to:"/login",replace:!0})}function Zy(){function e(){const{token:t}=Se();return t?r.jsx(Jy,{}):r.jsx(Yl,{to:"/login",replace:!0})}return r.jsx(vm,{children:r.jsxs(wf,{children:[r.jsx(fe,{path:"/login",element:r.jsx(Sm,{})}),r.jsx(fe,{path:"/print/report/:service_visit_item_id",element:r.jsx(e,{})}),r.jsx(fe,{path:"/*",element:r.jsx(Xy,{})})]})})}vs.createRoot(document.getElementById("root")).render(r.jsx(Co.StrictMode,{children:r.jsx(dm,{children:r.jsx(Zy,{})})}));
