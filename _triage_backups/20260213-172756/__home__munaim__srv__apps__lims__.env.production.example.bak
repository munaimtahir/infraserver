# ============================================
# LIMS Production Environment Configuration Template
# ============================================
# 
# IMPORTANT: Copy this file to .env.production and update all values
# This file should NOT be committed to version control
# 
# For SSH-based deployment, ensure the following are properly configured:
# - ALLOWED_HOSTS: Include your public IP and domain names
# - CORS_ALLOWED_ORIGINS: Must match your frontend domain
# - PUBLIC_IP: Set to your server's public IP address
# - SECRET_KEY: Generate a new secure key (see SSH_DEPLOYMENT.md)
#

# ============================================
# APPLICATION SETTINGS
# ============================================

# Django Secret Key - GENERATE NEW FOR PRODUCTION!
# Run: python3 -c "import secrets; print(secrets.token_urlsafe(50))"
SECRET_KEY=your-production-secret-key-here-change-this-immediately

# Debug Mode - ALWAYS False in production
DEBUG=False

# ============================================
# SERVER CONFIGURATION (CRITICAL FOR PUBLIC IP/DOMAIN)
# ============================================

# Allowed Hosts - comma-separated, NO SPACES
# Must include your domain AND public IP
# Format: domain.com,www.domain.com,xxx.xxx.xxx.xxx
ALLOWED_HOSTS=lims.alshifalab.pk

# Public IP Address - Your server's public IP
PUBLIC_IP=xxx.xxx.xxx.xxx

# Server Name/Domain
SERVER_NAME=lims.alshifalab.pk

# ============================================
# DATABASE CONFIGURATION
# ============================================

# Database Engine (use postgresql for production)
DB_ENGINE=django.db.backends.postgresql

# Database Name
DB_NAME=lims_db

# Database User
DB_USER=postgres

# Database Password - GENERATE SECURE PASSWORD!
# Run: openssl rand -base64 32
DB_PASSWORD=your-secure-postgres-password-change-this-immediately

# Database Host (use 'db' for Docker)
DB_HOST=db

# Database Port
DB_PORT=5432

# ============================================
# REDIS CONFIGURATION
# ============================================

# Redis URL (for cache and Celery)
REDIS_URL=redis://redis:6379/0

# Redis Host
REDIS_HOST=redis

# Redis Port
REDIS_PORT=6379

# ============================================
# CORS CONFIGURATION (CRITICAL FOR FRONTEND)
# ============================================

# CORS Allowed Origins - comma-separated URLs
# Must be HTTPS URLs in production
# Must match your frontend domain/URL
# Format: https://domain.com,https://www.domain.com
CORS_ALLOWED_ORIGINS=https://lims.alshifalab.pk

# CSRF Trusted Origins - comma-separated, MUST include scheme
# Format: https://domain.com,https://api.domain.com
CSRF_TRUSTED_ORIGINS=https://lims.alshifalab.pk

# Allow credentials (cookies) in CORS requests
CORS_ALLOW_CREDENTIALS=True

# ============================================
# SSL/HTTPS CONFIGURATION
# ============================================

# Redirect HTTP to HTTPS
SECURE_SSL_REDIRECT=True

# Tell Django to use HTTPS when behind proxy
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https

# Secure session cookies
SESSION_COOKIE_SECURE=True

# Secure CSRF cookies
CSRF_COOKIE_SECURE=True

# HSTS (HTTP Strict Transport Security)
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# ============================================
# EMAIL CONFIGURATION
# ============================================

# Email Backend
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP Server Host
EMAIL_HOST=smtp.gmail.com

# SMTP Port (typically 587 for TLS)
EMAIL_PORT=587

# Use TLS for email
EMAIL_USE_TLS=True

# Email Account Username
EMAIL_HOST_USER=your-email@gmail.com

# Email Account Password (use App Password for Gmail!)
EMAIL_HOST_PASSWORD=your-app-password-not-regular-password

# Default From Email Address
DEFAULT_FROM_EMAIL=noreply@your-domain.com

# ============================================
# CELERY CONFIGURATION
# ============================================

# Celery Broker URL (Redis)
CELERY_BROKER_URL=redis://redis:6379/0

# Celery Result Backend (Redis)
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Celery Message Format
CELERY_ACCEPT_CONTENT=json

# Celery Task Serializer
CELERY_TASK_SERIALIZER=json

# Celery Result Serializer
CELERY_RESULT_SERIALIZER=json

# ============================================
# BACKUP & RESTORE CONFIGURATION
# ============================================

# Local backup root mounted into backend/celery containers
BACKUP_ROOT=/backups/lims
BACKUP_APP_NAME=lims
BACKUP_RETENTION_DAILY=7
BACKUP_RETENTION_WEEKLY=4
BACKUP_RETENTION_MONTHLY=6

# Offsite provider: none | s3
BACKUP_OFFSITE_PROVIDER=none

# S3 / S3-compatible configuration (required when provider=s3)
S3_ENDPOINT_URL=
S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1

# ============================================
# JWT TOKEN CONFIGURATION
# ============================================

# JWT Access Token Lifetime (minutes)
JWT_ACCESS_TOKEN_LIFETIME_MINUTES=60

# JWT Refresh Token Lifetime (days)
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log Level
LOG_LEVEL=INFO

# ============================================
# CADDY REVERSE PROXY CONFIGURATION
# ============================================

# Primary Domain for Caddy
CADDY_DOMAIN=lims.alshifalab.pk

# Additional domains (comma-separated)
CADDY_DOMAINS_ADDITIONAL=

# ============================================
# SECURITY SETTINGS
# ============================================

# Browser XSS Filter
SECURE_BROWSER_XSS_FILTER=True

# Content Type Nosniff
SECURE_CONTENT_TYPE_NOSNIFF=True

# X-Frame-Options (prevent clickjacking)
X_FRAME_OPTIONS=DENY

# ============================================
# INTERNATIONALIZATION
# ============================================

# Language Code
LANGUAGE_CODE=en-us

# Time Zone
TIME_ZONE=Asia/Karachi

# ============================================
# OPTIONAL: MONITORING & PERFORMANCE
# ============================================

# Sentry DSN (optional - for error tracking)
# SENTRY_DSN=https://your-sentry-key@sentry.io/project-id

# New Relic APM (optional - for performance monitoring)
# NEW_RELIC_CONFIG_FILE=newrelic.ini
# NEW_RELIC_ENVIRONMENT=production

# ============================================
# OPTIONAL: BACKUP CONFIGURATION
# ============================================

# Backup Frequency (daily/weekly/monthly)
BACKUP_FREQUENCY=daily

# Backup Retention Days
BACKUP_RETENTION_DAYS=30

# ============================================
# NOTES
# ============================================
# 
# 1. ALLOWED_HOSTS Configuration:
#    - Must include the domain name users will visit
#    - Must include the public IP (if accessing by IP)
#    - Without proper ALLOWED_HOSTS, you'll get "Bad Request (400)" errors
#
# 2. CORS_ALLOWED_ORIGINS Configuration:
#    - Controls which origins can make cross-origin requests
#    - Frontend must be able to make requests to backend
#    - If frontend and backend on same domain, use that domain
#    - If separate domains, list all frontend domains here
#    - ALWAYS use HTTPS in production (except localhost for testing)
#
# 3. SECRET_KEY:
#    - Generate a new strong key for production
#    - Never reuse dev keys in production
#    - Keep this secret!
#
# 4. Database Password:
#    - Generate a strong, unique password
#    - Use at least 32 characters
#    - Include uppercase, lowercase, numbers, and symbols
#
# 5. Email Configuration:
#    - For Gmail, use an App Password (not your regular password)
#    - Create at: https://myaccount.google.com/apppasswords
#    - For other providers, check their documentation
#
# 6. SSL/HTTPS:
#    - Caddy automatically obtains Let's Encrypt certificates
#    - Requires internet access and valid domain
#    - Renews automatically (no manual intervention needed)
#
# 7. File Permissions:
#    - After creating .env.production, set permissions:
#    - chmod 600 .env.production
#    - This ensures only the owner can read it
#
